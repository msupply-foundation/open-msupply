query OutboundShipments(
  $storeId: String
  $otherPartyId: String
  $before: String
  $after: String
) {
  invoices(
    storeId: $storeId
    filter: {
      type: { equalTo: OUTBOUND_SHIPMENT }
      otherPartyId: { equalTo: $otherPartyId }
      shippedDatetime: { afterOrEqualTo: $after, beforeOrEqualTo: $before }
    }
  ) {
    ... on InvoiceConnector {
      nodes {
        id
        otherPartyName
        lines {
          nodes {
            id
            item {
              id
              code
              name
            }
            batch
            expiryDate
            numberOfPacks
            packSize
            costPricePerPack
            totalBeforeTax
          }
        }
      }
    }
  }
}
