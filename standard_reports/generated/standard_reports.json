{
  "reports": [
    {
      "id": "expiring-items_2_6_1_false",
      "name": "Expiring Items",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql"
          ],
          "convert_data": "dmFyIHQ9ezM3ODp0PT57Y29uc3QgZT10PT57bGV0IHI9e307cmV0dXJuIE9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uKG8peyIiIT09dFtvXSYmdm9pZCAwIT09dFtvXSYmbnVsbCE9PXRbb10mJigib2JqZWN0Ij09dHlwZW9mIHRbb10/cltvXT1lKHRbb10pOnJbb109dFtvXSl9KSkscn0scj0odCxlKT0+KGUrPSIiKS5zcGxpdCgiLiIpLnJlZHVjZSgoKHQsZSk9PnQmJnRbZV0pLHQpO3QuZXhwb3J0cz17Y2xlYW5VcE9iamVjdDplLGNsZWFuVXBOb2Rlczp0PT57bGV0IHI9W107cmV0dXJuIHQuZm9yRWFjaCgodD0+ezAhPU9iamVjdC5rZXlzKHQpLmxlbmd0aCYmci5wdXNoKGUodCkpfSkpLHJ9LGdldE5lc3RlZFZhbHVlOnIsc29ydE5vZGVzOih0LGUsbyk9PihlJiZ0LnNvcnQoKCh0LG4pPT57bGV0IGE9cih0LGUpOyJzdHJpbmciPT10eXBlb2YgYSYmKGE9YS50b0xvY2FsZUxvd2VyQ2FzZSgpKTtsZXQgcz1yKG4sZSk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBzJiYocz1zLnRvTG9jYWxlTG93ZXJDYXNlKCkpLG51bGw9PWEmJm51bGw9PXM/MDpudWxsPT1hPyJhc2MiPT09bz8tMToxOm51bGw9PXM/ImFzYyI9PT1vPzE6LTE6YT09PXM/MDoiYXNjIj09PW8/YT5zPzE6LTE6YTxzPzE6LTF9KSksdCl9fX0sZT17fTtmdW5jdGlvbiByKG8pe3ZhciBuPWVbb107aWYodm9pZCAwIT09bilyZXR1cm4gbi5leHBvcnRzO3ZhciBhPWVbb109e2V4cG9ydHM6e319O3JldHVybiB0W29dKGEsYS5leHBvcnRzLHIpLGEuZXhwb3J0c31yLmQ9KHQsZSk9Pntmb3IodmFyIG8gaW4gZSlyLm8oZSxvKSYmIXIubyh0LG8pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxvLHtlbnVtZXJhYmxlOiEwLGdldDplW29dfSl9LHIubz0odCxlKT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSk7dmFyIG89e307ci5kKG8se0g6KCk9Pml9KTt2YXIgbj1yKDM3OCk7Y29uc3QgYT0odCxlLHIpPT57dC5mb3JFYWNoKCh0PT57aWYoMD09T2JqZWN0LmtleXModCkubGVuZ3RoKXJldHVybjtjb25zdCBlPXModD8uZXhwaXJ5RGF0ZSkscj1jKGUsdCk7ciYmKHQuZXhwZWN0ZWRVc2FnZT1yKTtjb25zdCBvPWwodD8ucGFja1NpemUsdD8udG90YWxOdW1iZXJPZlBhY2tzLHQ/Lml0ZW0/LnN0YXRzPy5hdmVyYWdlTW9udGhseUNvbnN1bXB0aW9uLGUpO28mJih0LnN0b2NrQXRSaXNrPW8pLHQuZGF5c1VudGlsRXhwaXJlZD11KGUpLHQuYXZlcmFnZU1vbnRobHlDb25zdW1wdGlvbj1NYXRoLnJvdW5kKDEwKih0Py5pdGVtPy5zdGF0cz8uYXZlcmFnZU1vbnRobHlDb25zdW1wdGlvbj8/MCkpLzEwfSkpO2xldCBvPSgwLG4uY2xlYW5VcE5vZGVzKSh0KTtyZXR1cm4oMCxuLnNvcnROb2RlcykobyxlLHIpfSxzPXQ9PntsZXQgZTtpZih0KXtsZXQgcj1EYXRlLm5vdygpO2U9KG5ldyBEYXRlKHQpLXIpLzFlMy82MC82MC8yNH1yZXR1cm4gZX0sYz0odCxlKT0+e2xldCByLG89ZT8uaXRlbT8uc3RhdHM/LmF2ZXJhZ2VNb250aGx5Q29uc3VtcHRpb24sbj1lPy50b3RhbE51bWJlck9mUGFja3MqZT8ucGFja1NpemU7aWYodCYmbyYmbiYmdD49MCl7Y29uc3QgZT1NYXRoLnJvdW5kKHQqKG8vMzAuNDM3NSkpO3I9TWF0aC5taW4oZSxuPz9lKX1yZXR1cm4gcn0sbD0odCxlLHIsbyk9PntsZXQgbjtpZih0JiZlJiZvKXtjb25zdCBhPXQqZTtyJiYobj1vPj0wP01hdGgucm91bmQoYS1yKihvLzMwLjQzNzUpKTpNYXRoLnJvdW5kKGEpKSxyfHxvPD0wJiYobj1NYXRoLnJvdW5kKGEpKX1yZXR1cm4gbjwwPzA6bn0sdT10PT57bGV0IGU7cmV0dXJuIHQmJihlPU1hdGgucm91bmQodCkpLGV9O2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQuZGF0YS5zdG9ja0xpbmVzLm5vZGVzPWEodC5kYXRhLnN0b2NrTGluZXMubm9kZXMsdD8uYXJndW1lbnRzPy5zb3J0Pz8iaXRlbS5uYW1lIix0Py5hcmd1bWVudHM/LmRpcj8/ImFzYyIpLHR9dmFyIHA9by5IO2V4cG9ydHtwIGFzIGNvbnZlcnRfZGF0YX07",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>{% include \"style.css\" %}</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"report.expiring-in-days\", f=\"Expiring in (days)\")}}</td>\n        <td>{{t(k=\"label.batch\", f=\"Batch\")}}</td>\n        <td>{{t(k=\"report.expiry-date\", f=\"Expiry date\")}}</td>\n        <td>{{t(k=\"report.stock-on-hand\", f=\"Stock on hand\")}}</td>\n        <td>{{t(k=\"report.average-monthly-consumption\", f=\"Average monthly consumption\")}}</td>\n        <td>{{t(k=\"report.expected-usage\", f=\"Expected usage\")}}</td>\n        <td>{{t(k=\"report.stock-at-risk\", f=\"Stock at risk\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for stockLine in data.stockLines.nodes %}\n      <tr>\n        <td>{{stockLine.item.code}}</td>\n        <td>{{stockLine.item.name}}</td>\n        <td class=\"expiry-date\">\n          {% if stockLine.daysUntilExpired %}\n            {% if stockLine.daysUntilExpired <= 0 %}\n              <span class=\"expired\">{{t(k=\"report.expired\", f=\"Expired\")}}</span>\n              {% elif stockLine.daysUntilExpired <= arguments.monthsItemsExpire *\n                (365.25 / 12.0) %}\n              <span class=\"soon\">{{ stockLine.daysUntilExpired }}</span>\n            {% else %}\n                <span class=\"all-good\">{{ stockLine.daysUntilExpired }}</span>\n            {% endif %}\n          {% else %}\n            <span class=\"na\">N/A</span>\n          {% endif %}\n        </td>\n        <td>{{stockLine.batch | default(value='')}}</td>\n        <td>\n          {% if stockLine.expiryDate %}\n            {{ stockLine.expiryDate | date(format=\"%d/%m/%Y\") }}\n          {% else %}\n            N/A\n          {% endif %}\n        </td>\n        <td>{{stockLine.totalNumberOfPacks * stockLine.packSize | round( precision=1)\n          }}</td>\n        <td>{{stockLine.averageMonthlyConsumption }}</td>\n        <td>\n          {% if stockLine.expectedUsage %}\n              {{ stockLine.expectedUsage | round( precision=1) }}\n          {% else %}\n            N/A\n          {% endif %}\n        </td>\n        <td>\n          {% if stockLine.stockAtRisk %}\n            {{ stockLine.stockAtRisk | round( precision=1) }}\n          {% else %}\n            N/A\n          {% endif %}\n        </td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>"
            }
          },
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query ExpiringItems(\n  $storeId: String\n  $itemCodeOrName: String\n  $expiryDate: String\n) {\n  stockLines(\n    storeId: $storeId\n    filter: {\n      itemCodeOrName: { like: $itemCodeOrName }\n      expiryDate: { beforeOrEqualTo: $expiryDate }\n      hasPacksInStore: true\n      isActive: true\n    }\n    page: { first: 5000 }\n  ) {\n    ... on StockLineConnector {\n      nodes {\n        batch\n        expiryDate\n        id\n        packSize\n        storeId\n        totalNumberOfPacks\n        supplierName\n        location {\n          code\n        }\n        item {\n          code\n          name\n          unitName\n          stats(storeId: $storeId) {\n            averageMonthlyConsumption\n          }\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container > table > thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container>table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.expiry-date span {\n  padding: 2px;\n  border-radius: 10px;\n}\n\n.container table td.expiry-date span.expired::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(245, 5, 1, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.expired {\n  background-color: rgba(245, 5, 1, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}\n\n.container table td.expiry-date span.soon::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(248, 154, 1, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.soon {\n  background-color: rgba(248, 154, 1, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}\n\n.container table td.expiry-date span.all-good::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(51, 169, 1, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.all-good {\n  background-color: rgba(51, 169, 1, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}\n\n.container table span.na::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(143, 144, 166, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.na {\n  background-color: rgba(143, 144, 166, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}"
          }
        }
      },
      "context": "REPORT",
      "sub_context": "Expiring",
      "argument_schema_id": "for_report_expiring-items_2_6_1_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.1",
      "code": "expiring-items",
      "form_schema": {
        "id": "for_report_expiring-items_2_6_1_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "enum": [
                    "asc",
                    "desc"
                  ],
                  "type": "string"
                },
                "expiryDate": {
                  "description": "T#label.expiry-date",
                  "format": "date",
                  "type": "string"
                },
                "itemCodeOrName": {
                  "description": "Item Code or Name",
                  "type": "string"
                },
                "monthlyConsumptionLookBackPeriod": {
                  "description": "Average Monthly Consumption Look Back Period",
                  "readOnly": true,
                  "type": "number"
                },
                "monthsItemsExpire": {
                  "description": "Expiring item period",
                  "readOnly": true,
                  "type": "number"
                },
                "monthsOverstock": {
                  "description": "Months Overstock",
                  "readOnly": true,
                  "type": "number"
                },
                "monthsUnderstock": {
                  "description": "Months Understock",
                  "readOnly": true,
                  "type": "number"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "item.name",
                    "item.code",
                    "expiryDate",
                    "daysUntilExpired",
                    "stockAtRisk",
                    "expectedUsage"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.expiry-date",
              "options": {
                "dateOnly": true
              },
              "scope": "#/properties/expiryDate",
              "type": "Control"
            },
            {
              "label": "T#report.item-code-or-name",
              "options": {
                "flexBasis": "90%",
                "useDebounce": false
              },
              "scope": "#/properties/itemCodeOrName",
              "type": "Control"
            },
            {
              "label": "T#report.amc-lookback",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthlyConsumptionLookBackPeriod",
              "type": "Control"
            },
            {
              "label": "T#label.max-months-of-stock",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthsOverstock",
              "type": "Control"
            },
            {
              "label": "T#label.min-months-of-stock",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthsUnderstock",
              "type": "Control"
            },
            {
              "label": "T#label.expiring-item-period",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthsItemsExpire",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "item.name",
                    "T#report.item-name"
                  ],
                  [
                    "item.code",
                    "T#label.code"
                  ],
                  [
                    "expiryDate",
                    "T#report.expiry-date"
                  ],
                  [
                    "daysUntilExpired",
                    "T#report.days-until-expired"
                  ],
                  [
                    "stockAtRisk",
                    "T#report.stock-at-risk"
                  ],
                  [
                    "expectedUsage",
                    "T#report.expected-usage"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "options": {
                "show": [
                  [
                    "asc",
                    "T#report.ascending"
                  ],
                  [
                    "desc",
                    "T#report.descending"
                  ]
                ]
              },
              "scope": "#/properties/dir",
              "type": "Control"
            }
          ],
          "type": "VerticalLayout"
        }
      }
    },
    {
      "id": "stock-status_2_6_1_false",
      "name": "Stock Status",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql"
          ],
          "convert_data": "dmFyIGU9ezM3ODplPT57Y29uc3QgdD1lPT57bGV0IHI9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG8peyIiIT09ZVtvXSYmdm9pZCAwIT09ZVtvXSYmbnVsbCE9PWVbb10mJigib2JqZWN0Ij09dHlwZW9mIGVbb10/cltvXT10KGVbb10pOnJbb109ZVtvXSl9KSkscn0scj0oZSx0KT0+KHQrPSIiKS5zcGxpdCgiLiIpLnJlZHVjZSgoKGUsdCk9PmUmJmVbdF0pLGUpO2UuZXhwb3J0cz17Y2xlYW5VcE9iamVjdDp0LGNsZWFuVXBOb2RlczplPT57bGV0IHI9W107cmV0dXJuIGUuZm9yRWFjaCgoZT0+ezAhPU9iamVjdC5rZXlzKGUpLmxlbmd0aCYmci5wdXNoKHQoZSkpfSkpLHJ9LGdldE5lc3RlZFZhbHVlOnIsc29ydE5vZGVzOihlLHQsbyk9Pih0JiZlLnNvcnQoKChlLG4pPT57bGV0IHM9cihlLHQpOyJzdHJpbmciPT10eXBlb2YgcyYmKHM9cy50b0xvY2FsZUxvd2VyQ2FzZSgpKTtsZXQgYT1yKG4sdCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBhJiYoYT1hLnRvTG9jYWxlTG93ZXJDYXNlKCkpLG51bGw9PXMmJm51bGw9PWE/MDpudWxsPT1zPyJhc2MiPT09bz8tMToxOm51bGw9PWE/ImFzYyI9PT1vPzE6LTE6cz09PWE/MDoiYXNjIj09PW8/cz5hPzE6LTE6czxhPzE6LTF9KSksZSl9fX0sdD17fTtmdW5jdGlvbiByKG8pe3ZhciBuPXRbb107aWYodm9pZCAwIT09bilyZXR1cm4gbi5leHBvcnRzO3ZhciBzPXRbb109e2V4cG9ydHM6e319O3JldHVybiBlW29dKHMscy5leHBvcnRzLHIpLHMuZXhwb3J0c31yLmQ9KGUsdCk9Pntmb3IodmFyIG8gaW4gdClyLm8odCxvKSYmIXIubyhlLG8pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLHtlbnVtZXJhYmxlOiEwLGdldDp0W29dfSl9LHIubz0oZSx0KT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCk7dmFyIG89e307ci5kKG8se0g6KCk9PmF9KTt2YXIgbj1yKDM3OCk7Y29uc3Qgcz0oZSx0LHIpPT57bGV0IG89KDAsbi5jbGVhblVwTm9kZXMpKGUpO3JldHVybigwLG4uc29ydE5vZGVzKShvLHQscil9O2Z1bmN0aW9uIGEoZSl7cmV0dXJuIGUuZGF0YS5pdGVtcy5ub2Rlcz1zKGUuZGF0YS5pdGVtcy5ub2RlcyxlPy5hcmd1bWVudHM/LnNvcnQ/PyJuYW1lIixlPy5hcmd1bWVudHM/LmRpcj8/ImFzYyIpLGV9dmFyIGw9by5IO2V4cG9ydHtsIGFzIGNvbnZlcnRfZGF0YX07",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query StockStatus($storeId: String, $itemCode: String, $itemName: String) {\n  items(\n    storeId: $storeId\n    filter: {\n      code: { like: $itemCode }\n      name: { like: $itemName }\n      isVisibleOrOnHand: true\n      isActive: true\n    }\n    page: { first: 5000 }\n  ) {\n    ... on ItemConnector {\n      nodes {\n        code\n        name\n        stats(storeId: $storeId) {\n          totalConsumption\n          availableMonthsOfStockOnHand\n          stockOnHand\n          averageMonthlyConsumption\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container table tr:last-child td {\n  border-bottom: none;\n}\n\n.container>table>thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container>table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.status span {\n  padding: 2px;\n  border-radius: 10px;\n}\n\n\n.container table td.status span::before {\n  content: '';\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  margin-right: 5px;\n}\n\n.container table td.status span.out-of-stock::before {\n  background-color: #f40502;\n}\n\n.container table td.status span.out-of-stock {\n   padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #fbcdcc;\n}\n\n.container table td.status span.overstocked::before {\n  background-color: #0260f7;\n}\n\n.container table td.status span.overstocked {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #d9d9ff;\n}\n\n.container table td.status span.understocked::before {\n  background-color: #f79a02;\n}\n\n.container table td.status span.understocked {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #fdebcc;\n}\n\n.container table td.status span.well-stocked::before {\n  background-color: #33a902;\n}\n\n.container table td.status span.well-stocked {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #d6eecc;\n}\n\n.container table td.status span.no-consumption::before {\n  background-color: #8f90a6;\n}\n\n.container table td.status span.no-consumption {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #e9e9ed;\n}\n"
          },
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>\n  {% include \"style.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"label.status\", f=\"Status\")}}</td>\n        <td>\n          {{t(k=\"report.consumption\", f=\"Consumption\")}}\n          ({{arguments.monthlyConsumptionLookBackPeriod | default(value=3)}})\n          {{t(k=\"label.months\", f=\"months\")}}\n        </td>\n        <td>{{t(k=\"label.soh\", f=\"SOH\")}}</td>\n        <td>\n          {{t(k=\"label.amc\", f=\"AMC\")}}\n          ({{arguments.monthlyConsumptionLookBackPeriod | default(value=3)}})\n          {{t(k=\"label.months\", f=\"months\")}}\n        </td>\n        <td>{{t(k=\"report.mos\", f=\"MOS\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for item in data.items.nodes %} \n      {% set SOH = item.stats.stockOnHand | default(value=0) | round( precision=1) %} \n      {% set AMC =  item.stats.averageMonthlyConsumption | default(value=0) |\n      round(precision=1) %} \n      {% set MOS = item.stats.availableMonthsOfStockOnHand | default(value=0) | round( precision=1) %}\n\n      <tr>\n        <td>{{item.code}}</td>\n        <td>{{item.name}}</td>\n        <td class=\"status\">\n          {% if SOH == 0 and AMC > 0 %}\n          <span class=\"out-of-stock\"\n            >{{t(k=\"report.out-of-stock\", f=\"Out of Stock\")}}</span\n          >\n          {% elif AMC == 0 %}\n          <span class=\"no-consumption\"\n            >{{t(k=\"report.no-consumption\", f=\"No consumption\")}}</span\n          >\n          {% elif MOS >= arguments.monthsUnderstock | default(value=0) and MOS\n          <= arguments.monthsOverstock | default(value=0) %}\n          <span class=\"well-stocked\"\n            >{{t(k=\"report.well-stocked\", f=\"Well stocked\")}}</span\n          >\n          {% elif MOS < arguments.monthsUnderstock | default(value=0) %}\n          <span class=\"understocked\">\n            {{t(k=\"report.understocked\", f=\"Understocked\")}}</span\n          >\n          {% elif MOS > arguments.monthsOverstock | default(value=0) %}\n          <span class=\"overstocked\"\n            >{{t(k=\"report.overstocked\", f=\"Overstocked\")}}</span\n          >\n          {% else %} {% endif %}\n        </td>\n        <td>\n          {{item.stats.totalConsumption | default(value=0) | round(\n          precision=1)}}\n        </td>\n        <td>{{SOH}}</td>\n        <td>{{AMC}}</td>\n        <td>\n          {{item.stats.availableMonthsOfStockOnHand | default(value=0) | round(\n          precision=1)}}\n        </td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "StockAndItems",
      "argument_schema_id": "for_report_stock-status_2_6_1_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.1",
      "code": "stock-status",
      "form_schema": {
        "id": "for_report_stock-status_2_6_1_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "enum": [
                    "asc",
                    "desc"
                  ],
                  "type": "string"
                },
                "itemCode": {
                  "description": "Item Code",
                  "type": "string"
                },
                "itemName": {
                  "description": "Item Name",
                  "type": "string"
                },
                "monthlyConsumptionLookBackPeriod": {
                  "description": "Average Monthly Consumption Look Back Period",
                  "type": "number"
                },
                "monthsOverstock": {
                  "description": "Months Overstock",
                  "type": "number"
                },
                "monthsUnderstock": {
                  "description": "Months Understock",
                  "type": "number"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "name",
                    "code"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.item-code",
              "options": {
                "useDebounce": false
              },
              "scope": "#/properties/itemCode",
              "type": "Control"
            },
            {
              "label": "T#report.item-name",
              "options": {
                "useDebounce": false
              },
              "scope": "#/properties/itemName",
              "type": "Control"
            },
            {
              "label": "T#report.amc-lookback",
              "options": {
                "readonly": true
              },
              "scope": "#/properties/monthlyConsumptionLookBackPeriod",
              "type": "Control"
            },
            {
              "label": "T#label.max-months-of-stock",
              "options": {
                "readonly": true
              },
              "scope": "#/properties/monthsOverstock",
              "type": "Control"
            },
            {
              "label": "T#label.min-months-of-stock",
              "options": {
                "readonly": true
              },
              "scope": "#/properties/monthsUnderstock",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "name",
                    "T#report.item-name"
                  ],
                  [
                    "code",
                    "T#label.code"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "options": {
                "show": [
                  [
                    "asc",
                    "T#report.ascending"
                  ],
                  [
                    "desc",
                    "T#report.descending"
                  ]
                ]
              },
              "scope": "#/properties/dir",
              "type": "Control"
            }
          ],
          "type": "VerticalLayout"
        }
      }
    },
    {
      "id": "item-usage_2_6_1_false",
      "name": "Item Usage",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql",
            "thisMonthConsumption",
            "lastMonthConsumption",
            "twoMonthsAgoConsumption",
            "expiringInSixMonths",
            "expiringInTwelveMonths",
            "stockOnOrder",
            "AMCTwelve",
            "AMCTwentyFour"
          ],
          "convert_data": "dmFyIHQ9ezI6KHQscixlKT0+e3ZhciBuPWUoMjE5OSksbz1lKDQ2NjQpLGE9ZSg1OTUwKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG4odCxhLG8pfX0sNzk6KHQscixlKT0+e3ZhciBuPWUoMzcwMiksbz1lKDgwKSxhPWUoNDczOSksaT1lKDg2NTUpLHU9ZSgxMTc1KTtmdW5jdGlvbiBzKHQpe3ZhciByPS0xLGU9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytyPGU7KXt2YXIgbj10W3JdO3RoaXMuc2V0KG5bMF0sblsxXSl9fXMucHJvdG90eXBlLmNsZWFyPW4scy5wcm90b3R5cGUuZGVsZXRlPW8scy5wcm90b3R5cGUuZ2V0PWEscy5wcm90b3R5cGUuaGFzPWkscy5wcm90b3R5cGUuc2V0PXUsdC5leHBvcnRzPXN9LDgwOih0LHIsZSk9Pnt2YXIgbj1lKDYwMjUpLG89QXJyYXkucHJvdG90eXBlLnNwbGljZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXyxlPW4ocix0KTtyZXR1cm4hKGU8MHx8KGU9PXIubGVuZ3RoLTE/ci5wb3AoKTpvLmNhbGwocixlLDEpLC0tdGhpcy5zaXplLDApKX19LDEwNDoodCxyLGUpPT57dmFyIG49ZSgzNjYxKTtmdW5jdGlvbiBvKHQscil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHR8fG51bGwhPXImJiJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoIkV4cGVjdGVkIGEgZnVuY3Rpb24iKTt2YXIgZT1mdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cyxvPXI/ci5hcHBseSh0aGlzLG4pOm5bMF0sYT1lLmNhY2hlO2lmKGEuaGFzKG8pKXJldHVybiBhLmdldChvKTt2YXIgaT10LmFwcGx5KHRoaXMsbik7cmV0dXJuIGUuY2FjaGU9YS5zZXQobyxpKXx8YSxpfTtyZXR1cm4gZS5jYWNoZT1uZXcoby5DYWNoZXx8biksZX1vLkNhY2hlPW4sdC5leHBvcnRzPW99LDI3MDoodCxyLGUpPT57dmFyIG49ZSg3MDY4KSxvPWUoMzQ2KTt0LmV4cG9ydHM9ZnVuY3Rpb24gdChyLGUsYSxpLHUpe3JldHVybiByPT09ZXx8KG51bGw9PXJ8fG51bGw9PWV8fCFvKHIpJiYhbyhlKT9yIT1yJiZlIT1lOm4ocixlLGEsaSx0LHUpKX19LDI4OToodCxyLGUpPT57dmFyIG49ZSgyNjUxKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG4odGhpcyx0KS5nZXQodCl9fSwyOTQ6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQmJnQ+LTEmJnQlMT09MCYmdDw9OTAwNzE5OTI1NDc0MDk5MX19LDMxNzp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPS0xLGU9QXJyYXkodC5zaXplKTtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG4pe2VbKytyXT1bbix0XX0pKSxlfX0sMzQ2OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPXQmJiJvYmplY3QiPT10eXBlb2YgdH19LDM2MTp0PT57dmFyIHI9L14oPzowfFsxLTldXGQqKSQvO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuPXR5cGVvZiB0O3JldHVybiEhKGU9bnVsbD09ZT85MDA3MTk5MjU0NzQwOTkxOmUpJiYoIm51bWJlciI9PW58fCJzeW1ib2wiIT1uJiZyLnRlc3QodCkpJiZ0Pi0xJiZ0JTE9PTAmJnQ8ZX19LDM5Mjp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIG51bGw9PXQ/dm9pZCAwOnRbcl19fSw1ODM6KHQscixlKT0+e3ZhciBuPWUoNzIzNyksbz1lKDcyNTUpLGE9ZSg4NTg2KSxpPWUoNzc5Nyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBhKHQpP24oaSh0KSk6byh0KX19LDYzMToodCxyLGUpPT57dmFyIG49ZSg4MDc3KSxvPWUoOTMyNik7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIG51bGwhPXQmJm8odCxyLG4pfX0sNjQxOih0LHIsZSk9Pnt2YXIgbj1lKDY2NDkpLG89ZSg1OTUwKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdCYmbih0LHIsbyl9fSw2NTk6KHQscixlKT0+e3ZhciBuPWUoMTg3Myksbz1PYmplY3QucHJvdG90eXBlLGE9by5oYXNPd25Qcm9wZXJ0eSxpPW8udG9TdHJpbmcsdT1uP24udG9TdHJpbmdUYWc6dm9pZCAwO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgcj1hLmNhbGwodCx1KSxlPXRbdV07dHJ5e3RbdV09dm9pZCAwO3ZhciBuPSEwfWNhdGNoKHQpe312YXIgbz1pLmNhbGwodCk7cmV0dXJuIG4mJihyP3RbdV09ZTpkZWxldGUgdFt1XSksb319LDY4OToodCxyLGUpPT57dmFyIG49ZSgyKSxvPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlLGEsaSx1KXt2YXIgcz0xJmUsYz1uKHQpLHA9Yy5sZW5ndGg7aWYocCE9bihyKS5sZW5ndGgmJiFzKXJldHVybiExO2Zvcih2YXIgZj1wO2YtLTspe3ZhciB2PWNbZl07aWYoIShzP3YgaW4gcjpvLmNhbGwocix2KSkpcmV0dXJuITF9dmFyIGw9dS5nZXQodCksaD11LmdldChyKTtpZihsJiZoKXJldHVybiBsPT1yJiZoPT10O3ZhciB4PSEwO3Uuc2V0KHQsciksdS5zZXQocix0KTtmb3IodmFyIGQ9czsrK2Y8cDspe3ZhciB5PXRbdj1jW2ZdXSxiPXJbdl07aWYoYSl2YXIgXz1zP2EoYix5LHYscix0LHUpOmEoeSxiLHYsdCxyLHUpO2lmKCEodm9pZCAwPT09Xz95PT09Ynx8aSh5LGIsZSxhLHUpOl8pKXt4PSExO2JyZWFrfWR8fChkPSJjb25zdHJ1Y3RvciI9PXYpfWlmKHgmJiFkKXt2YXIgZz10LmNvbnN0cnVjdG9yLGo9ci5jb25zdHJ1Y3RvcjtnPT1qfHwhKCJjb25zdHJ1Y3RvciJpbiB0KXx8ISgiY29uc3RydWN0b3IiaW4gcil8fCJmdW5jdGlvbiI9PXR5cGVvZiBnJiZnIGluc3RhbmNlb2YgZyYmImZ1bmN0aW9uIj09dHlwZW9mIGomJmogaW5zdGFuY2VvZiBqfHwoeD0hMSl9cmV0dXJuIHUuZGVsZXRlKHQpLHUuZGVsZXRlKHIpLHh9fSw2OTU6KHQscixlKT0+e3ZhciBuPWUoODA5Niksbz1lKDI0MjgpLGE9ZSg2NDQ5KSxpPWUoMzY1NiksdT1lKDM2MSkscz1lKDcxNjcpLGM9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXt2YXIgZT1hKHQpLHA9IWUmJm8odCksZj0hZSYmIXAmJmkodCksdj0hZSYmIXAmJiFmJiZzKHQpLGw9ZXx8cHx8Znx8dixoPWw/bih0Lmxlbmd0aCxTdHJpbmcpOltdLHg9aC5sZW5ndGg7Zm9yKHZhciBkIGluIHQpIXImJiFjLmNhbGwodCxkKXx8bCYmKCJsZW5ndGgiPT1kfHxmJiYoIm9mZnNldCI9PWR8fCJwYXJlbnQiPT1kKXx8diYmKCJidWZmZXIiPT1kfHwiYnl0ZUxlbmd0aCI9PWR8fCJieXRlT2Zmc2V0Ij09ZCl8fHUoZCx4KSl8fGgucHVzaChkKTtyZXR1cm4gaH19LDc1NjoodCxyLGUpPT57dmFyIG49ZSgzODA1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXQmJiFuKHQpfX0sNzc2Oih0LHIsZSk9Pnt2YXIgbj1lKDc1Niksbz1lKDU5NTApO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtmb3IodmFyIHI9byh0KSxlPXIubGVuZ3RoO2UtLTspe3ZhciBhPXJbZV0saT10W2FdO3JbZV09W2EsaSxuKGkpXX1yZXR1cm4gcn19LDkwOToodCxyLGUpPT57dmFyIG49ZSg2NDEpLG89ZSg4MzI5KShuKTt0LmV4cG9ydHM9b30sOTM4OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXyxlPXIuZGVsZXRlKHQpO3JldHVybiB0aGlzLnNpemU9ci5zaXplLGV9fSw5NDU6KHQscixlKT0+e3ZhciBuPWUoNzkpLG89ZSg4MjIzKSxhPWUoMzY2MSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7dmFyIGU9dGhpcy5fX2RhdGFfXztpZihlIGluc3RhbmNlb2Ygbil7dmFyIGk9ZS5fX2RhdGFfXztpZighb3x8aS5sZW5ndGg8MTk5KXJldHVybiBpLnB1c2goW3Qscl0pLHRoaXMuc2l6ZT0rK2Uuc2l6ZSx0aGlzO2U9dGhpcy5fX2RhdGFfXz1uZXcgYShpKX1yZXR1cm4gZS5zZXQodCxyKSx0aGlzLnNpemU9ZS5zaXplLHRoaXN9fSwxMDQyOih0LHIsZSk9Pnt2YXIgbj1lKDYxMTApKE9iamVjdCwiY3JlYXRlIik7dC5leHBvcnRzPW59LDExNzU6KHQscixlKT0+e3ZhciBuPWUoNjAyNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7dmFyIGU9dGhpcy5fX2RhdGFfXyxvPW4oZSx0KTtyZXR1cm4gbzwwPygrK3RoaXMuc2l6ZSxlLnB1c2goW3Qscl0pKTplW29dWzFdPXIsdGhpc319LDEzODA6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5zZXQodCwiX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyIpLHRoaXN9fSwxNDIwOih0LHIsZSk9Pnt2YXIgbj1lKDc5KTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPW5ldyBuLHRoaXMuc2l6ZT0wfX0sMTQ1OTp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh0KX19LDE1NDk6KHQscixlKT0+e3ZhciBuPWUoMjAzMiksbz1lKDM4NjIpLGE9ZSg2NzIxKSxpPWUoMjc0OSksdT1lKDU3NDkpO2Z1bmN0aW9uIHModCl7dmFyIHI9LTEsZT1udWxsPT10PzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK3I8ZTspe3ZhciBuPXRbcl07dGhpcy5zZXQoblswXSxuWzFdKX19cy5wcm90b3R5cGUuY2xlYXI9bixzLnByb3RvdHlwZS5kZWxldGU9byxzLnByb3RvdHlwZS5nZXQ9YSxzLnByb3RvdHlwZS5oYXM9aSxzLnByb3RvdHlwZS5zZXQ9dSx0LmV4cG9ydHM9c30sMTc2OToodCxyLGUpPT57dmFyIG49ZSg2NDQ5KSxvPWUoODU4NiksYT1lKDE4MDIpLGk9ZSgzMjIyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gbih0KT90Om8odCxyKT9bdF06YShpKHQpKX19LDE3OTk6KHQscixlKT0+e3ZhciBuPWUoNzIxNyksbz1lKDI3MCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlLGEpe3ZhciBpPWUubGVuZ3RoLHU9aSxzPSFhO2lmKG51bGw9PXQpcmV0dXJuIXU7Zm9yKHQ9T2JqZWN0KHQpO2ktLTspe3ZhciBjPWVbaV07aWYocyYmY1syXT9jWzFdIT09dFtjWzBdXTohKGNbMF1pbiB0KSlyZXR1cm4hMX1mb3IoOysraTx1Oyl7dmFyIHA9KGM9ZVtpXSlbMF0sZj10W3BdLHY9Y1sxXTtpZihzJiZjWzJdKXtpZih2b2lkIDA9PT1mJiYhKHAgaW4gdCkpcmV0dXJuITF9ZWxzZXt2YXIgbD1uZXcgbjtpZihhKXZhciBoPWEoZix2LHAsdCxyLGwpO2lmKCEodm9pZCAwPT09aD9vKHYsZiwzLGEsbCk6aCkpcmV0dXJuITF9fXJldHVybiEwfX0sMTgwMjoodCxyLGUpPT57dmFyIG49ZSgyMjI0KSxvPS9bXi5bXF1dK3xcWyg/OigtP1xkKyg/OlwuXGQrKT8pfChbIiddKSgoPzooPyFcMilbXlxcXXxcXC4pKj8pXDIpXF18KD89KD86XC58XFtcXSkoPzpcLnxcW1xdfCQpKS9nLGE9L1xcKFxcKT8vZyxpPW4oKGZ1bmN0aW9uKHQpe3ZhciByPVtdO3JldHVybiA0Nj09PXQuY2hhckNvZGVBdCgwKSYmci5wdXNoKCIiKSx0LnJlcGxhY2UobywoZnVuY3Rpb24odCxlLG4sbyl7ci5wdXNoKG4/by5yZXBsYWNlKGEsIiQxIik6ZXx8dCl9KSkscn0pKTt0LmV4cG9ydHM9aX0sMTg3MzoodCxyLGUpPT57dmFyIG49ZSg5MzI1KS5TeW1ib2w7dC5leHBvcnRzPW59LDE4ODI6KHQscixlKT0+e3ZhciBuPWUoMjU1Miksbz1lKDM4MDUpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZighbyh0KSlyZXR1cm4hMTt2YXIgcj1uKHQpO3JldHVybiJbb2JqZWN0IEZ1bmN0aW9uXSI9PXJ8fCJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSI9PXJ8fCJbb2JqZWN0IEFzeW5jRnVuY3Rpb25dIj09cnx8IltvYmplY3QgUHJveHldIj09cn19LDE5ODY6KHQscixlKT0+e3ZhciBuPWUoMTg3Myksbz1lKDc4MjgpLGE9ZSg1Mjg4KSxpPWUoNTkxMSksdT1lKDMxNykscz1lKDQyNDcpLGM9bj9uLnByb3RvdHlwZTp2b2lkIDAscD1jP2MudmFsdWVPZjp2b2lkIDA7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlLG4sYyxmLHYpe3N3aXRjaChlKXtjYXNlIltvYmplY3QgRGF0YVZpZXddIjppZih0LmJ5dGVMZW5ndGghPXIuYnl0ZUxlbmd0aHx8dC5ieXRlT2Zmc2V0IT1yLmJ5dGVPZmZzZXQpcmV0dXJuITE7dD10LmJ1ZmZlcixyPXIuYnVmZmVyO2Nhc2UiW29iamVjdCBBcnJheUJ1ZmZlcl0iOnJldHVybiEodC5ieXRlTGVuZ3RoIT1yLmJ5dGVMZW5ndGh8fCFmKG5ldyBvKHQpLG5ldyBvKHIpKSk7Y2FzZSJbb2JqZWN0IEJvb2xlYW5dIjpjYXNlIltvYmplY3QgRGF0ZV0iOmNhc2UiW29iamVjdCBOdW1iZXJdIjpyZXR1cm4gYSgrdCwrcik7Y2FzZSJbb2JqZWN0IEVycm9yXSI6cmV0dXJuIHQubmFtZT09ci5uYW1lJiZ0Lm1lc3NhZ2U9PXIubWVzc2FnZTtjYXNlIltvYmplY3QgUmVnRXhwXSI6Y2FzZSJbb2JqZWN0IFN0cmluZ10iOnJldHVybiB0PT1yKyIiO2Nhc2UiW29iamVjdCBNYXBdIjp2YXIgbD11O2Nhc2UiW29iamVjdCBTZXRdIjp2YXIgaD0xJm47aWYobHx8KGw9cyksdC5zaXplIT1yLnNpemUmJiFoKXJldHVybiExO3ZhciB4PXYuZ2V0KHQpO2lmKHgpcmV0dXJuIHg9PXI7bnw9Mix2LnNldCh0LHIpO3ZhciBkPWkobCh0KSxsKHIpLG4sYyxmLHYpO3JldHVybiB2LmRlbGV0ZSh0KSxkO2Nhc2UiW29iamVjdCBTeW1ib2xdIjppZihwKXJldHVybiBwLmNhbGwodCk9PXAuY2FsbChyKX1yZXR1cm4hMX19LDIwMzI6KHQscixlKT0+e3ZhciBuPWUoMTA0Mik7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1uP24obnVsbCk6e30sdGhpcy5zaXplPTB9fSwyMTk5Oih0LHIsZSk9Pnt2YXIgbj1lKDQ1MjgpLG89ZSg2NDQ5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUpe3ZhciBhPXIodCk7cmV0dXJuIG8odCk/YTpuKGEsZSh0KSl9fSwyMjI0Oih0LHIsZSk9Pnt2YXIgbj1lKDEwNCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPW4odCwoZnVuY3Rpb24odCl7cmV0dXJuIDUwMD09PWUuc2l6ZSYmZS5jbGVhcigpLHR9KSksZT1yLmNhY2hlO3JldHVybiByfX0sMjQyODoodCxyLGUpPT57dmFyIG49ZSg3NTM0KSxvPWUoMzQ2KSxhPU9iamVjdC5wcm90b3R5cGUsaT1hLmhhc093blByb3BlcnR5LHU9YS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxzPW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKT9uOmZ1bmN0aW9uKHQpe3JldHVybiBvKHQpJiZpLmNhbGwodCwiY2FsbGVlIikmJiF1LmNhbGwodCwiY2FsbGVlIil9O3QuZXhwb3J0cz1zfSwyNTUyOih0LHIsZSk9Pnt2YXIgbj1lKDE4NzMpLG89ZSg2NTkpLGE9ZSg5MzUwKSxpPW4/bi50b1N0cmluZ1RhZzp2b2lkIDA7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3ZvaWQgMD09PXQ/IltvYmplY3QgVW5kZWZpbmVkXSI6IltvYmplY3QgTnVsbF0iOmkmJmkgaW4gT2JqZWN0KHQpP28odCk6YSh0KX19LDI2NTE6KHQscixlKT0+e3ZhciBuPWUoNDIxOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7dmFyIGU9dC5fX2RhdGFfXztyZXR1cm4gbihyKT9lWyJzdHJpbmciPT10eXBlb2Ygcj8ic3RyaW5nIjoiaGFzaCJdOmUubWFwfX0sMjc0OToodCxyLGUpPT57dmFyIG49ZSgxMDQyKSxvPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX19kYXRhX187cmV0dXJuIG4/dm9pZCAwIT09clt0XTpvLmNhbGwocix0KX19LDI4MDQ6KHQscixlKT0+e3ZhciBuPWUoNjExMCkoZSg5MzI1KSwiUHJvbWlzZSIpO3QuZXhwb3J0cz1ufSwyODc3Oih0LHIsZSk9Pnt2YXIgbj1lKDYxNTUpLG89ZSg2NDQ5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUsYSl7cmV0dXJuIG51bGw9PXQ/W106KG8ocil8fChyPW51bGw9PXI/W106W3JdKSxvKGU9YT92b2lkIDA6ZSl8fChlPW51bGw9PWU/W106W2VdKSxuKHQscixlKSl9fSwyOTQ5Oih0LHIsZSk9Pnt2YXIgbj1lKDI2NTEpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPW4odGhpcyx0KSxvPWUuc2l6ZTtyZXR1cm4gZS5zZXQodCxyKSx0aGlzLnNpemUrPWUuc2l6ZT09bz8wOjEsdGhpc319LDMwNDA6KHQscixlKT0+e3ZhciBuPWUoMTU0OSksbz1lKDc5KSxhPWUoODIyMyk7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dGhpcy5zaXplPTAsdGhpcy5fX2RhdGFfXz17aGFzaDpuZXcgbixtYXA6bmV3KGF8fG8pLHN0cmluZzpuZXcgbn19fSwzMjIxOnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHIsZSxuKXtmb3IodmFyIG89LTEsYT1PYmplY3QociksaT1uKHIpLHU9aS5sZW5ndGg7dS0tOyl7dmFyIHM9aVt0P3U6KytvXTtpZighMT09PWUoYVtzXSxzLGEpKWJyZWFrfXJldHVybiByfX19LDMyMjI6KHQscixlKT0+e3ZhciBuPWUoNzU1Nik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10PyIiOm4odCl9fSwzMzQ1OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm5bXX19LDM0ODg6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdH19LDM2MDU6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5nZXQodCl9fSwzNjUwOih0LHIsZSk9Pnt2YXIgbj1lKDQzMzUpKE9iamVjdC5rZXlzLE9iamVjdCk7dC5leHBvcnRzPW59LDM2NTY6KHQscixlKT0+e3Q9ZS5ubWQodCk7dmFyIG49ZSg5MzI1KSxvPWUoOTkzNSksYT1yJiYhci5ub2RlVHlwZSYmcixpPWEmJnQmJiF0Lm5vZGVUeXBlJiZ0LHU9aSYmaS5leHBvcnRzPT09YT9uLkJ1ZmZlcjp2b2lkIDAscz0odT91LmlzQnVmZmVyOnZvaWQgMCl8fG87dC5leHBvcnRzPXN9LDM2NjE6KHQscixlKT0+e3ZhciBuPWUoMzA0MCksbz1lKDc2NzApLGE9ZSgyODkpLGk9ZSg0NTA5KSx1PWUoMjk0OSk7ZnVuY3Rpb24gcyh0KXt2YXIgcj0tMSxlPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrcjxlOyl7dmFyIG49dFtyXTt0aGlzLnNldChuWzBdLG5bMV0pfX1zLnByb3RvdHlwZS5jbGVhcj1uLHMucHJvdG90eXBlLmRlbGV0ZT1vLHMucHJvdG90eXBlLmdldD1hLHMucHJvdG90eXBlLmhhcz1pLHMucHJvdG90eXBlLnNldD11LHQuZXhwb3J0cz1zfSwzNjYzOih0LHIsZSk9Pnt2YXIgbj1lKDE3OTkpLG89ZSg3NzYpLGE9ZSg3MTk3KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9byh0KTtyZXR1cm4gMT09ci5sZW5ndGgmJnJbMF1bMl0/YShyWzBdWzBdLHJbMF1bMV0pOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dHx8bihlLHQscil9fX0sMzcwMjp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1bXSx0aGlzLnNpemU9MH19LDM3MTQ6KHQscixlKT0+e3ZhciBuPWUoMzczMCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlKXtmb3IodmFyIG89LTEsYT10LmNyaXRlcmlhLGk9ci5jcml0ZXJpYSx1PWEubGVuZ3RoLHM9ZS5sZW5ndGg7KytvPHU7KXt2YXIgYz1uKGFbb10saVtvXSk7aWYoYylyZXR1cm4gbz49cz9jOmMqKCJkZXNjIj09ZVtvXT8tMToxKX1yZXR1cm4gdC5pbmRleC1yLmluZGV4fX0sMzczMDoodCxyLGUpPT57dmFyIG49ZSg0Mzk0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtpZih0IT09cil7dmFyIGU9dm9pZCAwIT09dCxvPW51bGw9PT10LGE9dD09dCxpPW4odCksdT12b2lkIDAhPT1yLHM9bnVsbD09PXIsYz1yPT1yLHA9bihyKTtpZighcyYmIXAmJiFpJiZ0PnJ8fGkmJnUmJmMmJiFzJiYhcHx8byYmdSYmY3x8IWUmJmN8fCFhKXJldHVybiAxO2lmKCFvJiYhaSYmIXAmJnQ8cnx8cCYmZSYmYSYmIW8mJiFpfHxzJiZlJiZhfHwhdSYmYXx8IWMpcmV0dXJuLTF9cmV0dXJuIDB9fSwzODA1OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dHlwZW9mIHQ7cmV0dXJuIG51bGwhPXQmJigib2JqZWN0Ij09cnx8ImZ1bmN0aW9uIj09cil9fSwzODYyOnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5oYXModCkmJmRlbGV0ZSB0aGlzLl9fZGF0YV9fW3RdO3JldHVybiB0aGlzLnNpemUtPXI/MTowLHJ9fSwzOTM3OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXt2YXIgZT10Lmxlbmd0aDtmb3IodC5zb3J0KHIpO2UtLTspdFtlXT10W2VdLnZhbHVlO3JldHVybiB0fX0sNDIxODp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXR5cGVvZiB0O3JldHVybiJzdHJpbmciPT1yfHwibnVtYmVyIj09cnx8InN5bWJvbCI9PXJ8fCJib29sZWFuIj09cj8iX19wcm90b19fIiE9PXQ6bnVsbD09PXR9fSw0MjQ3OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9LTEsZT1BcnJheSh0LnNpemUpO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2VbKytyXT10fSkpLGV9fSw0MjQ4OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9LTEsbj1udWxsPT10PzA6dC5sZW5ndGg7KytlPG47KWlmKHIodFtlXSxlLHQpKXJldHVybiEwO3JldHVybiExfX0sNDMzNTp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0KHIoZSkpfX19LDQzOTQ6KHQscixlKT0+e3ZhciBuPWUoMjU1Miksbz1lKDM0Nik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgdHx8byh0KSYmIltvYmplY3QgU3ltYm9sXSI9PW4odCl9fSw0NTA5Oih0LHIsZSk9Pnt2YXIgbj1lKDI2NTEpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbih0aGlzLHQpLmhhcyh0KX19LDQ1Mjg6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe2Zvcih2YXIgZT0tMSxuPXIubGVuZ3RoLG89dC5sZW5ndGg7KytlPG47KXRbbytlXT1yW2VdO3JldHVybiB0fX0sNDY2NDoodCxyLGUpPT57dmFyIG49ZSg5NzcwKSxvPWUoMzM0NSksYT1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyx1PWk/ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/W106KHQ9T2JqZWN0KHQpLG4oaSh0KSwoZnVuY3Rpb24ocil7cmV0dXJuIGEuY2FsbCh0LHIpfSkpKX06bzt0LmV4cG9ydHM9dX0sNDczOToodCxyLGUpPT57dmFyIG49ZSg2MDI1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXyxlPW4ocix0KTtyZXR1cm4gZTwwP3ZvaWQgMDpyW2VdWzFdfX0sNDg0MDoodCxyLGUpPT57dmFyIG49Im9iamVjdCI9PXR5cGVvZiBlLmcmJmUuZyYmZS5nLk9iamVjdD09PU9iamVjdCYmZS5nO3QuZXhwb3J0cz1ufSw0ODk0Oih0LHIsZSk9Pnt2YXIgbj1lKDE4ODIpLG89ZSgyOTQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dCYmbyh0Lmxlbmd0aCkmJiFuKHQpfX0sNDkwMToodCxyLGUpPT57dmFyIG49ZSgyNTUyKSxvPWUoMjk0KSxhPWUoMzQ2KSxpPXt9O2lbIltvYmplY3QgRmxvYXQzMkFycmF5XSJdPWlbIltvYmplY3QgRmxvYXQ2NEFycmF5XSJdPWlbIltvYmplY3QgSW50OEFycmF5XSJdPWlbIltvYmplY3QgSW50MTZBcnJheV0iXT1pWyJbb2JqZWN0IEludDMyQXJyYXldIl09aVsiW29iamVjdCBVaW50OEFycmF5XSJdPWlbIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIl09aVsiW29iamVjdCBVaW50MTZBcnJheV0iXT1pWyJbb2JqZWN0IFVpbnQzMkFycmF5XSJdPSEwLGlbIltvYmplY3QgQXJndW1lbnRzXSJdPWlbIltvYmplY3QgQXJyYXldIl09aVsiW29iamVjdCBBcnJheUJ1ZmZlcl0iXT1pWyJbb2JqZWN0IEJvb2xlYW5dIl09aVsiW29iamVjdCBEYXRhVmlld10iXT1pWyJbb2JqZWN0IERhdGVdIl09aVsiW29iamVjdCBFcnJvcl0iXT1pWyJbb2JqZWN0IEZ1bmN0aW9uXSJdPWlbIltvYmplY3QgTWFwXSJdPWlbIltvYmplY3QgTnVtYmVyXSJdPWlbIltvYmplY3QgT2JqZWN0XSJdPWlbIltvYmplY3QgUmVnRXhwXSJdPWlbIltvYmplY3QgU2V0XSJdPWlbIltvYmplY3QgU3RyaW5nXSJdPWlbIltvYmplY3QgV2Vha01hcF0iXT0hMSx0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGEodCkmJm8odC5sZW5ndGgpJiYhIWlbbih0KV19fSw0OTMyOnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9LTEsbj1udWxsPT10PzA6dC5sZW5ndGgsbz1BcnJheShuKTsrK2U8bjspb1tlXT1yKHRbZV0sZSx0KTtyZXR1cm4gb319LDUwODM6KHQscixlKT0+e3ZhciBuPWUoMTg4Miksbz1lKDcyOTYpLGE9ZSgzODA1KSxpPWUoNzQ3MyksdT0vXlxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXF0kLyxzPUZ1bmN0aW9uLnByb3RvdHlwZSxjPU9iamVjdC5wcm90b3R5cGUscD1zLnRvU3RyaW5nLGY9Yy5oYXNPd25Qcm9wZXJ0eSx2PVJlZ0V4cCgiXiIrcC5jYWxsKGYpLnJlcGxhY2UoL1tcXF4kLiorPygpW1xde318XS9nLCJcXCQmIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXCgpfCBmb3IgLis/KD89XFxcXSkvZywiJDEuKj8iKSsiJCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4hKCFhKHQpfHxvKHQpKSYmKG4odCk/djp1KS50ZXN0KGkodCkpfX0sNTEyODoodCxyLGUpPT57dmFyIG49ZSg5MDkpLG89ZSg0ODk0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXt2YXIgZT0tMSxhPW8odCk/QXJyYXkodC5sZW5ndGgpOltdO3JldHVybiBuKHQsKGZ1bmN0aW9uKHQsbixvKXthWysrZV09cih0LG4sbyl9KSksYX19LDUyODg6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiB0PT09cnx8dCE9dCYmciE9cn19LDUzODk6KHQscixlKT0+e3ZhciBuPWUoMzY2Myksbz1lKDc5NzgpLGE9ZSgzNDg4KSxpPWUoNjQ0OSksdT1lKDU4Myk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6bnVsbD09dD9hOiJvYmplY3QiPT10eXBlb2YgdD9pKHQpP28odFswXSx0WzFdKTpuKHQpOnUodCl9fSw1NDgxOih0LHIsZSk9Pnt2YXIgbj1lKDkzMjUpWyJfX2NvcmUtanNfc2hhcmVkX18iXTt0LmV4cG9ydHM9bn0sNTUyNzp0PT57dmFyIHI9T2JqZWN0LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5jb25zdHJ1Y3RvcjtyZXR1cm4gdD09PSgiZnVuY3Rpb24iPT10eXBlb2YgZSYmZS5wcm90b3R5cGV8fHIpfX0sNTU4MDoodCxyLGUpPT57dmFyIG49ZSg2MTEwKShlKDkzMjUpLCJEYXRhVmlldyIpO3QuZXhwb3J0cz1ufSw1NzQ5Oih0LHIsZSk9Pnt2YXIgbj1lKDEwNDIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPXRoaXMuX19kYXRhX187cmV0dXJuIHRoaXMuc2l6ZSs9dGhpcy5oYXModCk/MDoxLGVbdF09biYmdm9pZCAwPT09cj8iX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyI6cix0aGlzfX0sNTg2MToodCxyLGUpPT57dmFyIG49ZSg1NTgwKSxvPWUoODIyMyksYT1lKDI4MDQpLGk9ZSg2NTQ1KSx1PWUoODMwMykscz1lKDI1NTIpLGM9ZSg3NDczKSxwPSJbb2JqZWN0IE1hcF0iLGY9IltvYmplY3QgUHJvbWlzZV0iLHY9IltvYmplY3QgU2V0XSIsbD0iW29iamVjdCBXZWFrTWFwXSIsaD0iW29iamVjdCBEYXRhVmlld10iLHg9YyhuKSxkPWMobykseT1jKGEpLGI9YyhpKSxfPWModSksZz1zOyhuJiZnKG5ldyBuKG5ldyBBcnJheUJ1ZmZlcigxKSkpIT1ofHxvJiZnKG5ldyBvKSE9cHx8YSYmZyhhLnJlc29sdmUoKSkhPWZ8fGkmJmcobmV3IGkpIT12fHx1JiZnKG5ldyB1KSE9bCkmJihnPWZ1bmN0aW9uKHQpe3ZhciByPXModCksZT0iW29iamVjdCBPYmplY3RdIj09cj90LmNvbnN0cnVjdG9yOnZvaWQgMCxuPWU/YyhlKToiIjtpZihuKXN3aXRjaChuKXtjYXNlIHg6cmV0dXJuIGg7Y2FzZSBkOnJldHVybiBwO2Nhc2UgeTpyZXR1cm4gZjtjYXNlIGI6cmV0dXJuIHY7Y2FzZSBfOnJldHVybiBsfXJldHVybiByfSksdC5leHBvcnRzPWd9LDU5MTE6KHQscixlKT0+e3ZhciBuPWUoODg1OSksbz1lKDQyNDgpLGE9ZSg5MjE5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUsaSx1LHMpe3ZhciBjPTEmZSxwPXQubGVuZ3RoLGY9ci5sZW5ndGg7aWYocCE9ZiYmIShjJiZmPnApKXJldHVybiExO3ZhciB2PXMuZ2V0KHQpLGw9cy5nZXQocik7aWYodiYmbClyZXR1cm4gdj09ciYmbD09dDt2YXIgaD0tMSx4PSEwLGQ9MiZlP25ldyBuOnZvaWQgMDtmb3Iocy5zZXQodCxyKSxzLnNldChyLHQpOysraDxwOyl7dmFyIHk9dFtoXSxiPXJbaF07aWYoaSl2YXIgXz1jP2koYix5LGgscix0LHMpOmkoeSxiLGgsdCxyLHMpO2lmKHZvaWQgMCE9PV8pe2lmKF8pY29udGludWU7eD0hMTticmVha31pZihkKXtpZighbyhyLChmdW5jdGlvbih0LHIpe2lmKCFhKGQscikmJih5PT09dHx8dSh5LHQsZSxpLHMpKSlyZXR1cm4gZC5wdXNoKHIpfSkpKXt4PSExO2JyZWFrfX1lbHNlIGlmKHkhPT1iJiYhdSh5LGIsZSxpLHMpKXt4PSExO2JyZWFrfX1yZXR1cm4gcy5kZWxldGUodCkscy5kZWxldGUocikseH19LDU5NTA6KHQscixlKT0+e3ZhciBuPWUoNjk1KSxvPWUoODk4NCksYT1lKDQ4OTQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gYSh0KT9uKHQpOm8odCl9fSw2MDA5Oih0LHIsZSk9Pnt0PWUubm1kKHQpO3ZhciBuPWUoNDg0MCksbz1yJiYhci5ub2RlVHlwZSYmcixhPW8mJnQmJiF0Lm5vZGVUeXBlJiZ0LGk9YSYmYS5leHBvcnRzPT09byYmbi5wcm9jZXNzLHU9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGEmJmEucmVxdWlyZSYmYS5yZXF1aXJlKCJ1dGlsIikudHlwZXN8fGkmJmkuYmluZGluZyYmaS5iaW5kaW5nKCJ1dGlsIil9Y2F0Y2godCl7fX0oKTt0LmV4cG9ydHM9dX0sNjAyNToodCxyLGUpPT57dmFyIG49ZSg1Mjg4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9dC5sZW5ndGg7ZS0tOylpZihuKHRbZV1bMF0scikpcmV0dXJuIGU7cmV0dXJuLTF9fSw2MTEwOih0LHIsZSk9Pnt2YXIgbj1lKDUwODMpLG89ZSgzOTIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPW8odCxyKTtyZXR1cm4gbihlKT9lOnZvaWQgMH19LDYxNTU6KHQscixlKT0+e3ZhciBuPWUoNDkzMiksbz1lKDc0MjIpLGE9ZSg1Mzg5KSxpPWUoNTEyOCksdT1lKDM5MzcpLHM9ZSg3MzAxKSxjPWUoMzcxNCkscD1lKDM0ODgpLGY9ZSg2NDQ5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUpe3I9ci5sZW5ndGg/bihyLChmdW5jdGlvbih0KXtyZXR1cm4gZih0KT9mdW5jdGlvbihyKXtyZXR1cm4gbyhyLDE9PT10Lmxlbmd0aD90WzBdOnQpfTp0fSkpOltwXTt2YXIgdj0tMTtyPW4ocixzKGEpKTt2YXIgbD1pKHQsKGZ1bmN0aW9uKHQsZSxvKXtyZXR1cm57Y3JpdGVyaWE6bihyLChmdW5jdGlvbihyKXtyZXR1cm4gcih0KX0pKSxpbmRleDorK3YsdmFsdWU6dH19KSk7cmV0dXJuIHUobCwoZnVuY3Rpb24odCxyKXtyZXR1cm4gYyh0LHIsZSl9KSl9fSw2NDQ5OnQ9Pnt2YXIgcj1BcnJheS5pc0FycmF5O3QuZXhwb3J0cz1yfSw2NTQ1Oih0LHIsZSk9Pnt2YXIgbj1lKDYxMTApKGUoOTMyNSksIlNldCIpO3QuZXhwb3J0cz1ufSw2NjQ5Oih0LHIsZSk9Pnt2YXIgbj1lKDMyMjEpKCk7dC5leHBvcnRzPW59LDY3MjE6KHQscixlKT0+e3ZhciBuPWUoMTA0Miksbz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgcj10aGlzLl9fZGF0YV9fO2lmKG4pe3ZhciBlPXJbdF07cmV0dXJuIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iPT09ZT92b2lkIDA6ZX1yZXR1cm4gby5jYWxsKHIsdCk/clt0XTp2b2lkIDB9fSw3MDY4Oih0LHIsZSk9Pnt2YXIgbj1lKDcyMTcpLG89ZSg1OTExKSxhPWUoMTk4NiksaT1lKDY4OSksdT1lKDU4NjEpLHM9ZSg2NDQ5KSxjPWUoMzY1NikscD1lKDcxNjcpLGY9IltvYmplY3QgQXJndW1lbnRzXSIsdj0iW29iamVjdCBBcnJheV0iLGw9IltvYmplY3QgT2JqZWN0XSIsaD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSx4LGQseSl7dmFyIGI9cyh0KSxfPXMociksZz1iP3Y6dSh0KSxqPV8/djp1KHIpLE89KGc9Zz09Zj9sOmcpPT1sLHc9KGo9aj09Zj9sOmopPT1sLG09Zz09ajtpZihtJiZjKHQpKXtpZighYyhyKSlyZXR1cm4hMTtiPSEwLE89ITF9aWYobSYmIU8pcmV0dXJuIHl8fCh5PW5ldyBuKSxifHxwKHQpP28odCxyLGUseCxkLHkpOmEodCxyLGcsZSx4LGQseSk7aWYoISgxJmUpKXt2YXIgQT1PJiZoLmNhbGwodCwiX193cmFwcGVkX18iKSxNPXcmJmguY2FsbChyLCJfX3dyYXBwZWRfXyIpO2lmKEF8fE0pe3ZhciB6PUE/dC52YWx1ZSgpOnQsUz1NP3IudmFsdWUoKTpyO3JldHVybiB5fHwoeT1uZXcgbiksZCh6LFMsZSx4LHkpfX1yZXR1cm4hIW0mJih5fHwoeT1uZXcgbiksaSh0LHIsZSx4LGQseSkpfX0sNzE2NzoodCxyLGUpPT57dmFyIG49ZSg0OTAxKSxvPWUoNzMwMSksYT1lKDYwMDkpLGk9YSYmYS5pc1R5cGVkQXJyYXksdT1pP28oaSk6bjt0LmV4cG9ydHM9dX0sNzE5Nzp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlW3RdPT09ciYmKHZvaWQgMCE9PXJ8fHQgaW4gT2JqZWN0KGUpKX19fSw3MjE3Oih0LHIsZSk9Pnt2YXIgbj1lKDc5KSxvPWUoMTQyMCksYT1lKDkzOCksaT1lKDM2MDUpLHU9ZSg5ODE3KSxzPWUoOTQ1KTtmdW5jdGlvbiBjKHQpe3ZhciByPXRoaXMuX19kYXRhX189bmV3IG4odCk7dGhpcy5zaXplPXIuc2l6ZX1jLnByb3RvdHlwZS5jbGVhcj1vLGMucHJvdG90eXBlLmRlbGV0ZT1hLGMucHJvdG90eXBlLmdldD1pLGMucHJvdG90eXBlLmhhcz11LGMucHJvdG90eXBlLnNldD1zLHQuZXhwb3J0cz1jfSw3MjM3OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBudWxsPT1yP3ZvaWQgMDpyW3RdfX19LDcyNTU6KHQscixlKT0+e3ZhciBuPWUoNzQyMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gbihyLHQpfX19LDcyOTY6KHQscixlKT0+e3ZhciBuLG89ZSg1NDgxKSxhPShuPS9bXi5dKyQvLmV4ZWMobyYmby5rZXlzJiZvLmtleXMuSUVfUFJPVE98fCIiKSk/IlN5bWJvbChzcmMpXzEuIituOiIiO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4hIWEmJmEgaW4gdH19LDczMDE6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIHQocil9fX0sNzQyMjoodCxyLGUpPT57dmFyIG49ZSgxNzY5KSxvPWUoNzc5Nyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPTAsYT0ocj1uKHIsdCkpLmxlbmd0aDtudWxsIT10JiZlPGE7KXQ9dFtvKHJbZSsrXSldO3JldHVybiBlJiZlPT1hP3Q6dm9pZCAwfX0sNzQ3Mzp0PT57dmFyIHI9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZihudWxsIT10KXt0cnl7cmV0dXJuIHIuY2FsbCh0KX1jYXRjaCh0KXt9dHJ5e3JldHVybiB0KyIifWNhdGNoKHQpe319cmV0dXJuIiJ9fSw3NTM0Oih0LHIsZSk9Pnt2YXIgbj1lKDI1NTIpLG89ZSgzNDYpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbyh0KSYmIltvYmplY3QgQXJndW1lbnRzXSI9PW4odCl9fSw3NTU2Oih0LHIsZSk9Pnt2YXIgbj1lKDE4NzMpLG89ZSg0OTMyKSxhPWUoNjQ0OSksaT1lKDQzOTQpLHU9bj9uLnByb3RvdHlwZTp2b2lkIDAscz11P3UudG9TdHJpbmc6dm9pZCAwO3QuZXhwb3J0cz1mdW5jdGlvbiB0KHIpe2lmKCJzdHJpbmciPT10eXBlb2YgcilyZXR1cm4gcjtpZihhKHIpKXJldHVybiBvKHIsdCkrIiI7aWYoaShyKSlyZXR1cm4gcz9zLmNhbGwocik6IiI7dmFyIGU9cisiIjtyZXR1cm4iMCI9PWUmJjEvcj09LTEvMD8iLTAiOmV9fSw3NjcwOih0LHIsZSk9Pnt2YXIgbj1lKDI2NTEpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgcj1uKHRoaXMsdCkuZGVsZXRlKHQpO3JldHVybiB0aGlzLnNpemUtPXI/MTowLHJ9fSw3Nzk3Oih0LHIsZSk9Pnt2YXIgbj1lKDQzOTQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZigic3RyaW5nIj09dHlwZW9mIHR8fG4odCkpcmV0dXJuIHQ7dmFyIHI9dCsiIjtyZXR1cm4iMCI9PXImJjEvdD09LTEvMD8iLTAiOnJ9fSw3ODI4Oih0LHIsZSk9Pnt2YXIgbj1lKDkzMjUpLlVpbnQ4QXJyYXk7dC5leHBvcnRzPW59LDc5Nzg6KHQscixlKT0+e3ZhciBuPWUoMjcwKSxvPWUoODE1NiksYT1lKDYzMSksaT1lKDg1ODYpLHU9ZSg3NTYpLHM9ZSg3MTk3KSxjPWUoNzc5Nyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIGkodCkmJnUocik/cyhjKHQpLHIpOmZ1bmN0aW9uKGUpe3ZhciBpPW8oZSx0KTtyZXR1cm4gdm9pZCAwPT09aSYmaT09PXI/YShlLHQpOm4ocixpLDMpfX19LDgwNzc6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiBudWxsIT10JiZyIGluIE9iamVjdCh0KX19LDgwOTY6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe2Zvcih2YXIgZT0tMSxuPUFycmF5KHQpOysrZTx0OyluW2VdPXIoZSk7cmV0dXJuIG59fSw4MTU2Oih0LHIsZSk9Pnt2YXIgbj1lKDc0MjIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSl7dmFyIG89bnVsbD09dD92b2lkIDA6bih0LHIpO3JldHVybiB2b2lkIDA9PT1vP2U6b319LDgyMjM6KHQscixlKT0+e3ZhciBuPWUoNjExMCkoZSg5MzI1KSwiTWFwIik7dC5leHBvcnRzPW59LDgzMDM6KHQscixlKT0+e3ZhciBuPWUoNjExMCkoZSg5MzI1KSwiV2Vha01hcCIpO3QuZXhwb3J0cz1ufSw4MzI5Oih0LHIsZSk9Pnt2YXIgbj1lKDQ4OTQpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiBmdW5jdGlvbihlLG8pe2lmKG51bGw9PWUpcmV0dXJuIGU7aWYoIW4oZSkpcmV0dXJuIHQoZSxvKTtmb3IodmFyIGE9ZS5sZW5ndGgsaT1yP2E6LTEsdT1PYmplY3QoZSk7KHI/aS0tOisraTxhKSYmITEhPT1vKHVbaV0saSx1KTspO3JldHVybiBlfX19LDg1ODY6KHQscixlKT0+e3ZhciBuPWUoNjQ0OSksbz1lKDQzOTQpLGE9L1wufFxbKD86W15bXF1dKnwoWyInXSkoPzooPyFcMSlbXlxcXXxcXC4pKj9cMSlcXS8saT0vXlx3KiQvO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe2lmKG4odCkpcmV0dXJuITE7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISgibnVtYmVyIiE9ZSYmInN5bWJvbCIhPWUmJiJib29sZWFuIiE9ZSYmbnVsbCE9dCYmIW8odCkpfHxpLnRlc3QodCl8fCFhLnRlc3QodCl8fG51bGwhPXImJnQgaW4gT2JqZWN0KHIpfX0sODY1NToodCxyLGUpPT57dmFyIG49ZSg2MDI1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG4odGhpcy5fX2RhdGFfXyx0KT4tMX19LDg4NTk6KHQscixlKT0+e3ZhciBuPWUoMzY2MSksbz1lKDEzODApLGE9ZSgxNDU5KTtmdW5jdGlvbiBpKHQpe3ZhciByPS0xLGU9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLl9fZGF0YV9fPW5ldyBuOysrcjxlOyl0aGlzLmFkZCh0W3JdKX1pLnByb3RvdHlwZS5hZGQ9aS5wcm90b3R5cGUucHVzaD1vLGkucHJvdG90eXBlLmhhcz1hLHQuZXhwb3J0cz1pfSw4OTg0Oih0LHIsZSk9Pnt2YXIgbj1lKDU1MjcpLG89ZSgzNjUwKSxhPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCFuKHQpKXJldHVybiBvKHQpO3ZhciByPVtdO2Zvcih2YXIgZSBpbiBPYmplY3QodCkpYS5jYWxsKHQsZSkmJiJjb25zdHJ1Y3RvciIhPWUmJnIucHVzaChlKTtyZXR1cm4gcn19LDkyMTk6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiB0LmhhcyhyKX19LDkzMjU6KHQscixlKT0+e3ZhciBuPWUoNDg0MCksbz0ib2JqZWN0Ij09dHlwZW9mIHNlbGYmJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLGE9bnx8b3x8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTt0LmV4cG9ydHM9YX0sOTMyNjoodCxyLGUpPT57dmFyIG49ZSgxNzY5KSxvPWUoMjQyOCksYT1lKDY0NDkpLGk9ZSgzNjEpLHU9ZSgyOTQpLHM9ZSg3Nzk3KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUpe2Zvcih2YXIgYz0tMSxwPShyPW4ocix0KSkubGVuZ3RoLGY9ITE7KytjPHA7KXt2YXIgdj1zKHJbY10pO2lmKCEoZj1udWxsIT10JiZlKHQsdikpKWJyZWFrO3Q9dFt2XX1yZXR1cm4gZnx8KytjIT1wP2Y6ISEocD1udWxsPT10PzA6dC5sZW5ndGgpJiZ1KHApJiZpKHYscCkmJihhKHQpfHxvKHQpKX19LDkzNTA6dD0+e3ZhciByPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByLmNhbGwodCl9fSw5NzcwOnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9LTEsbj1udWxsPT10PzA6dC5sZW5ndGgsbz0wLGE9W107KytlPG47KXt2YXIgaT10W2VdO3IoaSxlLHQpJiYoYVtvKytdPWkpfXJldHVybiBhfX0sOTgxNzp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh0KX19LDk5MzU6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiExfX19LHI9e307ZnVuY3Rpb24gZShuKXt2YXIgbz1yW25dO2lmKHZvaWQgMCE9PW8pcmV0dXJuIG8uZXhwb3J0czt2YXIgYT1yW25dPXtpZDpuLGxvYWRlZDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtuXShhLGEuZXhwb3J0cyxlKSxhLmxvYWRlZD0hMCxhLmV4cG9ydHN9ZS5uPXQ9Pnt2YXIgcj10JiZ0Ll9fZXNNb2R1bGU/KCk9PnQuZGVmYXVsdDooKT0+dDtyZXR1cm4gZS5kKHIse2E6cn0pLHJ9LGUuZD0odCxyKT0+e2Zvcih2YXIgbiBpbiByKWUubyhyLG4pJiYhZS5vKHQsbikmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4se2VudW1lcmFibGU6ITAsZ2V0OnJbbl19KX0sZS5nPWZ1bmN0aW9uKCl7aWYoIm9iamVjdCI9PXR5cGVvZiBnbG9iYWxUaGlzKXJldHVybiBnbG9iYWxUaGlzO3RyeXtyZXR1cm4gdGhpc3x8bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCl9Y2F0Y2godCl7aWYoIm9iamVjdCI9PXR5cGVvZiB3aW5kb3cpcmV0dXJuIHdpbmRvd319KCksZS5vPSh0LHIpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSxlLm5tZD10PT4odC5wYXRocz1bXSx0LmNoaWxkcmVufHwodC5jaGlsZHJlbj1bXSksdCk7dmFyIG49e307ZS5kKG4se0g6KCk9PnN9KTt2YXIgbz1lKDgxNTYpLGE9ZS5uKG8pLGk9ZSgyODc3KSx1PWUubihpKTtjb25zdCBzPSh7ZGF0YTp0LGFyZ3VtZW50czp7c29ydDpyLGRpcjplfX0pPT57bGV0IG49dC5pdGVtcy5ub2Rlcy5tYXAoKHI9Pih7Li4ucixtb250aENvbnN1bXB0aW9uOmModC50aGlzTW9udGhDb25zdW1wdGlvbixyLmlkKSxsYXN0TW9udGhDb25zdW1wdGlvbjpjKHQubGFzdE1vbnRoQ29uc3VtcHRpb24sci5pZCksdHdvTW9udGhzQWdvQ29uc3VtcHRpb246Yyh0LnR3b01vbnRoc0Fnb0NvbnN1bXB0aW9uLHIuaWQpLGV4cGlyaW5nSW5TaXhNb250aHM6Yyh0LmV4cGlyaW5nSW5TaXhNb250aHMsci5pZCksZXhwaXJpbmdJblR3ZWx2ZU1vbnRoczpjKHQuZXhwaXJpbmdJblR3ZWx2ZU1vbnRocyxyLmlkKSxzdG9ja09uT3JkZXI6TWF0aC5tYXgoYyh0LnN0b2NrT25PcmRlcixyLmlkKSwwKSxBTUMxMjpjKHQuQU1DVHdlbHZlLHIuaWQpLEFNQzI0OmModC5BTUNUd2VudHlGb3VyLHIuaWQpLFNPSDpyLnN0YXRzPy5zdG9ja09uSGFuZHx8MCxNT1M6ci5zdGF0cz8uYXZhaWxhYmxlTW9udGhzT2ZTdG9ja09uSGFuZHx8MCxBTUM6ci5zdGF0cz8uYXZlcmFnZU1vbnRobHlDb25zdW1wdGlvbnx8MH0pKSk7cmV0dXJue2RhdGE6e2l0ZW1zOntub2Rlczp1KCkobiwodD0+e2NvbnN0IGU9YSgpKHQscnx8Im5hbWUiKTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/ZS50b0xvY2FsZUxvd2VyQ2FzZSgpOmV9KSxlfHwiYXNjIil9fX19LGM9KHQscik9PnQuZmluZCgodD0+dC5pdGVtX2lkPT1yKSk/LnF1YW50aXR5fHwwO3ZhciBwPW4uSDtleHBvcnR7cCBhcyBjb252ZXJ0X2RhdGF9Ow==",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "expiringInTwelveMonths": {
            "type": "SQLQuery",
            "data": {
              "name": "expiringInTwelveMonths",
              "query_sqlite": "WITH \n    this_month AS (\n        SELECT date('now') AS this_month\n    ),\n    twelve_months AS (\n        SELECT date('now', '+12 months') AS twelve_months\n    )\nSELECT \n    stock_line.id,\n    i.item_id,\n    SUM(stock_line.available_number_of_packs) AS quantity\nFROM stock_line, twelve_months, this_month\nINNER JOIN item_link i ON i.id = stock_line.item_link_id\nWHERE stock_line.expiry_date < twelve_months AND stock_line.store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH \n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    ),\n    twelve_months AS (\n        SELECT date_trunc('month', CURRENT_DATE + interval '12 months') AS twelve_months\n    )\nSELECT \n    s.id,\n    i.item_id,\n    SUM(s.available_number_of_packs) AS quantity\nFROM stock_line s\nINNER JOIN item_link i ON i.id = s.item_link_id\nINNER JOIN this_month ON true\nINNER JOIN twelve_months ON true\nWHERE s.expiry_date < twelve_months AND s.store_id = $storeId\nGROUP BY s.id, i.item_id"
            }
          },
          "AMCTwentyFour": {
            "type": "SQLQuery",
            "data": {
              "name": "AMCTwentyFour",
              "query_sqlite": "WITH\n    twenty_four_months_ago AS (\n        SELECT date('now', 'start of month', '-24 month') AS twenty_four_months_ago\n    )\nSELECT\n    ROUND(SUM(quantity / 24), 1) AS quantity,    \n    item_id\nFROM consumption, twenty_four_months_ago\nWHERE date >= twenty_four_months_ago AND consumption.store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    twenty_four_months_ago AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '24 months') AS twenty_four_months_ago\n    )\nSELECT\n    ROUND(SUM(quantity / 24)::numeric, 1) AS quantity,\n    item_id\nFROM consumption, twenty_four_months_ago\nWHERE date >= twenty_four_months_ago AND consumption.store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "lastMonthConsumption": {
            "type": "SQLQuery",
            "data": {
              "name": "lastMonthConsumption",
              "query_sqlite": "WITH\n    this_month AS (\n        SELECT date('now', 'start of month') AS this_month\n    ),\n    last_month AS (\n        SELECT date('now', 'start of month', '-1 month') AS last_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month, last_month\nWHERE date >= last_month AND date < this_month AND store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    ),\n    last_month AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '1 month') AS last_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month, last_month\nWHERE date >= last_month AND date < this_month AND store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>\n  {% include \"style.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"report.stock-on-hand\", f=\"Stock on hand\")}}</td>\n        <td>{{t(k=\"report.stock-on-order\", f=\"Stock on order\")}}</td>\n        <td>{{t(k=\"report.amc-12-months\", f=\"AMC (12 months)\")}}</td>\n        <td>{{t(k=\"report.amc-24-months\", f=\"AMC (24 months)\")}}</td>\n        <td>{{t(k=\"report.amc-for-lookback\", f=\"AMC (lookback period)\")}}</td>\n        <td>{{t(k=\"report.months-cover\", f=\"Months cover\")}}</td>\n        <td>\n          {{t(k=\"report.usage-this-month\", f=\"Monthly usage (this month)\")}}\n        </td>\n        <td>\n          {{t(k=\"report.usage-last-month\", f=\"Monthly usage (last month)\")}}\n        </td>\n        <td>\n          {{t(k=\"report.usage-2-months-prior\", f=\"Monthly usage (2 months\n          ago)\")}}\n        </td>\n        <td>{{t(k=\"report.expiring-6-months\", f=\"Expiring in 6 months\")}}</td>\n        <td>{{t(k=\"report.expiring-12-months\", f=\"Expiring in 12 months\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for item in data.items.nodes %}\n      <tr>\n        <td>{{item.code}}</td>\n        <td>{{item.name}}</td>\n        <td>{{item.SOH | round( precision=1)}}</td>\n        <td>{{item.stockOnOrder}}</td>\n        <td>{{item.AMC12}}</td>\n        <td>{{item.AMC24}}</td>\n        <td>{{item.AMC | round( precision=1)}}</td>\n        <td>{{item.MOS | round( precision=1)}}</td>\n        <td>{{item.monthConsumption}}</td>\n        <td>{{item.lastMonthConsumption}}</td>\n        <td>{{item.twoMonthsAgoConsumption}}</td>\n        <td>{{item.expiringInSixMonths}}</td>\n        <td>{{item.expiringInTwelveMonths}}</td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          },
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query ItemUsage($storeId: String!, $itemCode: String, $itemName: String) {\n  items(\n    storeId: $storeId\n    filter: {\n      code: { like: $itemCode }\n      name: { like: $itemName }\n      isVisibleOrOnHand: true\n      isActive: true\n    }\n    page: { first: 5000 }\n  ) {\n    ... on ItemConnector {\n      nodes {\n        id\n        code\n        name\n        stats(storeId: $storeId) {\n          totalConsumption\n          availableMonthsOfStockOnHand\n          stockOnHand\n          averageMonthlyConsumption\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "twoMonthsAgoConsumption": {
            "type": "SQLQuery",
            "data": {
              "name": "twoMonthsAgoConsumption",
              "query_sqlite": "WITH\n    last_month AS (\n        SELECT date('now', 'start of month', '-1 month') AS last_month\n    ),\n    two_months_ago AS (\n        SELECT date('now', 'start of month', '-2 month') AS two_months_ago\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, two_months_ago, last_month\nWHERE date >= two_months_ago AND date < last_month AND store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    last_month AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '1 month') AS last_month\n    ),\n    two_months_ago AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '2 month') AS two_months_ago\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, two_months_ago, last_month\nWHERE date >= two_months_ago AND date < last_month AND store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "thisMonthConsumption": {
            "type": "SQLQuery",
            "data": {
              "name": "thisMonthConsumption",
              "query_sqlite": "WITH\n    this_month AS (\n        SELECT date('now', 'start of month') AS this_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month\nWHERE date >= this_month AND store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month\nWHERE date >= this_month AND store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "stockOnOrder": {
            "type": "SQLQuery",
            "data": {
              "name": "stockOnOrder",
              "query_sqlite": "SELECT \n    item.id as item_id,\n    SUM(rl.requested_quantity) - COALESCE(SUM(il.pack_size * il.number_of_packs), 0) AS quantity\nFROM item\nINNER JOIN item_link i ON item.id = i.item_id\nLEFT JOIN requisition_line rl ON rl.item_link_id = i.id\nLEFT JOIN requisition r ON r.id = rl.requisition_id\nLEFT JOIN invoice ON invoice.requisition_id = r.id\nLEFT JOIN invoice_line il on invoice.id = il.invoice_id AND il.item_link_id = i.id\nWHERE r.store_id = $storeId AND r.type = 'REQUEST' AND r.status = 'SENT'\nGROUP BY 1",
              "query_postgres": "SELECT \n    item.id as item_id,\n    SUM(rl.requested_quantity) - COALESCE(SUM(il.pack_size * il.number_of_packs), 0) AS quantity\nFROM item\nINNER JOIN item_link i ON item.id = i.item_id\nLEFT JOIN requisition_line rl ON rl.item_link_id = i.id\nLEFT JOIN requisition r ON r.id = rl.requisition_id\nLEFT JOIN invoice ON invoice.requisition_id = r.id\nLEFT JOIN invoice_line il on invoice.id = il.invoice_id AND il.item_link_id = i.id\nWHERE r.store_id = $storeId AND r.type = 'REQUEST' AND r.status = 'SENT'\nGROUP BY 1"
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container table tr:last-child td {\n  border-bottom: none;\n}\n\n.container > table > thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container > table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.status span {\n  padding: 2px;\n  border-radius: 10px;\n}\n"
          },
          "AMCTwelve": {
            "type": "SQLQuery",
            "data": {
              "name": "AMCTwelve",
              "query_sqlite": "WITH\n    twelve_months_ago AS (\n        SELECT date('now', 'start of month', '-12 month') AS twelve_months_ago\n    )\nSELECT\n    ROUND(SUM(quantity / 12), 1) AS quantity,\n    item_id\nFROM consumption, twelve_months_ago\nWHERE date >= twelve_months_ago AND consumption.store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    twelve_months_ago AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '12 months') AS twelve_months_ago\n    )\nSELECT\n    ROUND(SUM(quantity / 12)::numeric, 1) AS quantity,\n    item_id\nFROM consumption, twelve_months_ago\nWHERE date >= twelve_months_ago AND consumption.store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "expiringInSixMonths": {
            "type": "SQLQuery",
            "data": {
              "name": "expiringInSixMonths",
              "query_sqlite": "WITH \n    this_month AS (\n        SELECT date('now') AS this_month\n    ),\n    six_months AS (\n        SELECT date('now', '+6 months') AS six_months\n    )\nSELECT \n    stock_line.id,\n    i.item_id,\n    SUM(stock_line.available_number_of_packs) AS quantity\nFROM stock_line, six_months, this_month\nINNER JOIN item_link i ON i.id = stock_line.item_link_id\nWHERE stock_line.expiry_date < six_months AND stock_line.store_id = $storeId\nGROUP BY i.item_id\n",
              "query_postgres": "WITH \n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    ),\n    six_months AS (\n        SELECT date_trunc('month', CURRENT_DATE + interval '6 months') AS six_months\n    )\nSELECT \n    s.id,\n    i.item_id,\n    SUM(s.available_number_of_packs) AS quantity\nFROM stock_line s\nINNER JOIN item_link i ON i.id = s.item_link_id\nINNER JOIN this_month ON true\nINNER JOIN six_months ON true\nWHERE s.expiry_date < six_months AND s.store_id = $storeId\nGROUP BY s.id, i.item_id\n"
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "StockAndItems",
      "argument_schema_id": "for_report_item-usage_2_6_1_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.1",
      "code": "item-usage",
      "form_schema": {
        "id": "for_report_item-usage_2_6_1_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "enum": [
                    "asc",
                    "desc"
                  ],
                  "type": "string"
                },
                "itemCode": {
                  "description": "Item Code",
                  "type": "string"
                },
                "itemName": {
                  "description": "Item Name",
                  "type": "string"
                },
                "monthlyConsumptionLookBackPeriod": {
                  "description": "Average Monthly Consumption Look Back Period",
                  "type": "number"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "name",
                    "code",
                    "SOH",
                    "MOS",
                    "monthConsumption",
                    "lastMonthConsumption",
                    "twoMonthsAgoConsumption",
                    "expiringInSixMonths",
                    "expiringInTwelveMonths",
                    "stockOnOrder",
                    "AMC12",
                    "AMC24"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.item-code",
              "options": {
                "useDebounce": false
              },
              "scope": "#/properties/itemCode",
              "type": "Control"
            },
            {
              "label": "T#report.item-name",
              "scope": "#/properties/itemName",
              "type": "Control"
            },
            {
              "label": "T#report.amc-lookback",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25,
                "readonly": true
              },
              "scope": "#/properties/monthlyConsumptionLookBackPeriod",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "name",
                    "T#report.item-name"
                  ],
                  [
                    "code",
                    "T#label.code"
                  ],
                  [
                    "SOH",
                    "T#report.stock-on-hand"
                  ],
                  [
                    "MOS",
                    "T#report.months-cover"
                  ],
                  [
                    "monthConsumption",
                    "T#report.consumption-month"
                  ],
                  [
                    "lastMonthConsumption",
                    "T#report.consumption-last-month"
                  ],
                  [
                    "twoMonthsAgoConsumption",
                    "T#report.consumption-two-months-ago"
                  ],
                  [
                    "expiringInSixMonths",
                    "T#report.expiring-6-months"
                  ],
                  [
                    "expiringInTwelveMonths",
                    "T#report.expiring-12-months"
                  ],
                  [
                    "stockOnOrder",
                    "T#report.stock-on-order"
                  ],
                  [
                    "AMC12",
                    "T#report.amc-12-months"
                  ],
                  [
                    "AMC24",
                    "T#report.amc-24-months"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "options": {
                "show": [
                  [
                    "asc",
                    "T#report.ascending"
                  ],
                  [
                    "desc",
                    "T#report.descending"
                  ]
                ]
              },
              "scope": "#/properties/dir",
              "type": "Control"
            }
          ],
          "type": "VerticalLayout"
        }
      }
    },
    {
      "id": "stock-detail_2_6_1_false",
      "name": "Stock Detail",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql"
          ],
          "convert_data": "dmFyIGU9ezM3ODplPT57Y29uc3QgdD1lPT57bGV0IHI9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG8peyIiIT09ZVtvXSYmdm9pZCAwIT09ZVtvXSYmbnVsbCE9PWVbb10mJigib2JqZWN0Ij09dHlwZW9mIGVbb10/cltvXT10KGVbb10pOnJbb109ZVtvXSl9KSkscn0scj0oZSx0KT0+KHQrPSIiKS5zcGxpdCgiLiIpLnJlZHVjZSgoKGUsdCk9PmUmJmVbdF0pLGUpO2UuZXhwb3J0cz17Y2xlYW5VcE9iamVjdDp0LGNsZWFuVXBOb2RlczplPT57bGV0IHI9W107cmV0dXJuIGUuZm9yRWFjaCgoZT0+ezAhPU9iamVjdC5rZXlzKGUpLmxlbmd0aCYmci5wdXNoKHQoZSkpfSkpLHJ9LGdldE5lc3RlZFZhbHVlOnIsc29ydE5vZGVzOihlLHQsbyk9Pih0JiZlLnNvcnQoKChlLG4pPT57bGV0IHM9cihlLHQpOyJzdHJpbmciPT10eXBlb2YgcyYmKHM9cy50b0xvY2FsZUxvd2VyQ2FzZSgpKTtsZXQgYT1yKG4sdCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBhJiYoYT1hLnRvTG9jYWxlTG93ZXJDYXNlKCkpLG51bGw9PXMmJm51bGw9PWE/MDpudWxsPT1zPyJhc2MiPT09bz8tMToxOm51bGw9PWE/ImFzYyI9PT1vPzE6LTE6cz09PWE/MDoiYXNjIj09PW8/cz5hPzE6LTE6czxhPzE6LTF9KSksZSl9fX0sdD17fTtmdW5jdGlvbiByKG8pe3ZhciBuPXRbb107aWYodm9pZCAwIT09bilyZXR1cm4gbi5leHBvcnRzO3ZhciBzPXRbb109e2V4cG9ydHM6e319O3JldHVybiBlW29dKHMscy5leHBvcnRzLHIpLHMuZXhwb3J0c31yLmQ9KGUsdCk9Pntmb3IodmFyIG8gaW4gdClyLm8odCxvKSYmIXIubyhlLG8pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLHtlbnVtZXJhYmxlOiEwLGdldDp0W29dfSl9LHIubz0oZSx0KT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCk7dmFyIG89e307ci5kKG8se0g6KCk9PmF9KTt2YXIgbj1yKDM3OCk7Y29uc3Qgcz0oZSx0LHIpPT57bGV0IG89KDAsbi5jbGVhblVwTm9kZXMpKGUpO3JldHVybigwLG4uc29ydE5vZGVzKShvLHQscil9O2Z1bmN0aW9uIGEoZSl7cmV0dXJuIGUuZGF0YS5zdG9ja0xpbmVzLm5vZGVzPXMoZS5kYXRhLnN0b2NrTGluZXMubm9kZXMsZT8uYXJndW1lbnRzPy5zb3J0Pz8iaXRlbS5uYW1lIixlPy5hcmd1bWVudHM/LmRpcj8/ImFzYyIpLGV9dmFyIGM9by5IO2V4cG9ydHtjIGFzIGNvbnZlcnRfZGF0YX07",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query StockDetail($storeId: String, $itemCodeOrName: String) {\n  stockLines(\n    storeId: $storeId\n    page: { first: 5000 }\n    filter: {\n      itemCodeOrName: { like: $itemCodeOrName }\n      hasPacksInStore: true\n      isActive: true\n    }\n  ) {\n    ... on StockLineConnector {\n      nodes {\n        batch\n        expiryDate\n        id\n        packSize\n        storeId\n        totalNumberOfPacks\n        supplierName\n        location {\n          code\n        }\n        item {\n          code\n          name\n          unitName\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container table tr:last-child td {\n  border-bottom: none;\n}\n\n.container>table>thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container>table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.status span {\n  padding: 2px;\n  border-radius: 10px;\n}\n"
          },
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>\n  {% include \"style.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"label.batch\", f=\"Batch\")}}</td>\n        <td>{{t(k=\"label.expiry\", f=\"Expiry\")}}</td>\n        <td>{{t(k=\"label.location\", f=\"Location\")}}</td>\n        <td>{{t(k=\"label.unit\", f=\"Unit\")}}</td>\n        <td>{{t(k=\"report.pack-size\", f=\"Pack size\")}}</td>\n        <td>{{t(k=\"report.pack-quantity\", f=\"Pack quantity\")}}</td>\n        <td>{{t(k=\"label.soh\", f=\"SOH\")}}</td>\n        <td>{{t(k=\"label.supplier\", f=\"Supplier\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for stockLine in data.stockLines.nodes %}\n\n      <tr>\n        <td>{{stockLine.item.code}}</td>\n        <td>{{stockLine.item.name}}</td>\n        <td>{{stockLine.batch | default(value='')}}</td>\n        <td>\n          {%if stockLine.expiryDate %}\n          {{stockLine.expiryDate | date(format=\"%d/%m/%Y\")}}\n          {% else %}\n          \n          {% endif %}\n        </td>\n        <td>{{stockLine.location.code | default(value='')}}</td>\n        <td>{{stockLine.item.unitName | default(value='')}}</td>\n        <td>{{stockLine.packSize }}</td>\n        <td>{{stockLine.totalNumberOfPacks}}</td>\n        <td>{{\n          stockLine.totalNumberOfPacks * stockLine.packSize | round( precision=1)  \n        }}</td>\n        <td>{{stockLine.supplierName | default(value='')}}</td>    \n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "StockAndItems",
      "argument_schema_id": "for_report_stock-detail_2_6_1_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.1",
      "code": "stock-detail",
      "form_schema": {
        "id": "for_report_stock-detail_2_6_1_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "enum": [
                    "asc",
                    "desc"
                  ],
                  "type": "string"
                },
                "itemCodeOrName": {
                  "description": "Item Code or Name",
                  "type": "string"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "batch",
                    "item.name",
                    "item.code",
                    "expiryDate",
                    "location.code",
                    "item.unitName",
                    "packSize",
                    "totalNumberOfPacks"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.item-code-or-name",
              "options": {
                "useDebounce": false
              },
              "scope": "#/properties/itemCodeOrName",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "item.name",
                    "T#report.item-name"
                  ],
                  [
                    "batch",
                    "T#label.batch"
                  ],
                  [
                    "item.code",
                    "T#label.code"
                  ],
                  [
                    "expiryDate",
                    "T#report.expiry-date"
                  ],
                  [
                    "location.code",
                    "T#label.location"
                  ],
                  [
                    "item.unitName",
                    "T#label.unit"
                  ],
                  [
                    "packSize",
                    "T#label.pack-size"
                  ],
                  [
                    "totalNumberOfPacks",
                    "T#label.num-packs-total"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "options": {
                "show": [
                  [
                    "asc",
                    "T#report.ascending"
                  ],
                  [
                    "desc",
                    "T#report.descending"
                  ]
                ]
              },
              "scope": "#/properties/dir",
              "type": "Control"
            }
          ],
          "type": "VerticalLayout"
        }
      }
    },
    {
      "id": "encounters_2_6_1_false",
      "name": "Pending Encounters",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "encountersQuery.graphql"
          ],
          "convert_data": "dmFyIGU9ezQxMzplPT57ZnVuY3Rpb24gdChlKXtyZXR1cm4gZT43PyJMVEZVIjplPjA/IkxBVEUiOiIifWUuZXhwb3J0cz17YXBwbHlEYXlzTGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXAoKGU9Pntjb25zdCByPW5ldyBEYXRlKGUuc3RhcnREYXRldGltZSksbz1NYXRoLmZsb29yKChuZXcgRGF0ZS1yKS84NjRlNSksbj1vPjA/bzowLGE9dChuKTtyZXR1cm57Li4uZSxkYXlzTGF0ZTpuLHN0YXR1czphfX0pKX0sZ2V0U3RhdHVzOnR9fSw4OTg6KGUsdCxyKT0+e3ZhciBvPXIoNDEzKTsoZT1yLmhtZChlKSkuZXhwb3J0cz17Y29udmVydF9kYXRhOmZ1bmN0aW9uKCl7Y29uc3QgZT1KU09OLnBhcnNlKEhvc3QuaW5wdXRTdHJpbmcoKSk7ZS5kYXRhLmVuY291bnRlcnMubm9kZXM9KDAsby5hcHBseURheXNMYXRlKShlLmRhdGEuZW5jb3VudGVycy5ub2RlcyksSG9zdC5vdXRwdXRTdHJpbmcoSlNPTi5zdHJpbmdpZnkoZSkpfX19fSx0PXt9O2Z1bmN0aW9uIHIobyl7dmFyIG49dFtvXTtpZih2b2lkIDAhPT1uKXJldHVybiBuLmV4cG9ydHM7dmFyIGE9dFtvXT17aWQ6byxsb2FkZWQ6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbb10oYSxhLmV4cG9ydHMsciksYS5sb2FkZWQ9ITAsYS5leHBvcnRzfXIubj1lPT57dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlPygpPT5lLmRlZmF1bHQ6KCk9PmU7cmV0dXJuIHIuZCh0LHthOnR9KSx0fSxyLmQ9KGUsdCk9Pntmb3IodmFyIG8gaW4gdClyLm8odCxvKSYmIXIubyhlLG8pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLHtlbnVtZXJhYmxlOiEwLGdldDp0W29dfSl9LHIuaG1kPWU9PigoZT1PYmplY3QuY3JlYXRlKGUpKS5jaGlsZHJlbnx8KGUuY2hpbGRyZW49W10pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJleHBvcnRzIix7ZW51bWVyYWJsZTohMCxzZXQ6KCk9Pnt0aHJvdyBuZXcgRXJyb3IoIkVTIE1vZHVsZXMgbWF5IG5vdCBhc3NpZ24gbW9kdWxlLmV4cG9ydHMgb3IgZXhwb3J0cy4qLCBVc2UgRVNNIGV4cG9ydCBzeW50YXgsIGluc3RlYWQ6ICIrZS5pZCl9fSksZSksci5vPShlLHQpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KSxyKDg5OCk7",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "encountersQuery.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query encountersQuery(\n  $storeId: String!\n  $programId: String!\n  $after: DateTime\n  $before: DateTime\n) {\n  encounters(\n    storeId: $storeId\n    filter: {\n      programId: { equalTo: $programId }\n      status: { equalTo: \"PENDING\" }\n      startDatetime: { afterOrEqualTo: $after, beforeOrEqualTo: $before }\n    }\n    sort: { key: \"startDatetime\", desc: false }\n  ) {\n    ... on EncounterConnector {\n      nodes {\n        ... on EncounterNode {\n          id\n          startDatetime\n          type\n          patient {\n            firstName\n            lastName\n            dateOfBirth\n            phone\n            nextOfKinName\n          }\n          programEnrolment {\n            programEnrolmentId\n          }\n          previousEncounter {\n            startDatetime\n          }\n        }\n      }\n    }\n  }\n  store(id: $storeId) {\n    ... on StoreNode {\n      code\n      storeName\n      logo\n      name(storeId: $storeId) {\n        ... on NameNode {\n          address1\n          address2\n          chargeCode\n          code\n          comment\n          country\n          email\n          name\n          phone\n          website\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "{% macro formatDate(datetime) %} {% if datetime %}{{ datetime |\ndate(format=\"%d/%m/%Y\", timezone=arguments.timezone) }}{% endif %} {% endmacro input %}\n\n<style>\n  {% include \"encounters.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"report.program-id\", f=\"Program ID\")}}</td>\n        <td>{{t(k=\"label.first-name\", f=\"First Name\")}}</td>\n        <td>{{t(k=\"label.last-name\", f=\"Last Name\")}}</td>\n        <td>{{t(k=\"label.date-of-birth\", f=\"Date of birth\")}}</td>\n        <td>{{t(k=\"label.next-of-kin\", f=\"Next of kin\")}}</td>\n        <td>{{t(k=\"label.phone\", f=\"Phone\")}}</td>\n        <td>\n          {{t(k=\"report.last-encounter-date\", f=\"Last appointment date\")}}\n        </td>\n        <td>{{t(k=\"report.encounter-date\", f=\"Appointment date\")}}</td>\n        <td>{{t(k=\"report.days-overdue\", f=\"Days overdue\")}}</td>\n        <td>{{t(k=\"label.status\", f=\"Status\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for encounter in data.encounters.nodes %}\n      <tr>\n        <td>{{encounter.programEnrolment.programEnrolmentId}}</td>\n        <td>{{encounter.patient.firstName}}</td>\n        <td>{{encounter.patient.lastName}}</td>\n        <td>{{self::formatDate(datetime=encounter.patient.dateOfBirth)}}</td>\n        <td>{{encounter.patient.nextOfKinName}}</td>\n        <td>{{encounter.patient.phone}}</td>\n        {% if encounter.previousEncounter %}\n        <td>\n          {{self::formatDate(datetime=encounter.previousEncounter.startDatetime)}}\n        </td>\n        {% else %}\n        <td></td>\n        {% endif %}\n        <td>{{self::formatDate(datetime=encounter.startDatetime)}}</td>\n        <td>{{encounter.daysLate}}</td>\n\n        {% if encounter.status == \"LTFU\" %}\n        <td>{{t(k=\"report.lost-to-follow-up\", f=\"Lost to follow-up\")}}</td>\n        {% elif encounter.status == \"LATE\" %}\n        <td>{{t(k=\"report.late\", f=\"Late\")}}</td>\n        {% else %}\n        <td>{{t(k=\"report.planned\", f=\"Planned\")}}</td>\n        {% endif %}\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          },
          "encounters.css": {
            "type": "Resource",
            "data": "@page {\n    margin: 0;\n    size: A4 landscape;\n  }\n  \n  .container {\n    margin: auto;\n    padding: 10px;\n    font-size: 14px;\n    font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n    color: #555;\n  }\n  \n  .container table {\n    width: 100%;\n    font-size: inherit;\n    font-family: inherit;\n    text-align: left;\n    margin-top: 10;\n    margin-bottom: 15;\n    border-collapse: separate;\n  }\n  \n  .container table td {\n    padding: 10px;\n    vertical-align: top;\n    border-top: 1px solid rgb(164, 163, 163);\n  }\n  \n  .container table tr:last-child td {\n    border-bottom: none;\n  }\n  \n  .container>table>thead {\n    position: -webkit-sticky;\n    position: sticky;\n    top: 0;\n    background-color: #f1f1f1;\n  }\n  \n  .container,\n  body,\n  .container>table {\n    margin-top: 0px;\n    padding-top: 0px;\n  }\n  \n  .container table tr.heading td {\n    font-weight: bold;\n    margin-bottom: 15px;\n  }\n  \n"
          }
        }
      },
      "context": "DISPENSARY",
      "sub_context": "Encounters",
      "argument_schema_id": "for_report_encounters_2_6_1_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.1",
      "code": "encounters",
      "form_schema": {
        "id": "for_report_encounters_2_6_1_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/Filters"
            }
          ],
          "definitions": {
            "Filters": {
              "properties": {
                "after": {
                  "description": "From date",
                  "format": "date-time",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "before": {
                  "description": "To date",
                  "format": "date-time",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "programId": {
                  "description": "Program ID",
                  "type": "string"
                }
              },
              "required": [
                "programId"
              ]
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#label.program",
              "scope": "#/properties/programId",
              "type": "PatientProgramSearch"
            },
            {
              "label": "T#label.from-date",
              "options": {
                "dateOnly": true
              },
              "scope": "#/properties/after",
              "type": "Control"
            },
            {
              "label": "T#label.to-date",
              "options": {
                "dateAsEndOfDay": true,
                "dateOnly": true
              },
              "scope": "#/properties/before",
              "type": "Control"
            }
          ],
          "type": "VerticalLayout"
        }
      }
    }
  ]
}