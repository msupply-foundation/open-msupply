{
  "reports": [
    {
      "id": "expiring-items_2_6_3_false",
      "name": "Expiring Items",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql"
          ],
          "convert_data": "dmFyIHQ9ezM3ODp0PT57Y29uc3QgZT0odCxlKT0+KGUrPSIiKS5zcGxpdCgiLiIpLnJlZHVjZSgodCxlKT0+dCYmdFtlXSx0KTt0LmV4cG9ydHM9e2dldE5lc3RlZFZhbHVlOmUsc29ydE5vZGVzOih0LHIsbyk9PihyJiZ0LnNvcnQoKHQsbik9PntsZXQgYT1lKHQscik7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1hLnRvTG9jYWxlTG93ZXJDYXNlKCkpO2xldCBzPWUobixyKTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHMmJihzPXMudG9Mb2NhbGVMb3dlckNhc2UoKSksbnVsbD09YSYmbnVsbD09cz8wOm51bGw9PWE/ImFzYyI9PT1vPy0xOjE6bnVsbD09cz8iYXNjIj09PW8/MTotMTphPT09cz8wOiJhc2MiPT09bz9hPnM/MTotMTphPHM/MTotMX0pLHQpfX19LGU9e307ZnVuY3Rpb24gcihvKXt2YXIgbj1lW29dO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG4uZXhwb3J0czt2YXIgYT1lW29dPXtleHBvcnRzOnt9fTtyZXR1cm4gdFtvXShhLGEuZXhwb3J0cyxyKSxhLmV4cG9ydHN9ci5kPSh0LGUpPT57Zm9yKHZhciBvIGluIGUpci5vKGUsbykmJiFyLm8odCxvKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbyx7ZW51bWVyYWJsZTohMCxnZXQ6ZVtvXX0pfSxyLm89KHQsZSk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpO3ZhciBvPXIoMzc4KTtmdW5jdGlvbiBuKHQpe3ZhciBlLHIsbjtyZXR1cm4gdC5kYXRhLnN0b2NrTGluZXMubm9kZXM9KGU9dC5kYXRhLnN0b2NrTGluZXMubm9kZXMscj10Py5hcmd1bWVudHM/LnNvcnQ/PyJpdGVtLm5hbWUiLG49dD8uYXJndW1lbnRzPy5kaXI/PyJhc2MiLGUuZm9yRWFjaCh0PT57aWYoMD09T2JqZWN0LmtleXModCkubGVuZ3RoKXJldHVybjtjb25zdCBlPSh0PT57bGV0IGU7aWYodCl7bGV0IHI9RGF0ZS5ub3coKTtlPShuZXcgRGF0ZSh0KS1yKS8xZTMvNjAvNjAvMjR9cmV0dXJuIGV9KSh0Py5leHBpcnlEYXRlKSxyPSgodCxlKT0+e2xldCByLG89ZT8uaXRlbT8uc3RhdHM/LmF2ZXJhZ2VNb250aGx5Q29uc3VtcHRpb24sbj1lPy50b3RhbE51bWJlck9mUGFja3MqZT8ucGFja1NpemU7aWYodCYmbyYmbiYmdD49MCl7Y29uc3QgZT1NYXRoLnJvdW5kKHQqKG8vMzAuNDM3NSkpO3I9TWF0aC5taW4oZSxuPz9lKX1yZXR1cm4gcn0pKGUsdCk7ciYmKHQuZXhwZWN0ZWRVc2FnZT1yKTtjb25zdCBvPSgodCxlLHIsbyk9PntsZXQgbjtpZih0JiZlJiZvKXtjb25zdCBhPXQqZTtyJiYobj1vPj0wP01hdGgucm91bmQoYS1yKihvLzMwLjQzNzUpKTpNYXRoLnJvdW5kKGEpKSxyfHxvPD0wJiYobj1NYXRoLnJvdW5kKGEpKX1yZXR1cm4gbjwwPzA6bn0pKHQ/LnBhY2tTaXplLHQ/LnRvdGFsTnVtYmVyT2ZQYWNrcyx0Py5pdGVtPy5zdGF0cz8uYXZlcmFnZU1vbnRobHlDb25zdW1wdGlvbixlKTtvJiYodC5zdG9ja0F0Umlzaz1vKSx0LmRheXNVbnRpbEV4cGlyZWQ9KHQ9PntsZXQgZTtyZXR1cm4gdCYmKGU9TWF0aC5yb3VuZCh0KSksZX0pKGUpLHQuYXZlcmFnZU1vbnRobHlDb25zdW1wdGlvbj1NYXRoLnJvdW5kKDEwKih0Py5pdGVtPy5zdGF0cz8uYXZlcmFnZU1vbnRobHlDb25zdW1wdGlvbj8/MCkpLzEwfSksKDAsby5zb3J0Tm9kZXMpKGUscixuKSksdH1leHBvcnR7biBhcyBjb252ZXJ0X2RhdGF9Ow==",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container > table > thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container>table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.expiry-date span {\n  padding: 2px;\n  border-radius: 10px;\n}\n\n.container table td.expiry-date span.expired::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(245, 5, 1, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.expired {\n  background-color: rgba(245, 5, 1, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}\n\n.container table td.expiry-date span.soon::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(248, 154, 1, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.soon {\n  background-color: rgba(248, 154, 1, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}\n\n.container table td.expiry-date span.all-good::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(51, 169, 1, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.all-good {\n  background-color: rgba(51, 169, 1, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}\n\n.container table span.na::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(143, 144, 166, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.na {\n  background-color: rgba(143, 144, 166, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}"
          },
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>{% include \"style.css\" %}</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"report.expiring-in-days\", f=\"Expiring in (days)\")}}</td>\n        <td>{{t(k=\"label.batch\", f=\"Batch\")}}</td>\n        <td>{{t(k=\"report.expiry-date\", f=\"Expiry date\")}}</td>\n        <td>{{t(k=\"report.stock-on-hand\", f=\"Stock on hand\")}}</td>\n        <td>{{t(k=\"report.average-monthly-consumption\", f=\"Average monthly consumption\")}}</td>\n        <td>{{t(k=\"report.expected-usage\", f=\"Expected usage\")}}</td>\n        <td>{{t(k=\"report.stock-at-risk\", f=\"Stock at risk\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for stockLine in data.stockLines.nodes %}\n      <tr>\n        <td>{{stockLine.item.code}}</td>\n        <td>{{stockLine.item.name}}</td>\n        <td class=\"expiry-date\">\n          {% if stockLine.daysUntilExpired %}\n            {% if stockLine.daysUntilExpired <= 0 %}\n              <span class=\"expired\">{{t(k=\"report.expired\", f=\"Expired\")}}</span>\n              {% elif stockLine.daysUntilExpired <= arguments.monthsItemsExpire *\n                (365.25 / 12.0) %}\n              <span class=\"soon\">{{ stockLine.daysUntilExpired }}</span>\n            {% else %}\n                <span class=\"all-good\">{{ stockLine.daysUntilExpired }}</span>\n            {% endif %}\n          {% else %}\n            <span class=\"na\">N/A</span>\n          {% endif %}\n        </td>\n        <td>{{stockLine.batch | default(value='')}}</td>\n        <td>\n          {% if stockLine.expiryDate %}\n            {{ stockLine.expiryDate | date(format=\"%d/%m/%Y\") }}\n          {% else %}\n            N/A\n          {% endif %}\n        </td>\n        <td>{{stockLine.totalNumberOfPacks * stockLine.packSize | round( precision=1)\n          }}</td>\n        <td>{{stockLine.averageMonthlyConsumption }}</td>\n        <td>\n          {% if stockLine.expectedUsage %}\n              {{ stockLine.expectedUsage | round( precision=1) }}\n          {% else %}\n            N/A\n          {% endif %}\n        </td>\n        <td>\n          {% if stockLine.stockAtRisk %}\n            {{ stockLine.stockAtRisk | round( precision=1) }}\n          {% else %}\n            N/A\n          {% endif %}\n        </td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>"
            }
          },
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query ExpiringItems(\n  $storeId: String\n  $itemCodeOrName: String\n  $expiryDate: String\n) {\n  stockLines(\n    storeId: $storeId\n    filter: {\n      itemCodeOrName: { like: $itemCodeOrName }\n      expiryDate: { beforeOrEqualTo: $expiryDate }\n      hasPacksInStore: true\n      isActive: true\n    }\n    page: { first: 5000 }\n  ) {\n    ... on StockLineConnector {\n      nodes {\n        batch\n        expiryDate\n        id\n        packSize\n        storeId\n        totalNumberOfPacks\n        supplierName\n        location {\n          code\n        }\n        item {\n          code\n          name\n          unitName\n          stats(storeId: $storeId) {\n            averageMonthlyConsumption\n          }\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "Expiring",
      "argument_schema_id": "for_report_expiring-items_2_6_3_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.3",
      "code": "expiring-items",
      "form_schema": {
        "id": "for_report_expiring-items_2_6_3_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "format": "SortToggle",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "expiryDate": {
                  "description": "T#label.expiry-date",
                  "format": "date",
                  "type": "string"
                },
                "itemCodeOrName": {
                  "description": "Item Code or Name",
                  "type": "string"
                },
                "monthlyConsumptionLookBackPeriod": {
                  "description": "Average Monthly Consumption Look Back Period",
                  "readOnly": true,
                  "type": "number"
                },
                "monthsItemsExpire": {
                  "description": "Expiring item period",
                  "readOnly": true,
                  "type": "number"
                },
                "monthsOverstock": {
                  "description": "Months Overstock",
                  "readOnly": true,
                  "type": "number"
                },
                "monthsUnderstock": {
                  "description": "Months Understock",
                  "readOnly": true,
                  "type": "number"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "item.name",
                    "item.code",
                    "expiryDate",
                    "daysUntilExpired",
                    "stockAtRisk",
                    "expectedUsage"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.expiry-date",
              "options": {
                "dateOnly": true
              },
              "scope": "#/properties/expiryDate",
              "type": "Control"
            },
            {
              "label": "T#report.item-code-or-name",
              "options": {
                "flexBasis": "90%",
                "useDebounce": false
              },
              "scope": "#/properties/itemCodeOrName",
              "type": "Control"
            },
            {
              "label": "T#report.amc-lookback",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthlyConsumptionLookBackPeriod",
              "type": "Control"
            },
            {
              "label": "T#label.max-months-of-stock",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthsOverstock",
              "type": "Control"
            },
            {
              "label": "T#label.min-months-of-stock",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthsUnderstock",
              "type": "Control"
            },
            {
              "label": "T#label.expiring-item-period",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthsItemsExpire",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "item.name",
                    "T#report.item-name"
                  ],
                  [
                    "item.code",
                    "T#label.code"
                  ],
                  [
                    "expiryDate",
                    "T#report.expiry-date"
                  ],
                  [
                    "daysUntilExpired",
                    "T#report.days-until-expired"
                  ],
                  [
                    "stockAtRisk",
                    "T#report.stock-at-risk"
                  ],
                  [
                    "expectedUsage",
                    "T#report.expected-usage"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "scope": "#/properties/dir",
              "type": "SortToggle"
            }
          ],
          "type": "VerticalLayout"
        }
      },
      "excel_template_buffer": null
    },
    {
      "id": "expiring-items_2_10_1_false",
      "name": "Expiring Items",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql"
          ],
          "convert_data": "dmFyIHQ9ezM3ODp0PT57Y29uc3QgZT0odCxlKT0+KGUrPSIiKS5zcGxpdCgiLiIpLnJlZHVjZSgodCxlKT0+dCYmdFtlXSx0KTt0LmV4cG9ydHM9e2dldE5lc3RlZFZhbHVlOmUsc29ydE5vZGVzOih0LHIsbyk9PihyJiZ0LnNvcnQoKHQsbik9PntsZXQgYT1lKHQscik7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1hLnRvTG9jYWxlTG93ZXJDYXNlKCkpO2xldCBzPWUobixyKTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHMmJihzPXMudG9Mb2NhbGVMb3dlckNhc2UoKSksbnVsbD09YSYmbnVsbD09cz8wOm51bGw9PWE/ImFzYyI9PT1vPy0xOjE6bnVsbD09cz8iYXNjIj09PW8/MTotMTphPT09cz8wOiJhc2MiPT09bz9hPnM/MTotMTphPHM/MTotMX0pLHQpfX19LGU9e307ZnVuY3Rpb24gcihvKXt2YXIgbj1lW29dO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG4uZXhwb3J0czt2YXIgYT1lW29dPXtleHBvcnRzOnt9fTtyZXR1cm4gdFtvXShhLGEuZXhwb3J0cyxyKSxhLmV4cG9ydHN9ci5kPSh0LGUpPT57Zm9yKHZhciBvIGluIGUpci5vKGUsbykmJiFyLm8odCxvKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbyx7ZW51bWVyYWJsZTohMCxnZXQ6ZVtvXX0pfSxyLm89KHQsZSk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpO3ZhciBvPXIoMzc4KTtmdW5jdGlvbiBuKHQpe3ZhciBlLHIsbjtyZXR1cm4gdC5kYXRhLnN0b2NrTGluZXMubm9kZXM9KGU9dC5kYXRhLnN0b2NrTGluZXMubm9kZXMscj10Py5hcmd1bWVudHM/LnNvcnQ/PyJpdGVtLm5hbWUiLG49dD8uYXJndW1lbnRzPy5kaXI/PyJhc2MiLGUuZm9yRWFjaCh0PT57aWYoMD09T2JqZWN0LmtleXModCkubGVuZ3RoKXJldHVybjtjb25zdCBlPSh0PT57bGV0IGU7aWYodCl7bGV0IHI9RGF0ZS5ub3coKTtlPShuZXcgRGF0ZSh0KS1yKS8xZTMvNjAvNjAvMjR9cmV0dXJuIGV9KSh0Py5leHBpcnlEYXRlKSxyPSgodCxlKT0+e2xldCByLG89ZT8uaXRlbT8uc3RhdHM/LmF2ZXJhZ2VNb250aGx5Q29uc3VtcHRpb24sbj1lPy50b3RhbE51bWJlck9mUGFja3MqZT8ucGFja1NpemU7aWYodCYmbyYmbiYmdD49MCl7Y29uc3QgZT1NYXRoLnJvdW5kKHQqKG8vMzAuNDM3NSkpO3I9TWF0aC5taW4oZSxuPz9lKX1yZXR1cm4gcn0pKGUsdCk7ciYmKHQuZXhwZWN0ZWRVc2FnZT1yKTtjb25zdCBvPSgodCxlLHIsbyk9PntsZXQgbjtpZih0JiZlJiZvKXtjb25zdCBhPXQqZTtyJiYobj1vPj0wP01hdGgucm91bmQoYS1yKihvLzMwLjQzNzUpKTpNYXRoLnJvdW5kKGEpKSxyfHxvPD0wJiYobj1NYXRoLnJvdW5kKGEpKX1yZXR1cm4gbjwwPzA6bn0pKHQ/LnBhY2tTaXplLHQ/LnRvdGFsTnVtYmVyT2ZQYWNrcyx0Py5pdGVtPy5zdGF0cz8uYXZlcmFnZU1vbnRobHlDb25zdW1wdGlvbixlKTtvJiYodC5zdG9ja0F0Umlzaz1vKSx0LmRheXNVbnRpbEV4cGlyZWQ9KHQ9PntsZXQgZTtyZXR1cm4gdCYmKGU9TWF0aC5yb3VuZCh0KSksZX0pKGUpLHQuYXZlcmFnZU1vbnRobHlDb25zdW1wdGlvbj1NYXRoLnJvdW5kKDEwKih0Py5pdGVtPy5zdGF0cz8uYXZlcmFnZU1vbnRobHlDb25zdW1wdGlvbj8/MCkpLzEwfSksKDAsby5zb3J0Tm9kZXMpKGUscixuKSksdH1leHBvcnR7biBhcyBjb252ZXJ0X2RhdGF9Ow==",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>{% include \"style.css\" %}</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"report.expiring-in-days\", f=\"Expiring in (days)\")}}</td>\n        <td>{{t(k=\"label.batch\", f=\"Batch\")}}</td>\n        <td>{{t(k=\"report.expiry-date\", f=\"Expiry date\")}}</td>\n        <td>{{t(k=\"report.stock-on-hand\", f=\"Stock on hand\")}}</td>\n        <td>{{t(k=\"report.average-monthly-consumption\", f=\"Average monthly consumption\")}}</td>\n        <td>{{t(k=\"report.expected-usage\", f=\"Expected usage\")}}</td>\n        <td>{{t(k=\"report.stock-at-risk\", f=\"Stock at risk\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for stockLine in data.stockLines.nodes %}\n      <tr>\n        <td>{{stockLine.item.code}}</td>\n        <td>{{stockLine.item.name}}</td>\n        <td class=\"expiry-date\">\n          {% if stockLine.daysUntilExpired %}\n            {% if stockLine.daysUntilExpired <= 0 %}\n              <span class=\"expired\">{{t(k=\"report.expired\", f=\"Expired\")}}</span>\n              {% elif stockLine.daysUntilExpired <= arguments.monthsItemsExpire *\n                (365.25 / 12.0) %}\n              <span class=\"soon\">{{ stockLine.daysUntilExpired }}</span>\n            {% else %}\n                <span class=\"all-good\">{{ stockLine.daysUntilExpired }}</span>\n            {% endif %}\n          {% else %}\n            <span class=\"na\">N/A</span>\n          {% endif %}\n        </td>\n        <td>{{stockLine.batch | default(value='')}}</td>\n        <td>\n          {% if stockLine.expiryDate %}\n            {{ stockLine.expiryDate | date(format=\"%d/%m/%Y\") }}\n          {% else %}\n            N/A\n          {% endif %}\n        </td>\n        <td>{{stockLine.totalNumberOfPacks * stockLine.packSize | round( precision=1)\n          }}</td>\n        <td>{{stockLine.averageMonthlyConsumption }}</td>\n        <td>\n          {% if stockLine.expectedUsage %}\n              {{ stockLine.expectedUsage | round( precision=1) }}\n          {% else %}\n            N/A\n          {% endif %}\n        </td>\n        <td>\n          {% if stockLine.stockAtRisk %}\n            {{ stockLine.stockAtRisk | round( precision=1) }}\n          {% else %}\n            N/A\n          {% endif %}\n        </td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>"
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container > table > thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container>table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.expiry-date span {\n  padding: 2px;\n  border-radius: 10px;\n}\n\n.container table td.expiry-date span.expired::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(245, 5, 1, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.expired {\n  background-color: rgba(245, 5, 1, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}\n\n.container table td.expiry-date span.soon::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(248, 154, 1, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.soon {\n  background-color: rgba(248, 154, 1, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}\n\n.container table td.expiry-date span.all-good::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(51, 169, 1, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.all-good {\n  background-color: rgba(51, 169, 1, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}\n\n.container table span.na::before {\n  content: \"\";\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: rgba(143, 144, 166, 0.6);\n  margin-right: 5px;\n}\n\n.container table td.expiry-date span.na {\n  background-color: rgba(143, 144, 166, 0.3);\n  padding: 3px 10px;\n  white-space: nowrap;\n}"
          },
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query ExpiringItems(\n  $storeId: String\n  $itemCodeOrName: String\n  $expiryDate: String\n) {\n  stockLines(\n    storeId: $storeId\n    filter: {\n      itemCodeOrName: { like: $itemCodeOrName }\n      expiryDate: { beforeOrEqualTo: $expiryDate }\n      hasPacksInStore: true\n      isActive: true\n    }\n  ) {\n    ... on StockLineConnector {\n      nodes {\n        batch\n        expiryDate\n        id\n        packSize\n        storeId\n        totalNumberOfPacks\n        supplierName\n        location {\n          code\n        }\n        item {\n          code\n          name\n          unitName\n          stats(storeId: $storeId) {\n            averageMonthlyConsumption\n          }\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "StockAndItems",
      "argument_schema_id": "for_report_expiring-items_2_10_1_false",
      "comment": null,
      "is_custom": false,
      "version": "2.10.1",
      "code": "expiring-items",
      "form_schema": {
        "id": "for_report_expiring-items_2_10_1_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "format": "SortToggle",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "expiryDate": {
                  "description": "T#label.expiry-date",
                  "format": "date",
                  "type": "string"
                },
                "itemCodeOrName": {
                  "description": "Item Code or Name",
                  "type": "string"
                },
                "monthlyConsumptionLookBackPeriod": {
                  "description": "Average Monthly Consumption Look Back Period",
                  "readOnly": true,
                  "type": "number"
                },
                "monthsItemsExpire": {
                  "description": "Expiring item period",
                  "readOnly": true,
                  "type": "number"
                },
                "monthsOverstock": {
                  "description": "Months Overstock",
                  "readOnly": true,
                  "type": "number"
                },
                "monthsUnderstock": {
                  "description": "Months Understock",
                  "readOnly": true,
                  "type": "number"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "item.name",
                    "item.code",
                    "expiryDate",
                    "daysUntilExpired",
                    "stockAtRisk",
                    "expectedUsage"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.expiry-date",
              "options": {
                "dateOnly": true
              },
              "scope": "#/properties/expiryDate",
              "type": "Control"
            },
            {
              "label": "T#report.item-code-or-name",
              "options": {
                "flexBasis": "90%",
                "useDebounce": false
              },
              "scope": "#/properties/itemCodeOrName",
              "type": "Control"
            },
            {
              "label": "T#report.amc-lookback",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthlyConsumptionLookBackPeriod",
              "type": "Control"
            },
            {
              "label": "T#label.max-months-of-stock",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthsOverstock",
              "type": "Control"
            },
            {
              "label": "T#label.min-months-of-stock",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthsUnderstock",
              "type": "Control"
            },
            {
              "label": "T#label.expiring-item-period",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25
              },
              "scope": "#/properties/monthsItemsExpire",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "item.name",
                    "T#report.item-name"
                  ],
                  [
                    "item.code",
                    "T#label.code"
                  ],
                  [
                    "expiryDate",
                    "T#report.expiry-date"
                  ],
                  [
                    "daysUntilExpired",
                    "T#report.days-until-expired"
                  ],
                  [
                    "stockAtRisk",
                    "T#report.stock-at-risk"
                  ],
                  [
                    "expectedUsage",
                    "T#report.expected-usage"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "scope": "#/properties/dir",
              "type": "SortToggle"
            }
          ],
          "type": "VerticalLayout"
        }
      },
      "excel_template_buffer": null
    },
    {
      "id": "inbound-shipments_2_13_0_false",
      "name": "Inbound Shipments",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql"
          ],
          "convert_data": "ZnVuY3Rpb24gZShlKXtyZXR1cm4oZT0+e2lmKCFlKXJldHVybntkYXRhOnZvaWQgMH07Y29uc3QgdD1uZXcgTWFwLGE9bmV3IE1hcDtlLm5vZGVzLmZvckVhY2goZT0+e2UubGluZXMubm9kZXMuZm9yRWFjaChvPT57Y29uc3Qgcj1gJHtvLml0ZW0uY29kZX0tJHtlLm90aGVyUGFydHlOYW1lfWA7dC5zZXQociwodC5nZXQocil8fDApK28uY29zdFByaWNlUGVyUGFjaypvLm51bWJlck9mUGFja3MpLGEuc2V0KHIsKGEuZ2V0KHIpfHwwKSsxKX0pfSk7Y29uc3Qgbz1bXSxyPW5ldyBNYXA7cmV0dXJuIGUubm9kZXMuZm9yRWFjaChlPT57ZS5saW5lcy5ub2Rlcy5mb3JFYWNoKGM9Pntjb25zdCBpPWAke2MuaXRlbS5jb2RlfS0ke2Uub3RoZXJQYXJ0eU5hbWV9YCxuPShyLmdldChpKXx8MCkrMTtyLnNldChpLG4pO2NvbnN0IHM9bj09PWEuZ2V0KGkpO28ucHVzaCh7aWQ6Yy5pZCxpdGVtQ29kZTpjLml0ZW0uY29kZSxpdGVtTmFtZTpjLml0ZW0ubmFtZSxiYXRjaDpjLmJhdGNoLGV4cGlyeURhdGU6Yy5leHBpcnlEYXRlLHBhY2tTaXplOmMucGFja1NpemUsbnVtYmVyT2ZQYWNrczpjLm51bWJlck9mUGFja3MsbnVtYmVyT2ZVbml0czpjLm51bWJlck9mUGFja3MqYy5wYWNrU2l6ZSxjb3N0UHJpY2VQZXJQYWNrOmMuY29zdFByaWNlUGVyUGFjay50b0ZpeGVkKDIpLHRvdGFsQ29zdDpzP3QuZ2V0KGkpLnRvRml4ZWQoMik6Ii0iLG90aGVyUGFydHlOYW1lOmUub3RoZXJQYXJ0eU5hbWV9KX0pfSkse2RhdGE6e2xpbmVzOm8uc29ydCgoZSx0KT0+ZS5pdGVtTmFtZS5sb2NhbGVDb21wYXJlKHQuaXRlbU5hbWUpfHxlLm90aGVyUGFydHlOYW1lLmxvY2FsZUNvbXBhcmUodC5vdGhlclBhcnR5TmFtZSkpfX19KShlPy5kYXRhPy5pbnZvaWNlcyl9ZXhwb3J0e2UgYXMgY29udmVydF9kYXRhfTs=",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>\n  {% include \"style.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.supplier\", f=\"Supplier\")}}</td>\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"label.batch\", f=\"Batch\")}}</td>\n        <td>{{t(k=\"label.expiry\", f=\"Expiry\")}}</td>\n        <td>{{t(k=\"label.pack-size\", f=\"Pack size\")}}</td>\n        <td>{{t(k=\"label.num-packs\", f=\"Number of packs\")}}</td>\n        <td>{{t(k=\"label.number-of-units\", f=\"Number of units\")}}</td>\n        <td>{{t(k=\"description.pack-cost\", f=\"Cost price per pack\")}}</td>\n        <td>{{t(k=\"label.total-cost\", f=\"Total cost\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for line in data.lines %}\n      <tr>\n        <td>{{line.otherPartyName}}</td>\n        <td>{{line.itemCode}}</td>\n        <td>{{line.itemName}}</td>\n        <td>{{line.batch | default(value='')}}</td>\n        <td>\n          {%if line.expiryDate %}\n          {{line.expiryDate | date(format=\"%d/%m/%Y\")}}\n          {% else %}\n          {% endif %}\n        </td>\n        <td style=\"text-align: right\">{{line.packSize}}</td>\n        <td style=\"text-align: right\">{{line.numberOfPacks}}</td>\n        <td style=\"text-align: right\">{{line.numberOfUnits}}</td>\n        <td style=\"text-align: right\">{{line.costPricePerPack}}</td>\n        <td style=\"text-align: right\">{{line.totalCost}}</td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>"
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container table tr:last-child td {\n  border-bottom: none;\n}\n\n.container>table>thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container>table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.status span {\n  padding: 2px;\n  border-radius: 10px;\n}\n"
          },
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query InboundShipments(\n  $storeId: String\n  $otherPartyId: String\n  $before: String\n  $after: String\n) {\n  invoices(\n    storeId: $storeId\n    filter: {\n      type: { equalTo: INBOUND_SHIPMENT }\n      status: { equalAny: [RECEIVED, VERIFIED]}\n      otherPartyId: { equalTo: $otherPartyId }\n      shippedDatetime: { afterOrEqualTo: $after, beforeOrEqualTo: $before }\n    }\n  ) {\n    ... on InvoiceConnector {\n      nodes {\n        id\n        otherPartyName\n        lines {\n          nodes {\n            id\n            item {\n              id\n              code\n              name\n            }\n            batch\n            expiryDate\n            numberOfPacks\n            packSize\n            costPricePerPack\n          }\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "Other",
      "argument_schema_id": "for_report_inbound-shipments_2_13_0_false",
      "comment": null,
      "is_custom": false,
      "version": "2.13.0",
      "code": "inbound-shipments",
      "form_schema": {
        "id": "for_report_inbound-shipments_2_13_0_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/Filters"
            }
          ],
          "definitions": {
            "Filters": {
              "properties": {
                "after": {
                  "description": "From date",
                  "format": "date-time",
                  "type": "string"
                },
                "before": {
                  "description": "To date",
                  "format": "date-time",
                  "type": "string"
                },
                "otherPartyId": {
                  "description": "Filter by other party",
                  "type": [
                    "string",
                    "null"
                  ]
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#label.supplier",
              "options": {
                "nameType": "supplier"
              },
              "scope": "#/properties/otherPartyId",
              "type": "NameSearch"
            },
            {
              "label": "T#label.from-date",
              "options": {
                "dateOnly": true,
                "disableFuture": true,
                "max": "#/properties/before"
              },
              "scope": "#/properties/after",
              "type": "Control"
            },
            {
              "label": "T#label.to-date",
              "options": {
                "dateOnly": true,
                "disableFuture": true,
                "min": "#/properties/after"
              },
              "scope": "#/properties/before",
              "type": "Control"
            }
          ],
          "type": "VerticalLayout"
        }
      },
      "excel_template_buffer": null
    },
    {
      "id": "outbound-shipments_2_10_1_false",
      "name": "Outbound Shipments",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql"
          ],
          "convert_data": "ZnVuY3Rpb24gZShlKXtyZXR1cm4oZT0+e2lmKCFlKXJldHVybntkYXRhOnZvaWQgMH07Y29uc3QgdD1uZXcgTWFwLGE9bmV3IE1hcDtlLm5vZGVzLmZvckVhY2goZT0+e2UubGluZXMubm9kZXMuZm9yRWFjaChyPT57Y29uc3Qgbz1gJHtyLml0ZW0uY29kZX0tJHtlLm90aGVyUGFydHlOYW1lfWA7dC5zZXQobywodC5nZXQobyl8fDApK3IuY29zdFByaWNlUGVyUGFjaypyLm51bWJlck9mUGFja3MpLGEuc2V0KG8sKGEuZ2V0KG8pfHwwKSsxKX0pfSk7Y29uc3Qgcj1bXSxvPW5ldyBNYXA7cmV0dXJuIGUubm9kZXMuZm9yRWFjaChlPT57ZS5saW5lcy5ub2Rlcy5mb3JFYWNoKGM9Pntjb25zdCBpPWAke2MuaXRlbS5jb2RlfS0ke2Uub3RoZXJQYXJ0eU5hbWV9YCxuPShvLmdldChpKXx8MCkrMTtvLnNldChpLG4pO2NvbnN0IHM9bj09PWEuZ2V0KGkpO3IucHVzaCh7aWQ6Yy5pZCxpdGVtQ29kZTpjLml0ZW0uY29kZSxpdGVtTmFtZTpjLml0ZW0ubmFtZSxiYXRjaDpjLmJhdGNoLGV4cGlyeURhdGU6Yy5leHBpcnlEYXRlLHBhY2tTaXplOmMucGFja1NpemUsbnVtYmVyT2ZQYWNrczpjLm51bWJlck9mUGFja3MsbnVtYmVyT2ZVbml0czpjLm51bWJlck9mUGFja3MqYy5wYWNrU2l6ZSxjb3N0UHJpY2VQZXJQYWNrOmMuY29zdFByaWNlUGVyUGFjayx0b3RhbENvc3Q6cz90LmdldChpKS50b0ZpeGVkKDIpOiItIixvdGhlclBhcnR5TmFtZTplLm90aGVyUGFydHlOYW1lfSl9KX0pLHtkYXRhOntsaW5lczpyLnNvcnQoKGUsdCk9PmUuaXRlbU5hbWUubG9jYWxlQ29tcGFyZSh0Lml0ZW1OYW1lKXx8ZS5vdGhlclBhcnR5TmFtZS5sb2NhbGVDb21wYXJlKHQub3RoZXJQYXJ0eU5hbWUpKX19fSkoZT8uZGF0YT8uaW52b2ljZXMpfWV4cG9ydHtlIGFzIGNvbnZlcnRfZGF0YX07",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query OutboundShipments(\n  $storeId: String\n  $otherPartyId: String\n  $before: String\n  $after: String\n) {\n  invoices(\n    storeId: $storeId\n    filter: {\n      type: { equalTo: OUTBOUND_SHIPMENT }\n      otherPartyId: { equalTo: $otherPartyId }\n      shippedDatetime: { afterOrEqualTo: $after, beforeOrEqualTo: $before }\n    }\n  ) {\n    ... on InvoiceConnector {\n      nodes {\n        id\n        otherPartyName\n        lines {\n          nodes {\n            id\n            item {\n              id\n              code\n              name\n            }\n            batch\n            expiryDate\n            numberOfPacks\n            packSize\n            costPricePerPack\n          }\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container table tr:last-child td {\n  border-bottom: none;\n}\n\n.container>table>thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container>table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.status span {\n  padding: 2px;\n  border-radius: 10px;\n}\n"
          },
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>\n  {% include \"style.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.customer\", f=\"Customer\")}}</td>\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"label.batch\", f=\"Batch\")}}</td>\n        <td>{{t(k=\"label.expiry\", f=\"Expiry\")}}</td>\n        <td>{{t(k=\"label.pack-size\", f=\"Pack size\")}}</td>\n        <td>{{t(k=\"label.num-packs\", f=\"Number of packs\")}}</td>\n        <td>{{t(k=\"label.number-of-units\", f=\"Number of units\")}}</td>\n        <td>{{t(k=\"description.pack-cost\", f=\"Cost price per pack\")}}</td>\n        <td>{{t(k=\"label.total-cost\", f=\"Total cost\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for line in data.lines %}\n      <tr>\n        <td>{{line.otherPartyName}}</td>\n        <td>{{line.itemCode}}</td>\n        <td>{{line.itemName}}</td>\n        <td>{{line.batch | default(value='')}}</td>\n        <td>\n          {%if line.expiryDate %}\n          {{line.expiryDate | date(format=\"%d/%m/%Y\")}}\n          {% else %}\n          {% endif %}\n        </td>\n        <td style=\"text-align: right\">{{line.packSize}}</td>\n        <td style=\"text-align: right\">{{line.numberOfPacks}}</td>\n        <td style=\"text-align: right\">{{line.numberOfUnits}}</td>\n        <td style=\"text-align: right\">{{line.costPricePerPack}}</td>\n        <td style=\"text-align: right\">{{line.totalCost}}</td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>"
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "Distribution",
      "argument_schema_id": "for_report_outbound-shipments_2_10_1_false",
      "comment": null,
      "is_custom": false,
      "version": "2.10.1",
      "code": "outbound-shipments",
      "form_schema": {
        "id": "for_report_outbound-shipments_2_10_1_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/Filters"
            }
          ],
          "definitions": {
            "Filters": {
              "properties": {
                "after": {
                  "description": "From date",
                  "format": "date-time",
                  "type": "string"
                },
                "before": {
                  "description": "To date",
                  "format": "date-time",
                  "type": "string"
                },
                "otherPartyId": {
                  "description": "Filter by other party",
                  "type": [
                    "string",
                    "null"
                  ]
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#label.customer",
              "options": {
                "nameType": "customer"
              },
              "scope": "#/properties/otherPartyId",
              "type": "NameSearch"
            },
            {
              "label": "T#label.from-date",
              "options": {
                "dateOnly": true,
                "disableFuture": true,
                "max": "#/properties/before"
              },
              "scope": "#/properties/after",
              "type": "Control"
            },
            {
              "label": "T#label.to-date",
              "options": {
                "dateOnly": true,
                "disableFuture": true,
                "min": "#/properties/after"
              },
              "scope": "#/properties/before",
              "type": "Control"
            }
          ],
          "type": "VerticalLayout"
        }
      },
      "excel_template_buffer": null
    },
    {
      "id": "stock-status_2_6_4_false",
      "name": "Stock Status",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql"
          ],
          "convert_data": "dmFyIGU9ezM3ODplPT57Y29uc3QgdD0oZSx0KT0+KHQrPSIiKS5zcGxpdCgiLiIpLnJlZHVjZSgoZSx0KT0+ZSYmZVt0XSxlKTtlLmV4cG9ydHM9e2dldE5lc3RlZFZhbHVlOnQsc29ydE5vZGVzOihlLHIsbyk9PihyJiZlLnNvcnQoKGUscyk9PntsZXQgYT10KGUscik7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1hLnRvTG9jYWxlTG93ZXJDYXNlKCkpO2xldCBuPXQocyxyKTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIG4mJihuPW4udG9Mb2NhbGVMb3dlckNhc2UoKSksbnVsbD09YSYmbnVsbD09bj8wOm51bGw9PWE/ImFzYyI9PT1vPy0xOjE6bnVsbD09bj8iYXNjIj09PW8/MTotMTphPT09bj8wOiJhc2MiPT09bz9hPm4/MTotMTphPG4/MTotMX0pLGUpfX19LHQ9e307ZnVuY3Rpb24gcihvKXt2YXIgcz10W29dO2lmKHZvaWQgMCE9PXMpcmV0dXJuIHMuZXhwb3J0czt2YXIgYT10W29dPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtvXShhLGEuZXhwb3J0cyxyKSxhLmV4cG9ydHN9ci5kPShlLHQpPT57Zm9yKHZhciBvIGluIHQpci5vKHQsbykmJiFyLm8oZSxvKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbyx7ZW51bWVyYWJsZTohMCxnZXQ6dFtvXX0pfSxyLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpO3ZhciBvPXIoMzc4KTtmdW5jdGlvbiBzKGUpe3ZhciB0LHIscztyZXR1cm4gZS5kYXRhLml0ZW1zLm5vZGVzPSh0PWUuZGF0YS5pdGVtcy5ub2RlcyxyPWU/LmFyZ3VtZW50cz8uc29ydD8/Im5hbWUiLHM9ZT8uYXJndW1lbnRzPy5kaXI/PyJhc2MiLCgwLG8uc29ydE5vZGVzKSh0LHIscykpLGV9ZXhwb3J0e3MgYXMgY29udmVydF9kYXRhfTs=",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query StockStatus($storeId: String, $itemCode: String, $itemName: String) {\n  items(\n    storeId: $storeId\n    filter: {\n      code: { like: $itemCode }\n      name: { like: $itemName }\n      isVisibleOrOnHand: true\n      isActive: true\n    }\n  ) {\n    ... on ItemConnector {\n      nodes {\n        code\n        name\n        stats(storeId: $storeId) {\n          totalConsumption\n          availableMonthsOfStockOnHand\n          stockOnHand\n          averageMonthlyConsumption\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container table tr:last-child td {\n  border-bottom: none;\n}\n\n.container>table>thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container>table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.status span {\n  padding: 2px;\n  border-radius: 10px;\n}\n\n\n.container table td.status span::before {\n  content: '';\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  margin-right: 5px;\n}\n\n.container table td.status span.out-of-stock::before {\n  background-color: #f40502;\n}\n\n.container table td.status span.out-of-stock {\n   padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #fbcdcc;\n}\n\n.container table td.status span.overstocked::before {\n  background-color: #0260f7;\n}\n\n.container table td.status span.overstocked {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #d9d9ff;\n}\n\n.container table td.status span.understocked::before {\n  background-color: #f79a02;\n}\n\n.container table td.status span.understocked {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #fdebcc;\n}\n\n.container table td.status span.well-stocked::before {\n  background-color: #33a902;\n}\n\n.container table td.status span.well-stocked {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #d6eecc;\n}\n\n.container table td.status span.no-consumption::before {\n  background-color: #8f90a6;\n}\n\n.container table td.status span.no-consumption {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #e9e9ed;\n}\n"
          },
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>\n  {% include \"style.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"label.status\", f=\"Status\")}}</td>\n        <td>\n          {{t(k=\"report.consumption\", f=\"Consumption\")}}\n          ({{arguments.monthlyConsumptionLookBackPeriod | default(value=3)}})\n          {{t(k=\"label.months\", f=\"months\")}}\n        </td>\n        <td>{{t(k=\"label.soh\", f=\"SOH\")}}</td>\n        <td>\n          {{t(k=\"label.amc\", f=\"AMC\")}}\n          ({{arguments.monthlyConsumptionLookBackPeriod | default(value=3)}})\n          {{t(k=\"label.months\", f=\"months\")}}\n        </td>\n        <td>{{t(k=\"report.mos\", f=\"MOS\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for item in data.items.nodes %} \n      {% set SOH = item.stats.stockOnHand | default(value=0) | round( precision=1) %} \n      {% set AMC =  item.stats.averageMonthlyConsumption | default(value=0) |\n      round(precision=1) %} \n      {% set MOS = item.stats.availableMonthsOfStockOnHand | default(value=0) | round( precision=1) %}\n\n      <tr>\n        <td>{{item.code}}</td>\n        <td>{{item.name}}</td>\n        <td class=\"status\">\n          {% if SOH == 0 and AMC > 0 %}\n          <span class=\"out-of-stock\"\n            >{{t(k=\"report.out-of-stock\", f=\"Out of Stock\")}}</span\n          >\n          {% elif AMC == 0 %}\n          <span class=\"no-consumption\"\n            >{{t(k=\"report.no-consumption\", f=\"No consumption\")}}</span\n          >\n          {% elif MOS >= arguments.monthsUnderstock | default(value=0) and MOS\n          <= arguments.monthsOverstock | default(value=0) %}\n          <span class=\"well-stocked\"\n            >{{t(k=\"report.well-stocked\", f=\"Well stocked\")}}</span\n          >\n          {% elif MOS < arguments.monthsUnderstock | default(value=0) %}\n          <span class=\"understocked\">\n            {{t(k=\"report.understocked\", f=\"Understocked\")}}</span\n          >\n          {% elif MOS > arguments.monthsOverstock | default(value=0) %}\n          <span class=\"overstocked\"\n            >{{t(k=\"report.overstocked\", f=\"Overstocked\")}}</span\n          >\n          {% else %} {% endif %}\n        </td>\n        <td>\n          {{item.stats.totalConsumption | default(value=0) | round(\n          precision=1)}}\n        </td>\n        <td>{{SOH}}</td>\n        <td>{{AMC}}</td>\n        <td>\n          {{item.stats.availableMonthsOfStockOnHand | default(value=0) | round(\n          precision=1)}}\n        </td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "StockAndItems",
      "argument_schema_id": "for_report_stock-status_2_6_4_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.4",
      "code": "stock-status",
      "form_schema": {
        "id": "for_report_stock-status_2_6_4_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "format": "SortToggle",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "itemCode": {
                  "description": "Item Code",
                  "type": "string"
                },
                "itemName": {
                  "description": "Item Name",
                  "type": "string"
                },
                "monthlyConsumptionLookBackPeriod": {
                  "description": "Average Monthly Consumption Look Back Period",
                  "type": "number"
                },
                "monthsOverstock": {
                  "description": "Months Overstock",
                  "type": "number"
                },
                "monthsUnderstock": {
                  "description": "Months Understock",
                  "type": "number"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "name",
                    "code"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.item-code",
              "options": {
                "useDebounce": false
              },
              "scope": "#/properties/itemCode",
              "type": "Control"
            },
            {
              "label": "T#report.item-name",
              "options": {
                "useDebounce": false
              },
              "scope": "#/properties/itemName",
              "type": "Control"
            },
            {
              "label": "T#report.amc-lookback",
              "options": {
                "readonly": true
              },
              "scope": "#/properties/monthlyConsumptionLookBackPeriod",
              "type": "Control"
            },
            {
              "label": "T#label.max-months-of-stock",
              "options": {
                "readonly": true
              },
              "scope": "#/properties/monthsOverstock",
              "type": "Control"
            },
            {
              "label": "T#label.min-months-of-stock",
              "options": {
                "readonly": true
              },
              "scope": "#/properties/monthsUnderstock",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "name",
                    "T#report.item-name"
                  ],
                  [
                    "code",
                    "T#label.code"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "scope": "#/properties/dir",
              "type": "SortToggle"
            }
          ],
          "type": "VerticalLayout"
        }
      },
      "excel_template_buffer": null
    },
    {
      "id": "item-usage_2_16_0_false",
      "name": "Item Usage",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql",
            "thisMonthConsumption",
            "lastMonthConsumption",
            "twoMonthsAgoConsumption",
            "expiringInSixMonths",
            "expiringInTwelveMonths",
            "stockOnOrder"
          ],
          "convert_data": "dmFyIHQ9ezI6KHQscixlKT0+e3ZhciBuPWUoMjE5OSksbz1lKDQ2NjQpLGE9ZSg1OTUwKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG4odCxhLG8pfX0sNzk6KHQscixlKT0+e3ZhciBuPWUoMzcwMiksbz1lKDgwKSxhPWUoNDczOSksaT1lKDg2NTUpLHU9ZSgxMTc1KTtmdW5jdGlvbiBzKHQpe3ZhciByPS0xLGU9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytyPGU7KXt2YXIgbj10W3JdO3RoaXMuc2V0KG5bMF0sblsxXSl9fXMucHJvdG90eXBlLmNsZWFyPW4scy5wcm90b3R5cGUuZGVsZXRlPW8scy5wcm90b3R5cGUuZ2V0PWEscy5wcm90b3R5cGUuaGFzPWkscy5wcm90b3R5cGUuc2V0PXUsdC5leHBvcnRzPXN9LDgwOih0LHIsZSk9Pnt2YXIgbj1lKDYwMjUpLG89QXJyYXkucHJvdG90eXBlLnNwbGljZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXyxlPW4ocix0KTtyZXR1cm4hKGU8MHx8KGU9PXIubGVuZ3RoLTE/ci5wb3AoKTpvLmNhbGwocixlLDEpLC0tdGhpcy5zaXplLDApKX19LDEwNDoodCxyLGUpPT57dmFyIG49ZSgzNjYxKTtmdW5jdGlvbiBvKHQscil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHR8fG51bGwhPXImJiJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoIkV4cGVjdGVkIGEgZnVuY3Rpb24iKTt2YXIgZT1mdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cyxvPXI/ci5hcHBseSh0aGlzLG4pOm5bMF0sYT1lLmNhY2hlO2lmKGEuaGFzKG8pKXJldHVybiBhLmdldChvKTt2YXIgaT10LmFwcGx5KHRoaXMsbik7cmV0dXJuIGUuY2FjaGU9YS5zZXQobyxpKXx8YSxpfTtyZXR1cm4gZS5jYWNoZT1uZXcoby5DYWNoZXx8biksZX1vLkNhY2hlPW4sdC5leHBvcnRzPW99LDI3MDoodCxyLGUpPT57dmFyIG49ZSg3MDY4KSxvPWUoMzQ2KTt0LmV4cG9ydHM9ZnVuY3Rpb24gdChyLGUsYSxpLHUpe3JldHVybiByPT09ZXx8KG51bGw9PXJ8fG51bGw9PWV8fCFvKHIpJiYhbyhlKT9yIT1yJiZlIT1lOm4ocixlLGEsaSx0LHUpKX19LDI4OToodCxyLGUpPT57dmFyIG49ZSgyNjUxKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG4odGhpcyx0KS5nZXQodCl9fSwyOTQ6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQmJnQ+LTEmJnQlMT09MCYmdDw9OTAwNzE5OTI1NDc0MDk5MX19LDMxNzp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPS0xLGU9QXJyYXkodC5zaXplKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7ZVsrK3JdPVtuLHRdfSksZX19LDM0Njp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10JiYib2JqZWN0Ij09dHlwZW9mIHR9fSwzNjE6dD0+e3ZhciByPS9eKD86MHxbMS05XVxkKikkLzt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbj10eXBlb2YgdDtyZXR1cm4hIShlPW51bGw9PWU/OTAwNzE5OTI1NDc0MDk5MTplKSYmKCJudW1iZXIiPT1ufHwic3ltYm9sIiE9biYmci50ZXN0KHQpKSYmdD4tMSYmdCUxPT0wJiZ0PGV9fSwzOTI6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiBudWxsPT10P3ZvaWQgMDp0W3JdfX0sNTgzOih0LHIsZSk9Pnt2YXIgbj1lKDcyMzcpLG89ZSg3MjU1KSxhPWUoODU4NiksaT1lKDc3OTcpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gYSh0KT9uKGkodCkpOm8odCl9fSw2MzE6KHQscixlKT0+e3ZhciBuPWUoODA3Nyksbz1lKDkzMjYpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiBudWxsIT10JiZvKHQscixuKX19LDY0MToodCxyLGUpPT57dmFyIG49ZSg2NjQ5KSxvPWUoNTk1MCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIHQmJm4odCxyLG8pfX0sNjU5Oih0LHIsZSk9Pnt2YXIgbj1lKDE4NzMpLG89T2JqZWN0LnByb3RvdHlwZSxhPW8uaGFzT3duUHJvcGVydHksaT1vLnRvU3RyaW5nLHU9bj9uLnRvU3RyaW5nVGFnOnZvaWQgMDt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9YS5jYWxsKHQsdSksZT10W3VdO3RyeXt0W3VdPXZvaWQgMDt2YXIgbj0hMH1jYXRjaCh0KXt9dmFyIG89aS5jYWxsKHQpO3JldHVybiBuJiYocj90W3VdPWU6ZGVsZXRlIHRbdV0pLG99fSw2ODk6KHQscixlKT0+e3ZhciBuPWUoMiksbz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSxhLGksdSl7dmFyIHM9MSZlLGM9bih0KSxwPWMubGVuZ3RoO2lmKHAhPW4ocikubGVuZ3RoJiYhcylyZXR1cm4hMTtmb3IodmFyIGY9cDtmLS07KXt2YXIgdj1jW2ZdO2lmKCEocz92IGluIHI6by5jYWxsKHIsdikpKXJldHVybiExfXZhciBsPXUuZ2V0KHQpLGg9dS5nZXQocik7aWYobCYmaClyZXR1cm4gbD09ciYmaD09dDt2YXIgeD0hMDt1LnNldCh0LHIpLHUuc2V0KHIsdCk7Zm9yKHZhciB5PXM7KytmPHA7KXt2YXIgZD10W3Y9Y1tmXV0sXz1yW3ZdO2lmKGEpdmFyIGI9cz9hKF8sZCx2LHIsdCx1KTphKGQsXyx2LHQscix1KTtpZighKHZvaWQgMD09PWI/ZD09PV98fGkoZCxfLGUsYSx1KTpiKSl7eD0hMTticmVha315fHwoeT0iY29uc3RydWN0b3IiPT12KX1pZih4JiYheSl7dmFyIGc9dC5jb25zdHJ1Y3RvcixqPXIuY29uc3RydWN0b3I7Zz09anx8ISgiY29uc3RydWN0b3IiaW4gdCl8fCEoImNvbnN0cnVjdG9yImluIHIpfHwiZnVuY3Rpb24iPT10eXBlb2YgZyYmZyBpbnN0YW5jZW9mIGcmJiJmdW5jdGlvbiI9PXR5cGVvZiBqJiZqIGluc3RhbmNlb2Yganx8KHg9ITEpfXJldHVybiB1LmRlbGV0ZSh0KSx1LmRlbGV0ZShyKSx4fX0sNjk1Oih0LHIsZSk9Pnt2YXIgbj1lKDgwOTYpLG89ZSgyNDI4KSxhPWUoNjQ0OSksaT1lKDM2NTYpLHU9ZSgzNjEpLHM9ZSg3MTY3KSxjPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7dmFyIGU9YSh0KSxwPSFlJiZvKHQpLGY9IWUmJiFwJiZpKHQpLHY9IWUmJiFwJiYhZiYmcyh0KSxsPWV8fHB8fGZ8fHYsaD1sP24odC5sZW5ndGgsU3RyaW5nKTpbXSx4PWgubGVuZ3RoO2Zvcih2YXIgeSBpbiB0KSFyJiYhYy5jYWxsKHQseSl8fGwmJigibGVuZ3RoIj09eXx8ZiYmKCJvZmZzZXQiPT15fHwicGFyZW50Ij09eSl8fHYmJigiYnVmZmVyIj09eXx8ImJ5dGVMZW5ndGgiPT15fHwiYnl0ZU9mZnNldCI9PXkpfHx1KHkseCkpfHxoLnB1c2goeSk7cmV0dXJuIGh9fSw3NTY6KHQscixlKT0+e3ZhciBuPWUoMzgwNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10JiYhbih0KX19LDc3NjoodCxyLGUpPT57dmFyIG49ZSg3NTYpLG89ZSg1OTUwKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7Zm9yKHZhciByPW8odCksZT1yLmxlbmd0aDtlLS07KXt2YXIgYT1yW2VdLGk9dFthXTtyW2VdPVthLGksbihpKV19cmV0dXJuIHJ9fSw5MDk6KHQscixlKT0+e3ZhciBuPWUoNjQxKSxvPWUoODMyOSkobik7dC5leHBvcnRzPW99LDkzODp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX19kYXRhX18sZT1yLmRlbGV0ZSh0KTtyZXR1cm4gdGhpcy5zaXplPXIuc2l6ZSxlfX0sOTQ1Oih0LHIsZSk9Pnt2YXIgbj1lKDc5KSxvPWUoODIyMyksYT1lKDM2NjEpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPXRoaXMuX19kYXRhX187aWYoZSBpbnN0YW5jZW9mIG4pe3ZhciBpPWUuX19kYXRhX187aWYoIW98fGkubGVuZ3RoPDE5OSlyZXR1cm4gaS5wdXNoKFt0LHJdKSx0aGlzLnNpemU9KytlLnNpemUsdGhpcztlPXRoaXMuX19kYXRhX189bmV3IGEoaSl9cmV0dXJuIGUuc2V0KHQsciksdGhpcy5zaXplPWUuc2l6ZSx0aGlzfX0sMTA0MjoodCxyLGUpPT57dmFyIG49ZSg2MTEwKShPYmplY3QsImNyZWF0ZSIpO3QuZXhwb3J0cz1ufSwxMTc1Oih0LHIsZSk9Pnt2YXIgbj1lKDYwMjUpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPXRoaXMuX19kYXRhX18sbz1uKGUsdCk7cmV0dXJuIG88MD8oKyt0aGlzLnNpemUsZS5wdXNoKFt0LHJdKSk6ZVtvXVsxXT1yLHRoaXN9fSwxMzgwOnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19kYXRhX18uc2V0KHQsIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iKSx0aGlzfX0sMTQyMDoodCxyLGUpPT57dmFyIG49ZSg3OSk7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1uZXcgbix0aGlzLnNpemU9MH19LDE0NTk6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModCl9fSwxNTQ5Oih0LHIsZSk9Pnt2YXIgbj1lKDIwMzIpLG89ZSgzODYyKSxhPWUoNjcyMSksaT1lKDI3NDkpLHU9ZSg1NzQ5KTtmdW5jdGlvbiBzKHQpe3ZhciByPS0xLGU9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytyPGU7KXt2YXIgbj10W3JdO3RoaXMuc2V0KG5bMF0sblsxXSl9fXMucHJvdG90eXBlLmNsZWFyPW4scy5wcm90b3R5cGUuZGVsZXRlPW8scy5wcm90b3R5cGUuZ2V0PWEscy5wcm90b3R5cGUuaGFzPWkscy5wcm90b3R5cGUuc2V0PXUsdC5leHBvcnRzPXN9LDE3Njk6KHQscixlKT0+e3ZhciBuPWUoNjQ0OSksbz1lKDg1ODYpLGE9ZSgxODAyKSxpPWUoMzIyMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIG4odCk/dDpvKHQscik/W3RdOmEoaSh0KSl9fSwxNzk5Oih0LHIsZSk9Pnt2YXIgbj1lKDcyMTcpLG89ZSgyNzApO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSxhKXt2YXIgaT1lLmxlbmd0aCx1PWkscz0hYTtpZihudWxsPT10KXJldHVybiF1O2Zvcih0PU9iamVjdCh0KTtpLS07KXt2YXIgYz1lW2ldO2lmKHMmJmNbMl0/Y1sxXSE9PXRbY1swXV06IShjWzBdaW4gdCkpcmV0dXJuITF9Zm9yKDsrK2k8dTspe3ZhciBwPShjPWVbaV0pWzBdLGY9dFtwXSx2PWNbMV07aWYocyYmY1syXSl7aWYodm9pZCAwPT09ZiYmIShwIGluIHQpKXJldHVybiExfWVsc2V7dmFyIGw9bmV3IG47aWYoYSl2YXIgaD1hKGYsdixwLHQscixsKTtpZighKHZvaWQgMD09PWg/byh2LGYsMyxhLGwpOmgpKXJldHVybiExfX1yZXR1cm4hMH19LDE4MDI6KHQscixlKT0+e3ZhciBuPWUoMjIyNCksbz0vW14uW1xdXSt8XFsoPzooLT9cZCsoPzpcLlxkKyk/KXwoWyInXSkoKD86KD8hXDIpW15cXF18XFwuKSo/KVwyKVxdfCg/PSg/OlwufFxbXF0pKD86XC58XFtcXXwkKSkvZyxhPS9cXChcXCk/L2csaT1uKGZ1bmN0aW9uKHQpe3ZhciByPVtdO3JldHVybiA0Nj09PXQuY2hhckNvZGVBdCgwKSYmci5wdXNoKCIiKSx0LnJlcGxhY2UobyxmdW5jdGlvbih0LGUsbixvKXtyLnB1c2gobj9vLnJlcGxhY2UoYSwiJDEiKTplfHx0KX0pLHJ9KTt0LmV4cG9ydHM9aX0sMTg3MzoodCxyLGUpPT57dmFyIG49ZSg5MzI1KS5TeW1ib2w7dC5leHBvcnRzPW59LDE4ODI6KHQscixlKT0+e3ZhciBuPWUoMjU1Miksbz1lKDM4MDUpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZighbyh0KSlyZXR1cm4hMTt2YXIgcj1uKHQpO3JldHVybiJbb2JqZWN0IEZ1bmN0aW9uXSI9PXJ8fCJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSI9PXJ8fCJbb2JqZWN0IEFzeW5jRnVuY3Rpb25dIj09cnx8IltvYmplY3QgUHJveHldIj09cn19LDE5ODY6KHQscixlKT0+e3ZhciBuPWUoMTg3Myksbz1lKDc4MjgpLGE9ZSg1Mjg4KSxpPWUoNTkxMSksdT1lKDMxNykscz1lKDQyNDcpLGM9bj9uLnByb3RvdHlwZTp2b2lkIDAscD1jP2MudmFsdWVPZjp2b2lkIDA7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlLG4sYyxmLHYpe3N3aXRjaChlKXtjYXNlIltvYmplY3QgRGF0YVZpZXddIjppZih0LmJ5dGVMZW5ndGghPXIuYnl0ZUxlbmd0aHx8dC5ieXRlT2Zmc2V0IT1yLmJ5dGVPZmZzZXQpcmV0dXJuITE7dD10LmJ1ZmZlcixyPXIuYnVmZmVyO2Nhc2UiW29iamVjdCBBcnJheUJ1ZmZlcl0iOnJldHVybiEodC5ieXRlTGVuZ3RoIT1yLmJ5dGVMZW5ndGh8fCFmKG5ldyBvKHQpLG5ldyBvKHIpKSk7Y2FzZSJbb2JqZWN0IEJvb2xlYW5dIjpjYXNlIltvYmplY3QgRGF0ZV0iOmNhc2UiW29iamVjdCBOdW1iZXJdIjpyZXR1cm4gYSgrdCwrcik7Y2FzZSJbb2JqZWN0IEVycm9yXSI6cmV0dXJuIHQubmFtZT09ci5uYW1lJiZ0Lm1lc3NhZ2U9PXIubWVzc2FnZTtjYXNlIltvYmplY3QgUmVnRXhwXSI6Y2FzZSJbb2JqZWN0IFN0cmluZ10iOnJldHVybiB0PT1yKyIiO2Nhc2UiW29iamVjdCBNYXBdIjp2YXIgbD11O2Nhc2UiW29iamVjdCBTZXRdIjp2YXIgaD0xJm47aWYobHx8KGw9cyksdC5zaXplIT1yLnNpemUmJiFoKXJldHVybiExO3ZhciB4PXYuZ2V0KHQpO2lmKHgpcmV0dXJuIHg9PXI7bnw9Mix2LnNldCh0LHIpO3ZhciB5PWkobCh0KSxsKHIpLG4sYyxmLHYpO3JldHVybiB2LmRlbGV0ZSh0KSx5O2Nhc2UiW29iamVjdCBTeW1ib2xdIjppZihwKXJldHVybiBwLmNhbGwodCk9PXAuY2FsbChyKX1yZXR1cm4hMX19LDJlMzoodCxyLGUpPT57dmFyIG49ZSgzOTQ1KSxvPWUoMjQyOSksYT1lKDUzODkpLGk9ZSg2NDQ5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZnVuY3Rpb24oZSx1KXt2YXIgcz1pKGUpP246byxjPXI/cigpOnt9O3JldHVybiBzKGUsdCxhKHUsMiksYyl9fX0sMjAxMzoodCxyLGUpPT57dmFyIG49ZSgzMzYwKSxvPWUoMmUzKSxhPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksaT1vKGZ1bmN0aW9uKHQscixlKXthLmNhbGwodCxlKT90W2VdLnB1c2gocik6bih0LGUsW3JdKX0pO3QuZXhwb3J0cz1pfSwyMDMyOih0LHIsZSk9Pnt2YXIgbj1lKDEwNDIpO3QuZXhwb3J0cz1mdW5jdGlvbigpe3RoaXMuX19kYXRhX189bj9uKG51bGwpOnt9LHRoaXMuc2l6ZT0wfX0sMjE5OToodCxyLGUpPT57dmFyIG49ZSg0NTI4KSxvPWUoNjQ0OSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlKXt2YXIgYT1yKHQpO3JldHVybiBvKHQpP2E6bihhLGUodCkpfX0sMjIyNDoodCxyLGUpPT57dmFyIG49ZSgxMDQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgcj1uKHQsZnVuY3Rpb24odCl7cmV0dXJuIDUwMD09PWUuc2l6ZSYmZS5jbGVhcigpLHR9KSxlPXIuY2FjaGU7cmV0dXJuIHJ9fSwyNDI4Oih0LHIsZSk9Pnt2YXIgbj1lKDc1MzQpLG89ZSgzNDYpLGE9T2JqZWN0LnByb3RvdHlwZSxpPWEuaGFzT3duUHJvcGVydHksdT1hLnByb3BlcnR5SXNFbnVtZXJhYmxlLHM9bihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpP246ZnVuY3Rpb24odCl7cmV0dXJuIG8odCkmJmkuY2FsbCh0LCJjYWxsZWUiKSYmIXUuY2FsbCh0LCJjYWxsZWUiKX07dC5leHBvcnRzPXN9LDI0Mjk6KHQscixlKT0+e3ZhciBuPWUoOTA5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUsbyl7cmV0dXJuIG4odCxmdW5jdGlvbih0LG4sYSl7cihvLHQsZSh0KSxhKX0pLG99fSwyNTUyOih0LHIsZSk9Pnt2YXIgbj1lKDE4NzMpLG89ZSg2NTkpLGE9ZSg5MzUwKSxpPW4/bi50b1N0cmluZ1RhZzp2b2lkIDA7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3ZvaWQgMD09PXQ/IltvYmplY3QgVW5kZWZpbmVkXSI6IltvYmplY3QgTnVsbF0iOmkmJmkgaW4gT2JqZWN0KHQpP28odCk6YSh0KX19LDI2NTE6KHQscixlKT0+e3ZhciBuPWUoNDIxOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7dmFyIGU9dC5fX2RhdGFfXztyZXR1cm4gbihyKT9lWyJzdHJpbmciPT10eXBlb2Ygcj8ic3RyaW5nIjoiaGFzaCJdOmUubWFwfX0sMjc0OToodCxyLGUpPT57dmFyIG49ZSgxMDQyKSxvPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX19kYXRhX187cmV0dXJuIG4/dm9pZCAwIT09clt0XTpvLmNhbGwocix0KX19LDI4MDQ6KHQscixlKT0+e3ZhciBuPWUoNjExMCkoZSg5MzI1KSwiUHJvbWlzZSIpO3QuZXhwb3J0cz1ufSwyODc3Oih0LHIsZSk9Pnt2YXIgbj1lKDYxNTUpLG89ZSg2NDQ5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUsYSl7cmV0dXJuIG51bGw9PXQ/W106KG8ocil8fChyPW51bGw9PXI/W106W3JdKSxvKGU9YT92b2lkIDA6ZSl8fChlPW51bGw9PWU/W106W2VdKSxuKHQscixlKSl9fSwyOTQ5Oih0LHIsZSk9Pnt2YXIgbj1lKDI2NTEpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPW4odGhpcyx0KSxvPWUuc2l6ZTtyZXR1cm4gZS5zZXQodCxyKSx0aGlzLnNpemUrPWUuc2l6ZT09bz8wOjEsdGhpc319LDMwNDA6KHQscixlKT0+e3ZhciBuPWUoMTU0OSksbz1lKDc5KSxhPWUoODIyMyk7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dGhpcy5zaXplPTAsdGhpcy5fX2RhdGFfXz17aGFzaDpuZXcgbixtYXA6bmV3KGF8fG8pLHN0cmluZzpuZXcgbn19fSwzMjIxOnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHIsZSxuKXtmb3IodmFyIG89LTEsYT1PYmplY3QociksaT1uKHIpLHU9aS5sZW5ndGg7dS0tOyl7dmFyIHM9aVt0P3U6KytvXTtpZighMT09PWUoYVtzXSxzLGEpKWJyZWFrfXJldHVybiByfX19LDMyMjI6KHQscixlKT0+e3ZhciBuPWUoNzU1Nik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10PyIiOm4odCl9fSwzMjQzOih0LHIsZSk9Pnt2YXIgbj1lKDYxMTApLG89ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9bihPYmplY3QsImRlZmluZVByb3BlcnR5Iik7cmV0dXJuIHQoe30sIiIse30pLHR9Y2F0Y2godCl7fX0oKTt0LmV4cG9ydHM9b30sMzM0NTp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKCl7cmV0dXJuW119fSwzMzYwOih0LHIsZSk9Pnt2YXIgbj1lKDMyNDMpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSl7Il9fcHJvdG9fXyI9PXImJm4/bih0LHIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOmUsd3JpdGFibGU6ITB9KTp0W3JdPWV9fSwzNDg4OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHR9fSwzNjA1OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KHQpfX0sMzY1MDoodCxyLGUpPT57dmFyIG49ZSg0MzM1KShPYmplY3Qua2V5cyxPYmplY3QpO3QuZXhwb3J0cz1ufSwzNjU2Oih0LHIsZSk9Pnt0PWUubm1kKHQpO3ZhciBuPWUoOTMyNSksbz1lKDk5MzUpLGE9ciYmIXIubm9kZVR5cGUmJnIsaT1hJiZ0JiYhdC5ub2RlVHlwZSYmdCx1PWkmJmkuZXhwb3J0cz09PWE/bi5CdWZmZXI6dm9pZCAwLHM9KHU/dS5pc0J1ZmZlcjp2b2lkIDApfHxvO3QuZXhwb3J0cz1zfSwzNjYxOih0LHIsZSk9Pnt2YXIgbj1lKDMwNDApLG89ZSg3NjcwKSxhPWUoMjg5KSxpPWUoNDUwOSksdT1lKDI5NDkpO2Z1bmN0aW9uIHModCl7dmFyIHI9LTEsZT1udWxsPT10PzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK3I8ZTspe3ZhciBuPXRbcl07dGhpcy5zZXQoblswXSxuWzFdKX19cy5wcm90b3R5cGUuY2xlYXI9bixzLnByb3RvdHlwZS5kZWxldGU9byxzLnByb3RvdHlwZS5nZXQ9YSxzLnByb3RvdHlwZS5oYXM9aSxzLnByb3RvdHlwZS5zZXQ9dSx0LmV4cG9ydHM9c30sMzY2MzoodCxyLGUpPT57dmFyIG49ZSgxNzk5KSxvPWUoNzc2KSxhPWUoNzE5Nyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPW8odCk7cmV0dXJuIDE9PXIubGVuZ3RoJiZyWzBdWzJdP2EoclswXVswXSxyWzBdWzFdKTpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR8fG4oZSx0LHIpfX19LDM3MDI6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbigpe3RoaXMuX19kYXRhX189W10sdGhpcy5zaXplPTB9fSwzNzE0Oih0LHIsZSk9Pnt2YXIgbj1lKDM3MzApO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSl7Zm9yKHZhciBvPS0xLGE9dC5jcml0ZXJpYSxpPXIuY3JpdGVyaWEsdT1hLmxlbmd0aCxzPWUubGVuZ3RoOysrbzx1Oyl7dmFyIGM9bihhW29dLGlbb10pO2lmKGMpcmV0dXJuIG8+PXM/YzpjKigiZGVzYyI9PWVbb10/LTE6MSl9cmV0dXJuIHQuaW5kZXgtci5pbmRleH19LDM3MzA6KHQscixlKT0+e3ZhciBuPWUoNDM5NCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7aWYodCE9PXIpe3ZhciBlPXZvaWQgMCE9PXQsbz1udWxsPT09dCxhPXQ9PXQsaT1uKHQpLHU9dm9pZCAwIT09cixzPW51bGw9PT1yLGM9cj09cixwPW4ocik7aWYoIXMmJiFwJiYhaSYmdD5yfHxpJiZ1JiZjJiYhcyYmIXB8fG8mJnUmJmN8fCFlJiZjfHwhYSlyZXR1cm4gMTtpZighbyYmIWkmJiFwJiZ0PHJ8fHAmJmUmJmEmJiFvJiYhaXx8cyYmZSYmYXx8IXUmJmF8fCFjKXJldHVybi0xfXJldHVybiAwfX0sMzgwNTp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXR5cGVvZiB0O3JldHVybiBudWxsIT10JiYoIm9iamVjdCI9PXJ8fCJmdW5jdGlvbiI9PXIpfX0sMzg2Mjp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuaGFzKHQpJiZkZWxldGUgdGhpcy5fX2RhdGFfX1t0XTtyZXR1cm4gdGhpcy5zaXplLT1yPzE6MCxyfX0sMzkzNzp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7dmFyIGU9dC5sZW5ndGg7Zm9yKHQuc29ydChyKTtlLS07KXRbZV09dFtlXS52YWx1ZTtyZXR1cm4gdH19LDM5NDU6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSxuKXtmb3IodmFyIG89LTEsYT1udWxsPT10PzA6dC5sZW5ndGg7KytvPGE7KXt2YXIgaT10W29dO3IobixpLGUoaSksdCl9cmV0dXJuIG59fSw0MjE4OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dHlwZW9mIHQ7cmV0dXJuInN0cmluZyI9PXJ8fCJudW1iZXIiPT1yfHwic3ltYm9sIj09cnx8ImJvb2xlYW4iPT1yPyJfX3Byb3RvX18iIT09dDpudWxsPT09dH19LDQyNDc6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgcj0tMSxlPUFycmF5KHQuc2l6ZSk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtlWysrcl09dH0pLGV9fSw0MjQ4OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9LTEsbj1udWxsPT10PzA6dC5sZW5ndGg7KytlPG47KWlmKHIodFtlXSxlLHQpKXJldHVybiEwO3JldHVybiExfX0sNDMzNTp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0KHIoZSkpfX19LDQzOTQ6KHQscixlKT0+e3ZhciBuPWUoMjU1Miksbz1lKDM0Nik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgdHx8byh0KSYmIltvYmplY3QgU3ltYm9sXSI9PW4odCl9fSw0NTA5Oih0LHIsZSk9Pnt2YXIgbj1lKDI2NTEpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbih0aGlzLHQpLmhhcyh0KX19LDQ1Mjg6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe2Zvcih2YXIgZT0tMSxuPXIubGVuZ3RoLG89dC5sZW5ndGg7KytlPG47KXRbbytlXT1yW2VdO3JldHVybiB0fX0sNDY2NDoodCxyLGUpPT57dmFyIG49ZSg5NzcwKSxvPWUoMzM0NSksYT1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyx1PWk/ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/W106KHQ9T2JqZWN0KHQpLG4oaSh0KSxmdW5jdGlvbihyKXtyZXR1cm4gYS5jYWxsKHQscil9KSl9Om87dC5leHBvcnRzPXV9LDQ3Mzk6KHQscixlKT0+e3ZhciBuPWUoNjAyNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX19kYXRhX18sZT1uKHIsdCk7cmV0dXJuIGU8MD92b2lkIDA6cltlXVsxXX19LDQ4NDA6KHQscixlKT0+e3ZhciBuPSJvYmplY3QiPT10eXBlb2YgZS5nJiZlLmcmJmUuZy5PYmplY3Q9PT1PYmplY3QmJmUuZzt0LmV4cG9ydHM9bn0sNDg5NDoodCxyLGUpPT57dmFyIG49ZSgxODgyKSxvPWUoMjk0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPXQmJm8odC5sZW5ndGgpJiYhbih0KX19LDQ5MDE6KHQscixlKT0+e3ZhciBuPWUoMjU1Miksbz1lKDI5NCksYT1lKDM0NiksaT17fTtpWyJbb2JqZWN0IEZsb2F0MzJBcnJheV0iXT1pWyJbb2JqZWN0IEZsb2F0NjRBcnJheV0iXT1pWyJbb2JqZWN0IEludDhBcnJheV0iXT1pWyJbb2JqZWN0IEludDE2QXJyYXldIl09aVsiW29iamVjdCBJbnQzMkFycmF5XSJdPWlbIltvYmplY3QgVWludDhBcnJheV0iXT1pWyJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XSJdPWlbIltvYmplY3QgVWludDE2QXJyYXldIl09aVsiW29iamVjdCBVaW50MzJBcnJheV0iXT0hMCxpWyJbb2JqZWN0IEFyZ3VtZW50c10iXT1pWyJbb2JqZWN0IEFycmF5XSJdPWlbIltvYmplY3QgQXJyYXlCdWZmZXJdIl09aVsiW29iamVjdCBCb29sZWFuXSJdPWlbIltvYmplY3QgRGF0YVZpZXddIl09aVsiW29iamVjdCBEYXRlXSJdPWlbIltvYmplY3QgRXJyb3JdIl09aVsiW29iamVjdCBGdW5jdGlvbl0iXT1pWyJbb2JqZWN0IE1hcF0iXT1pWyJbb2JqZWN0IE51bWJlcl0iXT1pWyJbb2JqZWN0IE9iamVjdF0iXT1pWyJbb2JqZWN0IFJlZ0V4cF0iXT1pWyJbb2JqZWN0IFNldF0iXT1pWyJbb2JqZWN0IFN0cmluZ10iXT1pWyJbb2JqZWN0IFdlYWtNYXBdIl09ITEsdC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBhKHQpJiZvKHQubGVuZ3RoKSYmISFpW24odCldfX0sNDkzMjp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoLG89QXJyYXkobik7KytlPG47KW9bZV09cih0W2VdLGUsdCk7cmV0dXJuIG99fSw1MDgzOih0LHIsZSk9Pnt2YXIgbj1lKDE4ODIpLG89ZSg3Mjk2KSxhPWUoMzgwNSksaT1lKDc0NzMpLHU9L15cW29iamVjdCAuKz9Db25zdHJ1Y3RvclxdJC8scz1GdW5jdGlvbi5wcm90b3R5cGUsYz1PYmplY3QucHJvdG90eXBlLHA9cy50b1N0cmluZyxmPWMuaGFzT3duUHJvcGVydHksdj1SZWdFeHAoIl4iK3AuY2FsbChmKS5yZXBsYWNlKC9bXFxeJC4qKz8oKVtcXXt9fF0vZywiXFwkJiIpLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFwoKXwgZm9yIC4rPyg/PVxcXF0pL2csIiQxLio/IikrIiQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuISghYSh0KXx8byh0KSkmJihuKHQpP3Y6dSkudGVzdChpKHQpKX19LDUxMjg6KHQscixlKT0+e3ZhciBuPWUoOTA5KSxvPWUoNDg5NCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7dmFyIGU9LTEsYT1vKHQpP0FycmF5KHQubGVuZ3RoKTpbXTtyZXR1cm4gbih0LGZ1bmN0aW9uKHQsbixvKXthWysrZV09cih0LG4sbyl9KSxhfX0sNTI4ODp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIHQ9PT1yfHx0IT10JiZyIT1yfX0sNTM4OToodCxyLGUpPT57dmFyIG49ZSgzNjYzKSxvPWUoNzk3OCksYT1lKDM0ODgpLGk9ZSg2NDQ5KSx1PWUoNTgzKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpudWxsPT10P2E6Im9iamVjdCI9PXR5cGVvZiB0P2kodCk/byh0WzBdLHRbMV0pOm4odCk6dSh0KX19LDU0ODE6KHQscixlKT0+e3ZhciBuPWUoOTMyNSlbIl9fY29yZS1qc19zaGFyZWRfXyJdO3QuZXhwb3J0cz1ufSw1NTI3OnQ9Pnt2YXIgcj1PYmplY3QucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT10JiZ0LmNvbnN0cnVjdG9yO3JldHVybiB0PT09KCJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLnByb3RvdHlwZXx8cil9fSw1NTgwOih0LHIsZSk9Pnt2YXIgbj1lKDYxMTApKGUoOTMyNSksIkRhdGFWaWV3Iik7dC5leHBvcnRzPW59LDU3NDk6KHQscixlKT0+e3ZhciBuPWUoMTA0Mik7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7dmFyIGU9dGhpcy5fX2RhdGFfXztyZXR1cm4gdGhpcy5zaXplKz10aGlzLmhhcyh0KT8wOjEsZVt0XT1uJiZ2b2lkIDA9PT1yPyJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fIjpyLHRoaXN9fSw1ODYxOih0LHIsZSk9Pnt2YXIgbj1lKDU1ODApLG89ZSg4MjIzKSxhPWUoMjgwNCksaT1lKDY1NDUpLHU9ZSg4MzAzKSxzPWUoMjU1MiksYz1lKDc0NzMpLHA9IltvYmplY3QgTWFwXSIsZj0iW29iamVjdCBQcm9taXNlXSIsdj0iW29iamVjdCBTZXRdIixsPSJbb2JqZWN0IFdlYWtNYXBdIixoPSJbb2JqZWN0IERhdGFWaWV3XSIseD1jKG4pLHk9YyhvKSxkPWMoYSksXz1jKGkpLGI9Yyh1KSxnPXM7KG4mJmcobmV3IG4obmV3IEFycmF5QnVmZmVyKDEpKSkhPWh8fG8mJmcobmV3IG8pIT1wfHxhJiZnKGEucmVzb2x2ZSgpKSE9Znx8aSYmZyhuZXcgaSkhPXZ8fHUmJmcobmV3IHUpIT1sKSYmKGc9ZnVuY3Rpb24odCl7dmFyIHI9cyh0KSxlPSJbb2JqZWN0IE9iamVjdF0iPT1yP3QuY29uc3RydWN0b3I6dm9pZCAwLG49ZT9jKGUpOiIiO2lmKG4pc3dpdGNoKG4pe2Nhc2UgeDpyZXR1cm4gaDtjYXNlIHk6cmV0dXJuIHA7Y2FzZSBkOnJldHVybiBmO2Nhc2UgXzpyZXR1cm4gdjtjYXNlIGI6cmV0dXJuIGx9cmV0dXJuIHJ9KSx0LmV4cG9ydHM9Z30sNTkxMToodCxyLGUpPT57dmFyIG49ZSg4ODU5KSxvPWUoNDI0OCksYT1lKDkyMTkpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSxpLHUscyl7dmFyIGM9MSZlLHA9dC5sZW5ndGgsZj1yLmxlbmd0aDtpZihwIT1mJiYhKGMmJmY+cCkpcmV0dXJuITE7dmFyIHY9cy5nZXQodCksbD1zLmdldChyKTtpZih2JiZsKXJldHVybiB2PT1yJiZsPT10O3ZhciBoPS0xLHg9ITAseT0yJmU/bmV3IG46dm9pZCAwO2ZvcihzLnNldCh0LHIpLHMuc2V0KHIsdCk7KytoPHA7KXt2YXIgZD10W2hdLF89cltoXTtpZihpKXZhciBiPWM/aShfLGQsaCxyLHQscyk6aShkLF8saCx0LHIscyk7aWYodm9pZCAwIT09Yil7aWYoYiljb250aW51ZTt4PSExO2JyZWFrfWlmKHkpe2lmKCFvKHIsZnVuY3Rpb24odCxyKXtpZighYSh5LHIpJiYoZD09PXR8fHUoZCx0LGUsaSxzKSkpcmV0dXJuIHkucHVzaChyKX0pKXt4PSExO2JyZWFrfX1lbHNlIGlmKGQhPT1fJiYhdShkLF8sZSxpLHMpKXt4PSExO2JyZWFrfX1yZXR1cm4gcy5kZWxldGUodCkscy5kZWxldGUocikseH19LDU5NTA6KHQscixlKT0+e3ZhciBuPWUoNjk1KSxvPWUoODk4NCksYT1lKDQ4OTQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gYSh0KT9uKHQpOm8odCl9fSw2MDA5Oih0LHIsZSk9Pnt0PWUubm1kKHQpO3ZhciBuPWUoNDg0MCksbz1yJiYhci5ub2RlVHlwZSYmcixhPW8mJnQmJiF0Lm5vZGVUeXBlJiZ0LGk9YSYmYS5leHBvcnRzPT09byYmbi5wcm9jZXNzLHU9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGEmJmEucmVxdWlyZSYmYS5yZXF1aXJlKCJ1dGlsIikudHlwZXN8fGkmJmkuYmluZGluZyYmaS5iaW5kaW5nKCJ1dGlsIil9Y2F0Y2godCl7fX0oKTt0LmV4cG9ydHM9dX0sNjAyNToodCxyLGUpPT57dmFyIG49ZSg1Mjg4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9dC5sZW5ndGg7ZS0tOylpZihuKHRbZV1bMF0scikpcmV0dXJuIGU7cmV0dXJuLTF9fSw2MTEwOih0LHIsZSk9Pnt2YXIgbj1lKDUwODMpLG89ZSgzOTIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPW8odCxyKTtyZXR1cm4gbihlKT9lOnZvaWQgMH19LDYxNTU6KHQscixlKT0+e3ZhciBuPWUoNDkzMiksbz1lKDc0MjIpLGE9ZSg1Mzg5KSxpPWUoNTEyOCksdT1lKDM5MzcpLHM9ZSg3MzAxKSxjPWUoMzcxNCkscD1lKDM0ODgpLGY9ZSg2NDQ5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUpe3I9ci5sZW5ndGg/bihyLGZ1bmN0aW9uKHQpe3JldHVybiBmKHQpP2Z1bmN0aW9uKHIpe3JldHVybiBvKHIsMT09PXQubGVuZ3RoP3RbMF06dCl9OnR9KTpbcF07dmFyIHY9LTE7cj1uKHIscyhhKSk7dmFyIGw9aSh0LGZ1bmN0aW9uKHQsZSxvKXtyZXR1cm57Y3JpdGVyaWE6bihyLGZ1bmN0aW9uKHIpe3JldHVybiByKHQpfSksaW5kZXg6Kyt2LHZhbHVlOnR9fSk7cmV0dXJuIHUobCxmdW5jdGlvbih0LHIpe3JldHVybiBjKHQscixlKX0pfX0sNjQ0OTp0PT57dmFyIHI9QXJyYXkuaXNBcnJheTt0LmV4cG9ydHM9cn0sNjU0NToodCxyLGUpPT57dmFyIG49ZSg2MTEwKShlKDkzMjUpLCJTZXQiKTt0LmV4cG9ydHM9bn0sNjY0OToodCxyLGUpPT57dmFyIG49ZSgzMjIxKSgpO3QuZXhwb3J0cz1ufSw2NzIxOih0LHIsZSk9Pnt2YXIgbj1lKDEwNDIpLG89T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXztpZihuKXt2YXIgZT1yW3RdO3JldHVybiJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fIj09PWU/dm9pZCAwOmV9cmV0dXJuIG8uY2FsbChyLHQpP3JbdF06dm9pZCAwfX0sNzA2ODoodCxyLGUpPT57dmFyIG49ZSg3MjE3KSxvPWUoNTkxMSksYT1lKDE5ODYpLGk9ZSg2ODkpLHU9ZSg1ODYxKSxzPWUoNjQ0OSksYz1lKDM2NTYpLHA9ZSg3MTY3KSxmPSJbb2JqZWN0IEFyZ3VtZW50c10iLHY9IltvYmplY3QgQXJyYXldIixsPSJbb2JqZWN0IE9iamVjdF0iLGg9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUseCx5LGQpe3ZhciBfPXModCksYj1zKHIpLGc9Xz92OnUodCksaj1iP3Y6dShyKSxPPShnPWc9PWY/bDpnKT09bCxtPShqPWo9PWY/bDpqKT09bCx3PWc9PWo7aWYodyYmYyh0KSl7aWYoIWMocikpcmV0dXJuITE7Xz0hMCxPPSExfWlmKHcmJiFPKXJldHVybiBkfHwoZD1uZXcgbiksX3x8cCh0KT9vKHQscixlLHgseSxkKTphKHQscixnLGUseCx5LGQpO2lmKCEoMSZlKSl7dmFyIEE9TyYmaC5jYWxsKHQsIl9fd3JhcHBlZF9fIiksTT1tJiZoLmNhbGwociwiX193cmFwcGVkX18iKTtpZihBfHxNKXt2YXIgej1BP3QudmFsdWUoKTp0LFM9TT9yLnZhbHVlKCk6cjtyZXR1cm4gZHx8KGQ9bmV3IG4pLHkoeixTLGUseCxkKX19cmV0dXJuISF3JiYoZHx8KGQ9bmV3IG4pLGkodCxyLGUseCx5LGQpKX19LDcxNjc6KHQscixlKT0+e3ZhciBuPWUoNDkwMSksbz1lKDczMDEpLGE9ZSg2MDA5KSxpPWEmJmEuaXNUeXBlZEFycmF5LHU9aT9vKGkpOm47dC5leHBvcnRzPXV9LDcxOTc6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZVt0XT09PXImJih2b2lkIDAhPT1yfHx0IGluIE9iamVjdChlKSl9fX0sNzIxNzoodCxyLGUpPT57dmFyIG49ZSg3OSksbz1lKDE0MjApLGE9ZSg5MzgpLGk9ZSgzNjA1KSx1PWUoOTgxNykscz1lKDk0NSk7ZnVuY3Rpb24gYyh0KXt2YXIgcj10aGlzLl9fZGF0YV9fPW5ldyBuKHQpO3RoaXMuc2l6ZT1yLnNpemV9Yy5wcm90b3R5cGUuY2xlYXI9byxjLnByb3RvdHlwZS5kZWxldGU9YSxjLnByb3RvdHlwZS5nZXQ9aSxjLnByb3RvdHlwZS5oYXM9dSxjLnByb3RvdHlwZS5zZXQ9cyx0LmV4cG9ydHM9Y30sNzIzNzp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gbnVsbD09cj92b2lkIDA6clt0XX19fSw3MjU1Oih0LHIsZSk9Pnt2YXIgbj1lKDc0MjIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIG4ocix0KX19fSw3Mjk2Oih0LHIsZSk9Pnt2YXIgbixvPWUoNTQ4MSksYT0obj0vW14uXSskLy5leGVjKG8mJm8ua2V5cyYmby5rZXlzLklFX1BST1RPfHwiIikpPyJTeW1ib2woc3JjKV8xLiIrbjoiIjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuISFhJiZhIGluIHR9fSw3MzAxOnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiB0KHIpfX19LDc0MjI6KHQscixlKT0+e3ZhciBuPWUoMTc2OSksbz1lKDc3OTcpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe2Zvcih2YXIgZT0wLGE9KHI9bihyLHQpKS5sZW5ndGg7bnVsbCE9dCYmZTxhOyl0PXRbbyhyW2UrK10pXTtyZXR1cm4gZSYmZT09YT90OnZvaWQgMH19LDc0NzM6dD0+e3ZhciByPUZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYobnVsbCE9dCl7dHJ5e3JldHVybiByLmNhbGwodCl9Y2F0Y2godCl7fXRyeXtyZXR1cm4gdCsiIn1jYXRjaCh0KXt9fXJldHVybiIifX0sNzUzNDoodCxyLGUpPT57dmFyIG49ZSgyNTUyKSxvPWUoMzQ2KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG8odCkmJiJbb2JqZWN0IEFyZ3VtZW50c10iPT1uKHQpfX0sNzU1NjoodCxyLGUpPT57dmFyIG49ZSgxODczKSxvPWUoNDkzMiksYT1lKDY0NDkpLGk9ZSg0Mzk0KSx1PW4/bi5wcm90b3R5cGU6dm9pZCAwLHM9dT91LnRvU3RyaW5nOnZvaWQgMDt0LmV4cG9ydHM9ZnVuY3Rpb24gdChyKXtpZigic3RyaW5nIj09dHlwZW9mIHIpcmV0dXJuIHI7aWYoYShyKSlyZXR1cm4gbyhyLHQpKyIiO2lmKGkocikpcmV0dXJuIHM/cy5jYWxsKHIpOiIiO3ZhciBlPXIrIiI7cmV0dXJuIjAiPT1lJiYxL3I9PS0xLzA/Ii0wIjplfX0sNzY3MDoodCxyLGUpPT57dmFyIG49ZSgyNjUxKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9bih0aGlzLHQpLmRlbGV0ZSh0KTtyZXR1cm4gdGhpcy5zaXplLT1yPzE6MCxyfX0sNzc5NzoodCxyLGUpPT57dmFyIG49ZSg0Mzk0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoInN0cmluZyI9PXR5cGVvZiB0fHxuKHQpKXJldHVybiB0O3ZhciByPXQrIiI7cmV0dXJuIjAiPT1yJiYxL3Q9PS0xLzA/Ii0wIjpyfX0sNzgyODoodCxyLGUpPT57dmFyIG49ZSg5MzI1KS5VaW50OEFycmF5O3QuZXhwb3J0cz1ufSw3OTc4Oih0LHIsZSk9Pnt2YXIgbj1lKDI3MCksbz1lKDgxNTYpLGE9ZSg2MzEpLGk9ZSg4NTg2KSx1PWUoNzU2KSxzPWUoNzE5NyksYz1lKDc3OTcpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiBpKHQpJiZ1KHIpP3MoYyh0KSxyKTpmdW5jdGlvbihlKXt2YXIgaT1vKGUsdCk7cmV0dXJuIHZvaWQgMD09PWkmJmk9PT1yP2EoZSx0KTpuKHIsaSwzKX19fSw4MDc3OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gbnVsbCE9dCYmciBpbiBPYmplY3QodCl9fSw4MDk2OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9LTEsbj1BcnJheSh0KTsrK2U8dDspbltlXT1yKGUpO3JldHVybiBufX0sODE1NjoodCxyLGUpPT57dmFyIG49ZSg3NDIyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUpe3ZhciBvPW51bGw9PXQ/dm9pZCAwOm4odCxyKTtyZXR1cm4gdm9pZCAwPT09bz9lOm99fSw4MjIzOih0LHIsZSk9Pnt2YXIgbj1lKDYxMTApKGUoOTMyNSksIk1hcCIpO3QuZXhwb3J0cz1ufSw4MzAzOih0LHIsZSk9Pnt2YXIgbj1lKDYxMTApKGUoOTMyNSksIldlYWtNYXAiKTt0LmV4cG9ydHM9bn0sODMyOToodCxyLGUpPT57dmFyIG49ZSg0ODk0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZnVuY3Rpb24oZSxvKXtpZihudWxsPT1lKXJldHVybiBlO2lmKCFuKGUpKXJldHVybiB0KGUsbyk7Zm9yKHZhciBhPWUubGVuZ3RoLGk9cj9hOi0xLHU9T2JqZWN0KGUpOyhyP2ktLTorK2k8YSkmJiExIT09byh1W2ldLGksdSk7KTtyZXR1cm4gZX19fSw4NTg2Oih0LHIsZSk9Pnt2YXIgbj1lKDY0NDkpLG89ZSg0Mzk0KSxhPS9cLnxcWyg/OlteW1xdXSp8KFsiJ10pKD86KD8hXDEpW15cXF18XFwuKSo/XDEpXF0vLGk9L15cdyokLzt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtpZihuKHQpKXJldHVybiExO3ZhciBlPXR5cGVvZiB0O3JldHVybiEoIm51bWJlciIhPWUmJiJzeW1ib2wiIT1lJiYiYm9vbGVhbiIhPWUmJm51bGwhPXQmJiFvKHQpKXx8aS50ZXN0KHQpfHwhYS50ZXN0KHQpfHxudWxsIT1yJiZ0IGluIE9iamVjdChyKX19LDg2NTU6KHQscixlKT0+e3ZhciBuPWUoNjAyNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBuKHRoaXMuX19kYXRhX18sdCk+LTF9fSw4ODU5Oih0LHIsZSk9Pnt2YXIgbj1lKDM2NjEpLG89ZSgxMzgwKSxhPWUoMTQ1OSk7ZnVuY3Rpb24gaSh0KXt2YXIgcj0tMSxlPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5fX2RhdGFfXz1uZXcgbjsrK3I8ZTspdGhpcy5hZGQodFtyXSl9aS5wcm90b3R5cGUuYWRkPWkucHJvdG90eXBlLnB1c2g9byxpLnByb3RvdHlwZS5oYXM9YSx0LmV4cG9ydHM9aX0sODk4NDoodCxyLGUpPT57dmFyIG49ZSg1NTI3KSxvPWUoMzY1MCksYT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZighbih0KSlyZXR1cm4gbyh0KTt2YXIgcj1bXTtmb3IodmFyIGUgaW4gT2JqZWN0KHQpKWEuY2FsbCh0LGUpJiYiY29uc3RydWN0b3IiIT1lJiZyLnB1c2goZSk7cmV0dXJuIHJ9fSw5MjE5OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdC5oYXMocil9fSw5MzI1Oih0LHIsZSk9Pnt2YXIgbj1lKDQ4NDApLG89Im9iamVjdCI9PXR5cGVvZiBzZWxmJiZzZWxmJiZzZWxmLk9iamVjdD09PU9iamVjdCYmc2VsZixhPW58fG98fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7dC5leHBvcnRzPWF9LDkzMjY6KHQscixlKT0+e3ZhciBuPWUoMTc2OSksbz1lKDI0MjgpLGE9ZSg2NDQ5KSxpPWUoMzYxKSx1PWUoMjk0KSxzPWUoNzc5Nyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlKXtmb3IodmFyIGM9LTEscD0ocj1uKHIsdCkpLmxlbmd0aCxmPSExOysrYzxwOyl7dmFyIHY9cyhyW2NdKTtpZighKGY9bnVsbCE9dCYmZSh0LHYpKSlicmVhazt0PXRbdl19cmV0dXJuIGZ8fCsrYyE9cD9mOiEhKHA9bnVsbD09dD8wOnQubGVuZ3RoKSYmdShwKSYmaSh2LHApJiYoYSh0KXx8byh0KSl9fSw5MzUwOnQ9Pnt2YXIgcj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gci5jYWxsKHQpfX0sOTc3MDp0PT57dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoLG89MCxhPVtdOysrZTxuOyl7dmFyIGk9dFtlXTtyKGksZSx0KSYmKGFbbysrXT1pKX1yZXR1cm4gYX19LDk4MTc6dD0+e3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModCl9fSw5OTM1OnQ9Pnt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm4hMX19fSxyPXt9O2Z1bmN0aW9uIGUobil7dmFyIG89cltuXTtpZih2b2lkIDAhPT1vKXJldHVybiBvLmV4cG9ydHM7dmFyIGE9cltuXT17aWQ6bixsb2FkZWQ6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbbl0oYSxhLmV4cG9ydHMsZSksYS5sb2FkZWQ9ITAsYS5leHBvcnRzfWUubj10PT57dmFyIHI9dCYmdC5fX2VzTW9kdWxlPygpPT50LmRlZmF1bHQ6KCk9PnQ7cmV0dXJuIGUuZChyLHthOnJ9KSxyfSxlLmQ9KHQscik9Pntmb3IodmFyIG4gaW4gcillLm8ocixuKSYmIWUubyh0LG4pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHtlbnVtZXJhYmxlOiEwLGdldDpyW25dfSl9LGUuZz1mdW5jdGlvbigpe2lmKCJvYmplY3QiPT10eXBlb2YgZ2xvYmFsVGhpcylyZXR1cm4gZ2xvYmFsVGhpczt0cnl7cmV0dXJuIHRoaXN8fG5ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpfWNhdGNoKHQpe2lmKCJvYmplY3QiPT10eXBlb2Ygd2luZG93KXJldHVybiB3aW5kb3d9fSgpLGUubz0odCxyKT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsciksZS5ubWQ9dD0+KHQucGF0aHM9W10sdC5jaGlsZHJlbnx8KHQuY2hpbGRyZW49W10pLHQpO3ZhciBuPXt9O2UuZChuLHtIOigpPT5wfSk7dmFyIG89ZSg4MTU2KSxhPWUubihvKSxpPWUoMjg3NyksdT1lLm4oaSkscz1lKDIwMTMpLGM9ZS5uKHMpO2NvbnN0IHA9KHtkYXRhOnQsYXJndW1lbnRzOntzb3J0OnIsZGlyOmV9fSk9Pntjb25zdCBuPWMoKSh0LnRoaXNNb250aENvbnN1bXB0aW9uLCJpdGVtX2lkIiksbz1jKCkodC5sYXN0TW9udGhDb25zdW1wdGlvbiwiaXRlbV9pZCIpLGk9YygpKHQudHdvTW9udGhzQWdvQ29uc3VtcHRpb24sIml0ZW1faWQiKSxzPWMoKSh0LmV4cGlyaW5nSW5TaXhNb250aHMsIml0ZW1faWQiKSxwPWMoKSh0LmV4cGlyaW5nSW5Ud2VsdmVNb250aHMsIml0ZW1faWQiKSxmPWMoKSh0LnN0b2NrT25PcmRlciwiaXRlbV9pZCIpO2xldCB2PXQuaXRlbXMubm9kZXMubWFwKHQ9Pih7Li4udCxtb250aENvbnN1bXB0aW9uOm5bdC5pZF0/LlswXT8ucXVhbnRpdHl8fDAsbGFzdE1vbnRoQ29uc3VtcHRpb246b1t0LmlkXT8uWzBdPy5xdWFudGl0eXx8MCx0d29Nb250aHNBZ29Db25zdW1wdGlvbjppW3QuaWRdPy5bMF0/LnF1YW50aXR5fHwwLGV4cGlyaW5nSW5TaXhNb250aHM6c1t0LmlkXT8uWzBdPy5xdWFudGl0eXx8MCxleHBpcmluZ0luVHdlbHZlTW9udGhzOnBbdC5pZF0/LlswXT8ucXVhbnRpdHl8fDAsc3RvY2tPbk9yZGVyOk1hdGgubWF4KDAsZlt0LmlkXT8uWzBdPy5xdWFudGl0eXx8MCksU09IOnQuc3RhdHM/LnN0b2NrT25IYW5kfHwwLE1PUzp0LnN0YXRzPy5hdmFpbGFibGVNb250aHNPZlN0b2NrT25IYW5kfHwwLEFNQzp0LnN0YXRzPy5hdmVyYWdlTW9udGhseUNvbnN1bXB0aW9ufHwwLEFNQzEyOnQuQU1DMTJNb250aHMuYXZlcmFnZU1vbnRobHlDb25zdW1wdGlvbnx8MCxBTUMyNDp0LkFNQzI0TW9udGhzLmF2ZXJhZ2VNb250aGx5Q29uc3VtcHRpb258fDB9KSk7cmV0dXJue2RhdGE6e2l0ZW1zOntub2Rlczp1KCkodix0PT57Y29uc3QgZT1hKCkodCxyfHwibmFtZSIpO3JldHVybiJzdHJpbmciPT10eXBlb2YgZT9lLnRvTG9jYWxlTG93ZXJDYXNlKCk6ZX0sZXx8ImFzYyIpfX19fSxmPW4uSDtleHBvcnR7ZiBhcyBjb252ZXJ0X2RhdGF9Ow==",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "stockOnOrder": {
            "type": "SQLQuery",
            "data": {
              "name": "stockOnOrder",
              "query_sqlite": "SELECT \n    item.id as item_id,\n    SUM(rl.requested_quantity) - COALESCE(SUM(il.pack_size * il.number_of_packs), 0) AS quantity\nFROM item\nINNER JOIN item_link i ON item.id = i.item_id\nLEFT JOIN requisition_line rl ON rl.item_link_id = i.id\nLEFT JOIN requisition r ON r.id = rl.requisition_id\nLEFT JOIN invoice ON invoice.requisition_id = r.id\nLEFT JOIN invoice_line il on invoice.id = il.invoice_id AND il.item_link_id = i.id\nWHERE r.store_id = $storeId AND r.type = 'REQUEST' AND r.status = 'SENT'\nGROUP BY 1",
              "query_postgres": "SELECT \n    item.id as item_id,\n    SUM(rl.requested_quantity) - COALESCE(SUM(il.pack_size * il.number_of_packs), 0) AS quantity\nFROM item\nINNER JOIN item_link i ON item.id = i.item_id\nLEFT JOIN requisition_line rl ON rl.item_link_id = i.id\nLEFT JOIN requisition r ON r.id = rl.requisition_id\nLEFT JOIN invoice ON invoice.requisition_id = r.id\nLEFT JOIN invoice_line il on invoice.id = il.invoice_id AND il.item_link_id = i.id\nWHERE r.store_id = $storeId AND r.type = 'REQUEST' AND r.status = 'SENT'\nGROUP BY 1"
            }
          },
          "twoMonthsAgoConsumption": {
            "type": "SQLQuery",
            "data": {
              "name": "twoMonthsAgoConsumption",
              "query_sqlite": "WITH\n    last_month AS (\n        SELECT date('now', 'start of month', '-1 month') AS last_month\n    ),\n    two_months_ago AS (\n        SELECT date('now', 'start of month', '-2 month') AS two_months_ago\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, two_months_ago, last_month\nWHERE date >= two_months_ago AND date < last_month AND store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    last_month AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '1 month') AS last_month\n    ),\n    two_months_ago AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '2 month') AS two_months_ago\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, two_months_ago, last_month\nWHERE date >= two_months_ago AND date < last_month AND store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container table tr:last-child td {\n  border-bottom: none;\n}\n\n.container > table > thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container > table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.status span {\n  padding: 2px;\n  border-radius: 10px;\n}\n"
          },
          "lastMonthConsumption": {
            "type": "SQLQuery",
            "data": {
              "name": "lastMonthConsumption",
              "query_sqlite": "WITH\n    this_month AS (\n        SELECT date('now', 'start of month') AS this_month\n    ),\n    last_month AS (\n        SELECT date('now', 'start of month', '-1 month') AS last_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month, last_month\nWHERE date >= last_month AND date < this_month AND store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    ),\n    last_month AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '1 month') AS last_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month, last_month\nWHERE date >= last_month AND date < this_month AND store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>\n  {% include \"style.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"report.stock-on-hand\", f=\"Stock on hand\")}}</td>\n        <td>{{t(k=\"report.stock-on-order\", f=\"Stock on order\")}}</td>\n        <td>{{t(k=\"report.amc-12-months\", f=\"AMC (12 months)\")}}</td>\n        <td>{{t(k=\"report.amc-24-months\", f=\"AMC (24 months)\")}}</td>\n        <td>{{t(k=\"report.amc-for-lookback\", f=\"AMC (lookback period)\")}}</td>\n        <td>{{t(k=\"report.months-cover\", f=\"Months cover\")}}</td>\n        <td>\n          {{t(k=\"report.usage-this-month\", f=\"Monthly usage (this month)\")}}\n        </td>\n        <td>\n          {{t(k=\"report.usage-last-month\", f=\"Monthly usage (last month)\")}}\n        </td>\n        <td>\n          {{t(k=\"report.usage-2-months-prior\", f=\"Monthly usage (2 months\n          ago)\")}}\n        </td>\n        <td>{{t(k=\"report.expiring-6-months\", f=\"Expiring in 6 months\")}}</td>\n        <td>{{t(k=\"report.expiring-12-months\", f=\"Expiring in 12 months\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for item in data.items.nodes %}\n      <tr>\n        <td>{{item.code}}</td>\n        <td>{{item.name}}</td>\n        <td>{{item.SOH | round( precision=1)}}</td>\n        <td>{{item.stockOnOrder}}</td>\n        <td>{{item.AMC12 | round( precision=1)}}</td>\n        <td>{{item.AMC24 | round( precision=1)}}</td>\n        <td>{{item.AMC | round( precision=1)}}</td>\n        <td>{{item.MOS | round( precision=1)}}</td>\n        <td>{{item.monthConsumption}}</td>\n        <td>{{item.lastMonthConsumption  | round( precision=1)}}</td>\n        <td>{{item.twoMonthsAgoConsumption | round( precision=1)}}</td>\n        <td>{{item.expiringInSixMonths}}</td>\n        <td>{{item.expiringInTwelveMonths}}</td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          },
          "thisMonthConsumption": {
            "type": "SQLQuery",
            "data": {
              "name": "thisMonthConsumption",
              "query_sqlite": "WITH\n    this_month AS (\n        SELECT date('now', 'start of month') AS this_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month\nWHERE date >= this_month AND store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month\nWHERE date >= this_month AND store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "expiringInTwelveMonths": {
            "type": "SQLQuery",
            "data": {
              "name": "expiringInTwelveMonths",
              "query_sqlite": "WITH \n    this_month AS (\n        SELECT date('now') AS this_month\n    ),\n    twelve_months AS (\n        SELECT date('now', '+12 months') AS twelve_months\n    )\nSELECT \n    stock_line.id,\n    i.item_id,\n    SUM(stock_line.available_number_of_packs) AS quantity\nFROM stock_line, twelve_months, this_month\nINNER JOIN item_link i ON i.id = stock_line.item_link_id\nWHERE stock_line.expiry_date < twelve_months AND stock_line.store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH \n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    ),\n    twelve_months AS (\n        SELECT date_trunc('month', CURRENT_DATE + interval '12 months') AS twelve_months\n    )\nSELECT \n    s.id,\n    i.item_id,\n    SUM(s.available_number_of_packs) AS quantity\nFROM stock_line s\nINNER JOIN item_link i ON i.id = s.item_link_id\nINNER JOIN this_month ON true\nINNER JOIN twelve_months ON true\nWHERE s.expiry_date < twelve_months AND s.store_id = $storeId\nGROUP BY s.id, i.item_id"
            }
          },
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query ItemUsage($storeId: String!, $itemCode: String, $itemName: String) {\n  items(\n    storeId: $storeId\n    filter: {\n      code: { like: $itemCode }\n      name: { like: $itemName }\n      isVisibleOrOnHand: true\n      isActive: true\n    }\n  ) {\n    ... on ItemConnector {\n      nodes {\n        id\n        code\n        name\n        stats: stats(storeId: $storeId) {\n          totalConsumption\n          availableMonthsOfStockOnHand\n          stockOnHand\n          averageMonthlyConsumption\n        }\n        AMC12Months: stats(storeId: $storeId, amcLookbackMonths: 12) {\n          averageMonthlyConsumption\n        }\n        AMC24Months: stats(storeId: $storeId, amcLookbackMonths: 24) {\n          averageMonthlyConsumption\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "expiringInSixMonths": {
            "type": "SQLQuery",
            "data": {
              "name": "expiringInSixMonths",
              "query_sqlite": "WITH \n    this_month AS (\n        SELECT date('now') AS this_month\n    ),\n    six_months AS (\n        SELECT date('now', '+6 months') AS six_months\n    )\nSELECT \n    stock_line.id,\n    i.item_id,\n    SUM(stock_line.available_number_of_packs) AS quantity\nFROM stock_line, six_months, this_month\nINNER JOIN item_link i ON i.id = stock_line.item_link_id\nWHERE stock_line.expiry_date < six_months AND stock_line.store_id = $storeId\nGROUP BY i.item_id\n",
              "query_postgres": "WITH \n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    ),\n    six_months AS (\n        SELECT date_trunc('month', CURRENT_DATE + interval '6 months') AS six_months\n    )\nSELECT \n    s.id,\n    i.item_id,\n    SUM(s.available_number_of_packs) AS quantity\nFROM stock_line s\nINNER JOIN item_link i ON i.id = s.item_link_id\nINNER JOIN this_month ON true\nINNER JOIN six_months ON true\nWHERE s.expiry_date < six_months AND s.store_id = $storeId\nGROUP BY s.id, i.item_id\n"
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "StockAndItems",
      "argument_schema_id": "for_report_item-usage_2_16_0_false",
      "comment": null,
      "is_custom": false,
      "version": "2.16.0",
      "code": "item-usage",
      "form_schema": {
        "id": "for_report_item-usage_2_16_0_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "format": "SortToggle",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "itemCode": {
                  "description": "Item Code",
                  "type": "string"
                },
                "itemName": {
                  "description": "Item Name",
                  "type": "string"
                },
                "monthlyConsumptionLookBackPeriod": {
                  "description": "Average Monthly Consumption Look Back Period",
                  "type": "number"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "name",
                    "code",
                    "SOH",
                    "MOS",
                    "monthConsumption",
                    "lastMonthConsumption",
                    "twoMonthsAgoConsumption",
                    "expiringInSixMonths",
                    "expiringInTwelveMonths",
                    "stockOnOrder",
                    "AMC12",
                    "AMC24"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.item-code",
              "options": {
                "useDebounce": false
              },
              "scope": "#/properties/itemCode",
              "type": "Control"
            },
            {
              "label": "T#report.item-name",
              "scope": "#/properties/itemName",
              "type": "Control"
            },
            {
              "label": "T#report.amc-lookback",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25,
                "readonly": true
              },
              "scope": "#/properties/monthlyConsumptionLookBackPeriod",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "name",
                    "T#report.item-name"
                  ],
                  [
                    "code",
                    "T#label.code"
                  ],
                  [
                    "SOH",
                    "T#report.stock-on-hand"
                  ],
                  [
                    "MOS",
                    "T#report.months-cover"
                  ],
                  [
                    "monthConsumption",
                    "T#report.consumption-month"
                  ],
                  [
                    "lastMonthConsumption",
                    "T#report.consumption-last-month"
                  ],
                  [
                    "twoMonthsAgoConsumption",
                    "T#report.consumption-two-months-ago"
                  ],
                  [
                    "expiringInSixMonths",
                    "T#report.expiring-6-months"
                  ],
                  [
                    "expiringInTwelveMonths",
                    "T#report.expiring-12-months"
                  ],
                  [
                    "stockOnOrder",
                    "T#report.stock-on-order"
                  ],
                  [
                    "AMC12",
                    "T#report.amc-12-months"
                  ],
                  [
                    "AMC24",
                    "T#report.amc-24-months"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "scope": "#/properties/dir",
              "type": "SortToggle"
            }
          ],
          "type": "VerticalLayout"
        }
      },
      "excel_template_buffer": null
    },
    {
      "id": "item-usage_2_6_3_false",
      "name": "Item Usage",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql",
            "thisMonthConsumption",
            "lastMonthConsumption",
            "twoMonthsAgoConsumption",
            "expiringInSixMonths",
            "expiringInTwelveMonths",
            "stockOnOrder",
            "AMCTwelve",
            "AMCTwentyFour"
          ],
          "convert_data": "dmFyIHQ9ezIodCxyLGUpe3ZhciBuPWUoMjE5OSksbz1lKDQ2NjQpLGE9ZSg1OTUwKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG4odCxhLG8pfX0sNzkodCxyLGUpe3ZhciBuPWUoMzcwMiksbz1lKDgwKSxhPWUoNDczOSksaT1lKDg2NTUpLHU9ZSgxMTc1KTtmdW5jdGlvbiBzKHQpe3ZhciByPS0xLGU9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytyPGU7KXt2YXIgbj10W3JdO3RoaXMuc2V0KG5bMF0sblsxXSl9fXMucHJvdG90eXBlLmNsZWFyPW4scy5wcm90b3R5cGUuZGVsZXRlPW8scy5wcm90b3R5cGUuZ2V0PWEscy5wcm90b3R5cGUuaGFzPWkscy5wcm90b3R5cGUuc2V0PXUsdC5leHBvcnRzPXN9LDgwKHQscixlKXt2YXIgbj1lKDYwMjUpLG89QXJyYXkucHJvdG90eXBlLnNwbGljZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXyxlPW4ocix0KTtyZXR1cm4hKGU8MHx8KGU9PXIubGVuZ3RoLTE/ci5wb3AoKTpvLmNhbGwocixlLDEpLC0tdGhpcy5zaXplLDApKX19LDEwNCh0LHIsZSl7dmFyIG49ZSgzNjYxKTtmdW5jdGlvbiBvKHQscil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHR8fG51bGwhPXImJiJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoIkV4cGVjdGVkIGEgZnVuY3Rpb24iKTt2YXIgZT1mdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cyxvPXI/ci5hcHBseSh0aGlzLG4pOm5bMF0sYT1lLmNhY2hlO2lmKGEuaGFzKG8pKXJldHVybiBhLmdldChvKTt2YXIgaT10LmFwcGx5KHRoaXMsbik7cmV0dXJuIGUuY2FjaGU9YS5zZXQobyxpKXx8YSxpfTtyZXR1cm4gZS5jYWNoZT1uZXcoby5DYWNoZXx8biksZX1vLkNhY2hlPW4sdC5leHBvcnRzPW99LDI3MCh0LHIsZSl7dmFyIG49ZSg3MDY4KSxvPWUoMzQ2KTt0LmV4cG9ydHM9ZnVuY3Rpb24gdChyLGUsYSxpLHUpe3JldHVybiByPT09ZXx8KG51bGw9PXJ8fG51bGw9PWV8fCFvKHIpJiYhbyhlKT9yIT1yJiZlIT1lOm4ocixlLGEsaSx0LHUpKX19LDI4OSh0LHIsZSl7dmFyIG49ZSgyNjUxKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG4odGhpcyx0KS5nZXQodCl9fSwyOTQodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdCYmdD4tMSYmdCUxPT0wJiZ0PD05MDA3MTk5MjU0NzQwOTkxfX0sMzE3KHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgcj0tMSxlPUFycmF5KHQuc2l6ZSk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0LG4pe2VbKytyXT1bbix0XX0pLGV9fSwzNDYodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10JiYib2JqZWN0Ij09dHlwZW9mIHR9fSwzNjEodCl7dmFyIHI9L14oPzowfFsxLTldXGQqKSQvO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuPXR5cGVvZiB0O3JldHVybiEhKGU9bnVsbD09ZT85MDA3MTk5MjU0NzQwOTkxOmUpJiYoIm51bWJlciI9PW58fCJzeW1ib2wiIT1uJiZyLnRlc3QodCkpJiZ0Pi0xJiZ0JTE9PTAmJnQ8ZX19LDM5Mih0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gbnVsbD09dD92b2lkIDA6dFtyXX19LDU4Myh0LHIsZSl7dmFyIG49ZSg3MjM3KSxvPWUoNzI1NSksYT1lKDg1ODYpLGk9ZSg3Nzk3KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGEodCk/bihpKHQpKTpvKHQpfX0sNjMxKHQscixlKXt2YXIgbj1lKDgwNzcpLG89ZSg5MzI2KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gbnVsbCE9dCYmbyh0LHIsbil9fSw2NDEodCxyLGUpe3ZhciBuPWUoNjY0OSksbz1lKDU5NTApO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiB0JiZuKHQscixvKX19LDY1OSh0LHIsZSl7dmFyIG49ZSgxODczKSxvPU9iamVjdC5wcm90b3R5cGUsYT1vLmhhc093blByb3BlcnR5LGk9by50b1N0cmluZyx1PW4/bi50b1N0cmluZ1RhZzp2b2lkIDA7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPWEuY2FsbCh0LHUpLGU9dFt1XTt0cnl7dFt1XT12b2lkIDA7dmFyIG49ITB9Y2F0Y2godCl7fXZhciBvPWkuY2FsbCh0KTtyZXR1cm4gbiYmKHI/dFt1XT1lOmRlbGV0ZSB0W3VdKSxvfX0sNjg5KHQscixlKXt2YXIgbj1lKDIpLG89T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUsYSxpLHUpe3ZhciBzPTEmZSxjPW4odCkscD1jLmxlbmd0aDtpZihwIT1uKHIpLmxlbmd0aCYmIXMpcmV0dXJuITE7Zm9yKHZhciBmPXA7Zi0tOyl7dmFyIHY9Y1tmXTtpZighKHM/diBpbiByOm8uY2FsbChyLHYpKSlyZXR1cm4hMX12YXIgbD11LmdldCh0KSxoPXUuZ2V0KHIpO2lmKGwmJmgpcmV0dXJuIGw9PXImJmg9PXQ7dmFyIHg9ITA7dS5zZXQodCxyKSx1LnNldChyLHQpO2Zvcih2YXIgeT1zOysrZjxwOyl7dmFyIGQ9dFt2PWNbZl1dLF89clt2XTtpZihhKXZhciBiPXM/YShfLGQsdixyLHQsdSk6YShkLF8sdix0LHIsdSk7aWYoISh2b2lkIDA9PT1iP2Q9PT1ffHxpKGQsXyxlLGEsdSk6Yikpe3g9ITE7YnJlYWt9eXx8KHk9ImNvbnN0cnVjdG9yIj09dil9aWYoeCYmIXkpe3ZhciBnPXQuY29uc3RydWN0b3Isaj1yLmNvbnN0cnVjdG9yO2c9PWp8fCEoImNvbnN0cnVjdG9yImluIHQpfHwhKCJjb25zdHJ1Y3RvciJpbiByKXx8ImZ1bmN0aW9uIj09dHlwZW9mIGcmJmcgaW5zdGFuY2VvZiBnJiYiZnVuY3Rpb24iPT10eXBlb2YgaiYmaiBpbnN0YW5jZW9mIGp8fCh4PSExKX1yZXR1cm4gdS5kZWxldGUodCksdS5kZWxldGUocikseH19LDY5NSh0LHIsZSl7dmFyIG49ZSg4MDk2KSxvPWUoMjQyOCksYT1lKDY0NDkpLGk9ZSgzNjU2KSx1PWUoMzYxKSxzPWUoNzE2NyksYz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPWEodCkscD0hZSYmbyh0KSxmPSFlJiYhcCYmaSh0KSx2PSFlJiYhcCYmIWYmJnModCksbD1lfHxwfHxmfHx2LGg9bD9uKHQubGVuZ3RoLFN0cmluZyk6W10seD1oLmxlbmd0aDtmb3IodmFyIHkgaW4gdCkhciYmIWMuY2FsbCh0LHkpfHxsJiYoImxlbmd0aCI9PXl8fGYmJigib2Zmc2V0Ij09eXx8InBhcmVudCI9PXkpfHx2JiYoImJ1ZmZlciI9PXl8fCJieXRlTGVuZ3RoIj09eXx8ImJ5dGVPZmZzZXQiPT15KXx8dSh5LHgpKXx8aC5wdXNoKHkpO3JldHVybiBofX0sNzU2KHQscixlKXt2YXIgbj1lKDM4MDUpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dCYmIW4odCl9fSw3NzYodCxyLGUpe3ZhciBuPWUoNzU2KSxvPWUoNTk1MCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj1vKHQpLGU9ci5sZW5ndGg7ZS0tOyl7dmFyIGE9cltlXSxpPXRbYV07cltlXT1bYSxpLG4oaSldfXJldHVybiByfX0sOTA5KHQscixlKXt2YXIgbj1lKDY0MSksbz1lKDgzMjkpKG4pO3QuZXhwb3J0cz1vfSw5MzgodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX19kYXRhX18sZT1yLmRlbGV0ZSh0KTtyZXR1cm4gdGhpcy5zaXplPXIuc2l6ZSxlfX0sOTQ1KHQscixlKXt2YXIgbj1lKDc5KSxvPWUoODIyMyksYT1lKDM2NjEpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPXRoaXMuX19kYXRhX187aWYoZSBpbnN0YW5jZW9mIG4pe3ZhciBpPWUuX19kYXRhX187aWYoIW98fGkubGVuZ3RoPDE5OSlyZXR1cm4gaS5wdXNoKFt0LHJdKSx0aGlzLnNpemU9KytlLnNpemUsdGhpcztlPXRoaXMuX19kYXRhX189bmV3IGEoaSl9cmV0dXJuIGUuc2V0KHQsciksdGhpcy5zaXplPWUuc2l6ZSx0aGlzfX0sMTA0Mih0LHIsZSl7dmFyIG49ZSg2MTEwKShPYmplY3QsImNyZWF0ZSIpO3QuZXhwb3J0cz1ufSwxMTc1KHQscixlKXt2YXIgbj1lKDYwMjUpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPXRoaXMuX19kYXRhX18sbz1uKGUsdCk7cmV0dXJuIG88MD8oKyt0aGlzLnNpemUsZS5wdXNoKFt0LHJdKSk6ZVtvXVsxXT1yLHRoaXN9fSwxMzgwKHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5zZXQodCwiX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyIpLHRoaXN9fSwxNDIwKHQscixlKXt2YXIgbj1lKDc5KTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPW5ldyBuLHRoaXMuc2l6ZT0wfX0sMTQ1OSh0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKHQpfX0sMTU0OSh0LHIsZSl7dmFyIG49ZSgyMDMyKSxvPWUoMzg2MiksYT1lKDY3MjEpLGk9ZSgyNzQ5KSx1PWUoNTc0OSk7ZnVuY3Rpb24gcyh0KXt2YXIgcj0tMSxlPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrcjxlOyl7dmFyIG49dFtyXTt0aGlzLnNldChuWzBdLG5bMV0pfX1zLnByb3RvdHlwZS5jbGVhcj1uLHMucHJvdG90eXBlLmRlbGV0ZT1vLHMucHJvdG90eXBlLmdldD1hLHMucHJvdG90eXBlLmhhcz1pLHMucHJvdG90eXBlLnNldD11LHQuZXhwb3J0cz1zfSwxNzY5KHQscixlKXt2YXIgbj1lKDY0NDkpLG89ZSg4NTg2KSxhPWUoMTgwMiksaT1lKDMyMjIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiBuKHQpP3Q6byh0LHIpP1t0XTphKGkodCkpfX0sMTc5OSh0LHIsZSl7dmFyIG49ZSg3MjE3KSxvPWUoMjcwKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUsYSl7dmFyIGk9ZS5sZW5ndGgsdT1pLHM9IWE7aWYobnVsbD09dClyZXR1cm4hdTtmb3IodD1PYmplY3QodCk7aS0tOyl7dmFyIGM9ZVtpXTtpZihzJiZjWzJdP2NbMV0hPT10W2NbMF1dOiEoY1swXWluIHQpKXJldHVybiExfWZvcig7KytpPHU7KXt2YXIgcD0oYz1lW2ldKVswXSxmPXRbcF0sdj1jWzFdO2lmKHMmJmNbMl0pe2lmKHZvaWQgMD09PWYmJiEocCBpbiB0KSlyZXR1cm4hMX1lbHNle3ZhciBsPW5ldyBuO2lmKGEpdmFyIGg9YShmLHYscCx0LHIsbCk7aWYoISh2b2lkIDA9PT1oP28odixmLDMsYSxsKTpoKSlyZXR1cm4hMX19cmV0dXJuITB9fSwxODAyKHQscixlKXt2YXIgbj1lKDIyMjQpLG89L1teLltcXV0rfFxbKD86KC0/XGQrKD86XC5cZCspPyl8KFsiJ10pKCg/Oig/IVwyKVteXFxdfFxcLikqPylcMilcXXwoPz0oPzpcLnxcW1xdKSg/OlwufFxbXF18JCkpL2csYT0vXFwoXFwpPy9nLGk9bihmdW5jdGlvbih0KXt2YXIgcj1bXTtyZXR1cm4gNDY9PT10LmNoYXJDb2RlQXQoMCkmJnIucHVzaCgiIiksdC5yZXBsYWNlKG8sZnVuY3Rpb24odCxlLG4sbyl7ci5wdXNoKG4/by5yZXBsYWNlKGEsIiQxIik6ZXx8dCl9KSxyfSk7dC5leHBvcnRzPWl9LDE4NzModCxyLGUpe3ZhciBuPWUoOTMyNSkuU3ltYm9sO3QuZXhwb3J0cz1ufSwxODgyKHQscixlKXt2YXIgbj1lKDI1NTIpLG89ZSgzODA1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoIW8odCkpcmV0dXJuITE7dmFyIHI9bih0KTtyZXR1cm4iW29iamVjdCBGdW5jdGlvbl0iPT1yfHwiW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0iPT1yfHwiW29iamVjdCBBc3luY0Z1bmN0aW9uXSI9PXJ8fCJbb2JqZWN0IFByb3h5XSI9PXJ9fSwxOTg2KHQscixlKXt2YXIgbj1lKDE4NzMpLG89ZSg3ODI4KSxhPWUoNTI4OCksaT1lKDU5MTEpLHU9ZSgzMTcpLHM9ZSg0MjQ3KSxjPW4/bi5wcm90b3R5cGU6dm9pZCAwLHA9Yz9jLnZhbHVlT2Y6dm9pZCAwO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSxuLGMsZix2KXtzd2l0Y2goZSl7Y2FzZSJbb2JqZWN0IERhdGFWaWV3XSI6aWYodC5ieXRlTGVuZ3RoIT1yLmJ5dGVMZW5ndGh8fHQuYnl0ZU9mZnNldCE9ci5ieXRlT2Zmc2V0KXJldHVybiExO3Q9dC5idWZmZXIscj1yLmJ1ZmZlcjtjYXNlIltvYmplY3QgQXJyYXlCdWZmZXJdIjpyZXR1cm4hKHQuYnl0ZUxlbmd0aCE9ci5ieXRlTGVuZ3RofHwhZihuZXcgbyh0KSxuZXcgbyhyKSkpO2Nhc2UiW29iamVjdCBCb29sZWFuXSI6Y2FzZSJbb2JqZWN0IERhdGVdIjpjYXNlIltvYmplY3QgTnVtYmVyXSI6cmV0dXJuIGEoK3QsK3IpO2Nhc2UiW29iamVjdCBFcnJvcl0iOnJldHVybiB0Lm5hbWU9PXIubmFtZSYmdC5tZXNzYWdlPT1yLm1lc3NhZ2U7Y2FzZSJbb2JqZWN0IFJlZ0V4cF0iOmNhc2UiW29iamVjdCBTdHJpbmddIjpyZXR1cm4gdD09cisiIjtjYXNlIltvYmplY3QgTWFwXSI6dmFyIGw9dTtjYXNlIltvYmplY3QgU2V0XSI6dmFyIGg9MSZuO2lmKGx8fChsPXMpLHQuc2l6ZSE9ci5zaXplJiYhaClyZXR1cm4hMTt2YXIgeD12LmdldCh0KTtpZih4KXJldHVybiB4PT1yO258PTIsdi5zZXQodCxyKTt2YXIgeT1pKGwodCksbChyKSxuLGMsZix2KTtyZXR1cm4gdi5kZWxldGUodCkseTtjYXNlIltvYmplY3QgU3ltYm9sXSI6aWYocClyZXR1cm4gcC5jYWxsKHQpPT1wLmNhbGwocil9cmV0dXJuITF9fSwyZTModCxyLGUpe3ZhciBuPWUoMzk0NSksbz1lKDI0MjkpLGE9ZSg1Mzg5KSxpPWUoNjQ0OSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIGZ1bmN0aW9uKGUsdSl7dmFyIHM9aShlKT9uOm8sYz1yP3IoKTp7fTtyZXR1cm4gcyhlLHQsYSh1LDIpLGMpfX19LDIwMTModCxyLGUpe3ZhciBuPWUoMzM2MCksbz1lKDJlMyksYT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGk9byhmdW5jdGlvbih0LHIsZSl7YS5jYWxsKHQsZSk/dFtlXS5wdXNoKHIpOm4odCxlLFtyXSl9KTt0LmV4cG9ydHM9aX0sMjAzMih0LHIsZSl7dmFyIG49ZSgxMDQyKTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPW4/bihudWxsKTp7fSx0aGlzLnNpemU9MH19LDIxOTkodCxyLGUpe3ZhciBuPWUoNDUyOCksbz1lKDY0NDkpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSl7dmFyIGE9cih0KTtyZXR1cm4gbyh0KT9hOm4oYSxlKHQpKX19LDIyMjQodCxyLGUpe3ZhciBuPWUoMTA0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9bih0LGZ1bmN0aW9uKHQpe3JldHVybiA1MDA9PT1lLnNpemUmJmUuY2xlYXIoKSx0fSksZT1yLmNhY2hlO3JldHVybiByfX0sMjQyOCh0LHIsZSl7dmFyIG49ZSg3NTM0KSxvPWUoMzQ2KSxhPU9iamVjdC5wcm90b3R5cGUsaT1hLmhhc093blByb3BlcnR5LHU9YS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxzPW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKT9uOmZ1bmN0aW9uKHQpe3JldHVybiBvKHQpJiZpLmNhbGwodCwiY2FsbGVlIikmJiF1LmNhbGwodCwiY2FsbGVlIil9O3QuZXhwb3J0cz1zfSwyNDI5KHQscixlKXt2YXIgbj1lKDkwOSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlLG8pe3JldHVybiBuKHQsZnVuY3Rpb24odCxuLGEpe3Iobyx0LGUodCksYSl9KSxvfX0sMjU1Mih0LHIsZSl7dmFyIG49ZSgxODczKSxvPWUoNjU5KSxhPWUoOTM1MCksaT1uP24udG9TdHJpbmdUYWc6dm9pZCAwO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD92b2lkIDA9PT10PyJbb2JqZWN0IFVuZGVmaW5lZF0iOiJbb2JqZWN0IE51bGxdIjppJiZpIGluIE9iamVjdCh0KT9vKHQpOmEodCl9fSwyNjUxKHQscixlKXt2YXIgbj1lKDQyMTgpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPXQuX19kYXRhX187cmV0dXJuIG4ocik/ZVsic3RyaW5nIj09dHlwZW9mIHI/InN0cmluZyI6Imhhc2giXTplLm1hcH19LDI3NDkodCxyLGUpe3ZhciBuPWUoMTA0Miksbz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgcj10aGlzLl9fZGF0YV9fO3JldHVybiBuP3ZvaWQgMCE9PXJbdF06by5jYWxsKHIsdCl9fSwyODA0KHQscixlKXt2YXIgbj1lKDYxMTApKGUoOTMyNSksIlByb21pc2UiKTt0LmV4cG9ydHM9bn0sMjg3Nyh0LHIsZSl7dmFyIG49ZSg2MTU1KSxvPWUoNjQ0OSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlLGEpe3JldHVybiBudWxsPT10P1tdOihvKHIpfHwocj1udWxsPT1yP1tdOltyXSksbyhlPWE/dm9pZCAwOmUpfHwoZT1udWxsPT1lP1tdOltlXSksbih0LHIsZSkpfX0sMjk0OSh0LHIsZSl7dmFyIG49ZSgyNjUxKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXt2YXIgZT1uKHRoaXMsdCksbz1lLnNpemU7cmV0dXJuIGUuc2V0KHQsciksdGhpcy5zaXplKz1lLnNpemU9PW8/MDoxLHRoaXN9fSwzMDQwKHQscixlKXt2YXIgbj1lKDE1NDkpLG89ZSg3OSksYT1lKDgyMjMpO3QuZXhwb3J0cz1mdW5jdGlvbigpe3RoaXMuc2l6ZT0wLHRoaXMuX19kYXRhX189e2hhc2g6bmV3IG4sbWFwOm5ldyhhfHxvKSxzdHJpbmc6bmV3IG59fX0sMzIyMSh0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHIsZSxuKXtmb3IodmFyIG89LTEsYT1PYmplY3QociksaT1uKHIpLHU9aS5sZW5ndGg7dS0tOyl7dmFyIHM9aVt0P3U6KytvXTtpZighMT09PWUoYVtzXSxzLGEpKWJyZWFrfXJldHVybiByfX19LDMyMjIodCxyLGUpe3ZhciBuPWUoNzU1Nik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10PyIiOm4odCl9fSwzMjQzKHQscixlKXt2YXIgbj1lKDYxMTApLG89ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9bihPYmplY3QsImRlZmluZVByb3BlcnR5Iik7cmV0dXJuIHQoe30sIiIse30pLHR9Y2F0Y2godCl7fX0oKTt0LmV4cG9ydHM9b30sMzM0NSh0KXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm5bXX19LDMzNjAodCxyLGUpe3ZhciBuPWUoMzI0Myk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlKXsiX19wcm90b19fIj09ciYmbj9uKHQscix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6ZSx3cml0YWJsZTohMH0pOnRbcl09ZX19LDM0ODgodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0fX0sMzYwNSh0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KHQpfX0sMzY1MCh0LHIsZSl7dmFyIG49ZSg0MzM1KShPYmplY3Qua2V5cyxPYmplY3QpO3QuZXhwb3J0cz1ufSwzNjU2KHQscixlKXt0PWUubm1kKHQpO3ZhciBuPWUoOTMyNSksbz1lKDk5MzUpLGE9ciYmIXIubm9kZVR5cGUmJnIsaT1hJiZ0JiYhdC5ub2RlVHlwZSYmdCx1PWkmJmkuZXhwb3J0cz09PWE/bi5CdWZmZXI6dm9pZCAwLHM9KHU/dS5pc0J1ZmZlcjp2b2lkIDApfHxvO3QuZXhwb3J0cz1zfSwzNjYxKHQscixlKXt2YXIgbj1lKDMwNDApLG89ZSg3NjcwKSxhPWUoMjg5KSxpPWUoNDUwOSksdT1lKDI5NDkpO2Z1bmN0aW9uIHModCl7dmFyIHI9LTEsZT1udWxsPT10PzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK3I8ZTspe3ZhciBuPXRbcl07dGhpcy5zZXQoblswXSxuWzFdKX19cy5wcm90b3R5cGUuY2xlYXI9bixzLnByb3RvdHlwZS5kZWxldGU9byxzLnByb3RvdHlwZS5nZXQ9YSxzLnByb3RvdHlwZS5oYXM9aSxzLnByb3RvdHlwZS5zZXQ9dSx0LmV4cG9ydHM9c30sMzY2Myh0LHIsZSl7dmFyIG49ZSgxNzk5KSxvPWUoNzc2KSxhPWUoNzE5Nyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPW8odCk7cmV0dXJuIDE9PXIubGVuZ3RoJiZyWzBdWzJdP2EoclswXVswXSxyWzBdWzFdKTpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR8fG4oZSx0LHIpfX19LDM3MDIodCl7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1bXSx0aGlzLnNpemU9MH19LDM3MTQodCxyLGUpe3ZhciBuPWUoMzczMCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlKXtmb3IodmFyIG89LTEsYT10LmNyaXRlcmlhLGk9ci5jcml0ZXJpYSx1PWEubGVuZ3RoLHM9ZS5sZW5ndGg7KytvPHU7KXt2YXIgYz1uKGFbb10saVtvXSk7aWYoYylyZXR1cm4gbz49cz9jOmMqKCJkZXNjIj09ZVtvXT8tMToxKX1yZXR1cm4gdC5pbmRleC1yLmluZGV4fX0sMzczMCh0LHIsZSl7dmFyIG49ZSg0Mzk0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtpZih0IT09cil7dmFyIGU9dm9pZCAwIT09dCxvPW51bGw9PT10LGE9dD09dCxpPW4odCksdT12b2lkIDAhPT1yLHM9bnVsbD09PXIsYz1yPT1yLHA9bihyKTtpZighcyYmIXAmJiFpJiZ0PnJ8fGkmJnUmJmMmJiFzJiYhcHx8byYmdSYmY3x8IWUmJmN8fCFhKXJldHVybiAxO2lmKCFvJiYhaSYmIXAmJnQ8cnx8cCYmZSYmYSYmIW8mJiFpfHxzJiZlJiZhfHwhdSYmYXx8IWMpcmV0dXJuLTF9cmV0dXJuIDB9fSwzODA1KHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgcj10eXBlb2YgdDtyZXR1cm4gbnVsbCE9dCYmKCJvYmplY3QiPT1yfHwiZnVuY3Rpb24iPT1yKX19LDM4NjIodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuaGFzKHQpJiZkZWxldGUgdGhpcy5fX2RhdGFfX1t0XTtyZXR1cm4gdGhpcy5zaXplLT1yPzE6MCxyfX0sMzkzNyh0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXt2YXIgZT10Lmxlbmd0aDtmb3IodC5zb3J0KHIpO2UtLTspdFtlXT10W2VdLnZhbHVlO3JldHVybiB0fX0sMzk0NSh0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyLGUsbil7Zm9yKHZhciBvPS0xLGE9bnVsbD09dD8wOnQubGVuZ3RoOysrbzxhOyl7dmFyIGk9dFtvXTtyKG4saSxlKGkpLHQpfXJldHVybiBufX0sNDIxOCh0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dHlwZW9mIHQ7cmV0dXJuInN0cmluZyI9PXJ8fCJudW1iZXIiPT1yfHwic3ltYm9sIj09cnx8ImJvb2xlYW4iPT1yPyJfX3Byb3RvX18iIT09dDpudWxsPT09dH19LDQyNDcodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPS0xLGU9QXJyYXkodC5zaXplKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2VbKytyXT10fSksZX19LDQyNDgodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoOysrZTxuOylpZihyKHRbZV0sZSx0KSlyZXR1cm4hMDtyZXR1cm4hMX19LDQzMzUodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0KHIoZSkpfX19LDQzOTQodCxyLGUpe3ZhciBuPWUoMjU1Miksbz1lKDM0Nik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgdHx8byh0KSYmIltvYmplY3QgU3ltYm9sXSI9PW4odCl9fSw0NTA5KHQscixlKXt2YXIgbj1lKDI2NTEpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbih0aGlzLHQpLmhhcyh0KX19LDQ1MjgodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPS0xLG49ci5sZW5ndGgsbz10Lmxlbmd0aDsrK2U8bjspdFtvK2VdPXJbZV07cmV0dXJuIHR9fSw0NjY0KHQscixlKXt2YXIgbj1lKDk3NzApLG89ZSgzMzQ1KSxhPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLHU9aT9mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD9bXToodD1PYmplY3QodCksbihpKHQpLGZ1bmN0aW9uKHIpe3JldHVybiBhLmNhbGwodCxyKX0pKX06bzt0LmV4cG9ydHM9dX0sNDczOSh0LHIsZSl7dmFyIG49ZSg2MDI1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXyxlPW4ocix0KTtyZXR1cm4gZTwwP3ZvaWQgMDpyW2VdWzFdfX0sNDg0MCh0LHIsZSl7dmFyIG49Im9iamVjdCI9PXR5cGVvZiBlLmcmJmUuZyYmZS5nLk9iamVjdD09PU9iamVjdCYmZS5nO3QuZXhwb3J0cz1ufSw0ODk0KHQscixlKXt2YXIgbj1lKDE4ODIpLG89ZSgyOTQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dCYmbyh0Lmxlbmd0aCkmJiFuKHQpfX0sNDkwMSh0LHIsZSl7dmFyIG49ZSgyNTUyKSxvPWUoMjk0KSxhPWUoMzQ2KSxpPXt9O2lbIltvYmplY3QgRmxvYXQzMkFycmF5XSJdPWlbIltvYmplY3QgRmxvYXQ2NEFycmF5XSJdPWlbIltvYmplY3QgSW50OEFycmF5XSJdPWlbIltvYmplY3QgSW50MTZBcnJheV0iXT1pWyJbb2JqZWN0IEludDMyQXJyYXldIl09aVsiW29iamVjdCBVaW50OEFycmF5XSJdPWlbIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIl09aVsiW29iamVjdCBVaW50MTZBcnJheV0iXT1pWyJbb2JqZWN0IFVpbnQzMkFycmF5XSJdPSEwLGlbIltvYmplY3QgQXJndW1lbnRzXSJdPWlbIltvYmplY3QgQXJyYXldIl09aVsiW29iamVjdCBBcnJheUJ1ZmZlcl0iXT1pWyJbb2JqZWN0IEJvb2xlYW5dIl09aVsiW29iamVjdCBEYXRhVmlld10iXT1pWyJbb2JqZWN0IERhdGVdIl09aVsiW29iamVjdCBFcnJvcl0iXT1pWyJbb2JqZWN0IEZ1bmN0aW9uXSJdPWlbIltvYmplY3QgTWFwXSJdPWlbIltvYmplY3QgTnVtYmVyXSJdPWlbIltvYmplY3QgT2JqZWN0XSJdPWlbIltvYmplY3QgUmVnRXhwXSJdPWlbIltvYmplY3QgU2V0XSJdPWlbIltvYmplY3QgU3RyaW5nXSJdPWlbIltvYmplY3QgV2Vha01hcF0iXT0hMSx0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGEodCkmJm8odC5sZW5ndGgpJiYhIWlbbih0KV19fSw0OTMyKHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe2Zvcih2YXIgZT0tMSxuPW51bGw9PXQ/MDp0Lmxlbmd0aCxvPUFycmF5KG4pOysrZTxuOylvW2VdPXIodFtlXSxlLHQpO3JldHVybiBvfX0sNTA4Myh0LHIsZSl7dmFyIG49ZSgxODgyKSxvPWUoNzI5NiksYT1lKDM4MDUpLGk9ZSg3NDczKSx1PS9eXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXSQvLHM9RnVuY3Rpb24ucHJvdG90eXBlLGM9T2JqZWN0LnByb3RvdHlwZSxwPXMudG9TdHJpbmcsZj1jLmhhc093blByb3BlcnR5LHY9UmVnRXhwKCJeIitwLmNhbGwoZikucmVwbGFjZSgvW1xcXiQuKis/KClbXF17fXxdL2csIlxcJCYiKS5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcKCl8IGZvciAuKz8oPz1cXFxdKS9nLCIkMS4qPyIpKyIkIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiEoIWEodCl8fG8odCkpJiYobih0KT92OnUpLnRlc3QoaSh0KSl9fSw1MTI4KHQscixlKXt2YXIgbj1lKDkwOSksbz1lKDQ4OTQpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3ZhciBlPS0xLGE9byh0KT9BcnJheSh0Lmxlbmd0aCk6W107cmV0dXJuIG4odCxmdW5jdGlvbih0LG4sbyl7YVsrK2VdPXIodCxuLG8pfSksYX19LDUyODgodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIHQ9PT1yfHx0IT10JiZyIT1yfX0sNTM4OSh0LHIsZSl7dmFyIG49ZSgzNjYzKSxvPWUoNzk3OCksYT1lKDM0ODgpLGk9ZSg2NDQ5KSx1PWUoNTgzKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpudWxsPT10P2E6Im9iamVjdCI9PXR5cGVvZiB0P2kodCk/byh0WzBdLHRbMV0pOm4odCk6dSh0KX19LDU0ODEodCxyLGUpe3ZhciBuPWUoOTMyNSlbIl9fY29yZS1qc19zaGFyZWRfXyJdO3QuZXhwb3J0cz1ufSw1NTI3KHQpe3ZhciByPU9iamVjdC5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuY29uc3RydWN0b3I7cmV0dXJuIHQ9PT0oImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUucHJvdG90eXBlfHxyKX19LDU1ODAodCxyLGUpe3ZhciBuPWUoNjExMCkoZSg5MzI1KSwiRGF0YVZpZXciKTt0LmV4cG9ydHM9bn0sNTc0OSh0LHIsZSl7dmFyIG49ZSgxMDQyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXt2YXIgZT10aGlzLl9fZGF0YV9fO3JldHVybiB0aGlzLnNpemUrPXRoaXMuaGFzKHQpPzA6MSxlW3RdPW4mJnZvaWQgMD09PXI/Il9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iOnIsdGhpc319LDU4NjEodCxyLGUpe3ZhciBuPWUoNTU4MCksbz1lKDgyMjMpLGE9ZSgyODA0KSxpPWUoNjU0NSksdT1lKDgzMDMpLHM9ZSgyNTUyKSxjPWUoNzQ3MykscD0iW29iamVjdCBNYXBdIixmPSJbb2JqZWN0IFByb21pc2VdIix2PSJbb2JqZWN0IFNldF0iLGw9IltvYmplY3QgV2Vha01hcF0iLGg9IltvYmplY3QgRGF0YVZpZXddIix4PWMobikseT1jKG8pLGQ9YyhhKSxfPWMoaSksYj1jKHUpLGc9czsobiYmZyhuZXcgbihuZXcgQXJyYXlCdWZmZXIoMSkpKSE9aHx8byYmZyhuZXcgbykhPXB8fGEmJmcoYS5yZXNvbHZlKCkpIT1mfHxpJiZnKG5ldyBpKSE9dnx8dSYmZyhuZXcgdSkhPWwpJiYoZz1mdW5jdGlvbih0KXt2YXIgcj1zKHQpLGU9IltvYmplY3QgT2JqZWN0XSI9PXI/dC5jb25zdHJ1Y3Rvcjp2b2lkIDAsbj1lP2MoZSk6IiI7aWYobilzd2l0Y2gobil7Y2FzZSB4OnJldHVybiBoO2Nhc2UgeTpyZXR1cm4gcDtjYXNlIGQ6cmV0dXJuIGY7Y2FzZSBfOnJldHVybiB2O2Nhc2UgYjpyZXR1cm4gbH1yZXR1cm4gcn0pLHQuZXhwb3J0cz1nfSw1OTExKHQscixlKXt2YXIgbj1lKDg4NTkpLG89ZSg0MjQ4KSxhPWUoOTIxOSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlLGksdSxzKXt2YXIgYz0xJmUscD10Lmxlbmd0aCxmPXIubGVuZ3RoO2lmKHAhPWYmJiEoYyYmZj5wKSlyZXR1cm4hMTt2YXIgdj1zLmdldCh0KSxsPXMuZ2V0KHIpO2lmKHYmJmwpcmV0dXJuIHY9PXImJmw9PXQ7dmFyIGg9LTEseD0hMCx5PTImZT9uZXcgbjp2b2lkIDA7Zm9yKHMuc2V0KHQscikscy5zZXQocix0KTsrK2g8cDspe3ZhciBkPXRbaF0sXz1yW2hdO2lmKGkpdmFyIGI9Yz9pKF8sZCxoLHIsdCxzKTppKGQsXyxoLHQscixzKTtpZih2b2lkIDAhPT1iKXtpZihiKWNvbnRpbnVlO3g9ITE7YnJlYWt9aWYoeSl7aWYoIW8ocixmdW5jdGlvbih0LHIpe2lmKCFhKHkscikmJihkPT09dHx8dShkLHQsZSxpLHMpKSlyZXR1cm4geS5wdXNoKHIpfSkpe3g9ITE7YnJlYWt9fWVsc2UgaWYoZCE9PV8mJiF1KGQsXyxlLGkscykpe3g9ITE7YnJlYWt9fXJldHVybiBzLmRlbGV0ZSh0KSxzLmRlbGV0ZShyKSx4fX0sNTk1MCh0LHIsZSl7dmFyIG49ZSg2OTUpLG89ZSg4OTg0KSxhPWUoNDg5NCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBhKHQpP24odCk6byh0KX19LDYwMDkodCxyLGUpe3Q9ZS5ubWQodCk7dmFyIG49ZSg0ODQwKSxvPXImJiFyLm5vZGVUeXBlJiZyLGE9byYmdCYmIXQubm9kZVR5cGUmJnQsaT1hJiZhLmV4cG9ydHM9PT1vJiZuLnByb2Nlc3MsdT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gYSYmYS5yZXF1aXJlJiZhLnJlcXVpcmUoInV0aWwiKS50eXBlc3x8aSYmaS5iaW5kaW5nJiZpLmJpbmRpbmcoInV0aWwiKX1jYXRjaCh0KXt9fSgpO3QuZXhwb3J0cz11fSw2MDI1KHQscixlKXt2YXIgbj1lKDUyODgpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe2Zvcih2YXIgZT10Lmxlbmd0aDtlLS07KWlmKG4odFtlXVswXSxyKSlyZXR1cm4gZTtyZXR1cm4tMX19LDYxMTAodCxyLGUpe3ZhciBuPWUoNTA4Myksbz1lKDM5Mik7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7dmFyIGU9byh0LHIpO3JldHVybiBuKGUpP2U6dm9pZCAwfX0sNjE1NSh0LHIsZSl7dmFyIG49ZSg0OTMyKSxvPWUoNzQyMiksYT1lKDUzODkpLGk9ZSg1MTI4KSx1PWUoMzkzNykscz1lKDczMDEpLGM9ZSgzNzE0KSxwPWUoMzQ4OCksZj1lKDY0NDkpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIsZSl7cj1yLmxlbmd0aD9uKHIsZnVuY3Rpb24odCl7cmV0dXJuIGYodCk/ZnVuY3Rpb24ocil7cmV0dXJuIG8ociwxPT09dC5sZW5ndGg/dFswXTp0KX06dH0pOltwXTt2YXIgdj0tMTtyPW4ocixzKGEpKTt2YXIgbD1pKHQsZnVuY3Rpb24odCxlLG8pe3JldHVybntjcml0ZXJpYTpuKHIsZnVuY3Rpb24ocil7cmV0dXJuIHIodCl9KSxpbmRleDorK3YsdmFsdWU6dH19KTtyZXR1cm4gdShsLGZ1bmN0aW9uKHQscil7cmV0dXJuIGModCxyLGUpfSl9fSw2NDQ5KHQpe3ZhciByPUFycmF5LmlzQXJyYXk7dC5leHBvcnRzPXJ9LDY1NDUodCxyLGUpe3ZhciBuPWUoNjExMCkoZSg5MzI1KSwiU2V0Iik7dC5leHBvcnRzPW59LDY2NDkodCxyLGUpe3ZhciBuPWUoMzIyMSkoKTt0LmV4cG9ydHM9bn0sNjcyMSh0LHIsZSl7dmFyIG49ZSgxMDQyKSxvPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX19kYXRhX187aWYobil7dmFyIGU9clt0XTtyZXR1cm4iX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyI9PT1lP3ZvaWQgMDplfXJldHVybiBvLmNhbGwocix0KT9yW3RdOnZvaWQgMH19LDcwNjgodCxyLGUpe3ZhciBuPWUoNzIxNyksbz1lKDU5MTEpLGE9ZSgxOTg2KSxpPWUoNjg5KSx1PWUoNTg2MSkscz1lKDY0NDkpLGM9ZSgzNjU2KSxwPWUoNzE2NyksZj0iW29iamVjdCBBcmd1bWVudHNdIix2PSJbb2JqZWN0IEFycmF5XSIsbD0iW29iamVjdCBPYmplY3RdIixoPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlLHgseSxkKXt2YXIgXz1zKHQpLGI9cyhyKSxnPV8/djp1KHQpLGo9Yj92OnUociksTz0oZz1nPT1mP2w6Zyk9PWwsdz0oaj1qPT1mP2w6aik9PWwsbT1nPT1qO2lmKG0mJmModCkpe2lmKCFjKHIpKXJldHVybiExO189ITAsTz0hMX1pZihtJiYhTylyZXR1cm4gZHx8KGQ9bmV3IG4pLF98fHAodCk/byh0LHIsZSx4LHksZCk6YSh0LHIsZyxlLHgseSxkKTtpZighKDEmZSkpe3ZhciBBPU8mJmguY2FsbCh0LCJfX3dyYXBwZWRfXyIpLE09dyYmaC5jYWxsKHIsIl9fd3JhcHBlZF9fIik7aWYoQXx8TSl7dmFyIHo9QT90LnZhbHVlKCk6dCxTPU0/ci52YWx1ZSgpOnI7cmV0dXJuIGR8fChkPW5ldyBuKSx5KHosUyxlLHgsZCl9fXJldHVybiEhbSYmKGR8fChkPW5ldyBuKSxpKHQscixlLHgseSxkKSl9fSw3MTY3KHQscixlKXt2YXIgbj1lKDQ5MDEpLG89ZSg3MzAxKSxhPWUoNjAwOSksaT1hJiZhLmlzVHlwZWRBcnJheSx1PWk/byhpKTpuO3QuZXhwb3J0cz11fSw3MTk3KHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZVt0XT09PXImJih2b2lkIDAhPT1yfHx0IGluIE9iamVjdChlKSl9fX0sNzIxNyh0LHIsZSl7dmFyIG49ZSg3OSksbz1lKDE0MjApLGE9ZSg5MzgpLGk9ZSgzNjA1KSx1PWUoOTgxNykscz1lKDk0NSk7ZnVuY3Rpb24gYyh0KXt2YXIgcj10aGlzLl9fZGF0YV9fPW5ldyBuKHQpO3RoaXMuc2l6ZT1yLnNpemV9Yy5wcm90b3R5cGUuY2xlYXI9byxjLnByb3RvdHlwZS5kZWxldGU9YSxjLnByb3RvdHlwZS5nZXQ9aSxjLnByb3RvdHlwZS5oYXM9dSxjLnByb3RvdHlwZS5zZXQ9cyx0LmV4cG9ydHM9Y30sNzIzNyh0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBudWxsPT1yP3ZvaWQgMDpyW3RdfX19LDcyNTUodCxyLGUpe3ZhciBuPWUoNzQyMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gbihyLHQpfX19LDcyOTYodCxyLGUpe3ZhciBuLG89ZSg1NDgxKSxhPShuPS9bXi5dKyQvLmV4ZWMobyYmby5rZXlzJiZvLmtleXMuSUVfUFJPVE98fCIiKSk/IlN5bWJvbChzcmMpXzEuIituOiIiO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4hIWEmJmEgaW4gdH19LDczMDEodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gdChyKX19fSw3NDIyKHQscixlKXt2YXIgbj1lKDE3NjkpLG89ZSg3Nzk3KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9MCxhPShyPW4ocix0KSkubGVuZ3RoO251bGwhPXQmJmU8YTspdD10W28ocltlKytdKV07cmV0dXJuIGUmJmU9PWE/dDp2b2lkIDB9fSw3NDczKHQpe3ZhciByPUZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYobnVsbCE9dCl7dHJ5e3JldHVybiByLmNhbGwodCl9Y2F0Y2godCl7fXRyeXtyZXR1cm4gdCsiIn1jYXRjaCh0KXt9fXJldHVybiIifX0sNzUzNCh0LHIsZSl7dmFyIG49ZSgyNTUyKSxvPWUoMzQ2KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG8odCkmJiJbb2JqZWN0IEFyZ3VtZW50c10iPT1uKHQpfX0sNzU1Nih0LHIsZSl7dmFyIG49ZSgxODczKSxvPWUoNDkzMiksYT1lKDY0NDkpLGk9ZSg0Mzk0KSx1PW4/bi5wcm90b3R5cGU6dm9pZCAwLHM9dT91LnRvU3RyaW5nOnZvaWQgMDt0LmV4cG9ydHM9ZnVuY3Rpb24gdChyKXtpZigic3RyaW5nIj09dHlwZW9mIHIpcmV0dXJuIHI7aWYoYShyKSlyZXR1cm4gbyhyLHQpKyIiO2lmKGkocikpcmV0dXJuIHM/cy5jYWxsKHIpOiIiO3ZhciBlPXIrIiI7cmV0dXJuIjAiPT1lJiYxL3I9PS0xLzA/Ii0wIjplfX0sNzY3MCh0LHIsZSl7dmFyIG49ZSgyNjUxKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIHI9bih0aGlzLHQpLmRlbGV0ZSh0KTtyZXR1cm4gdGhpcy5zaXplLT1yPzE6MCxyfX0sNzc5Nyh0LHIsZSl7dmFyIG49ZSg0Mzk0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoInN0cmluZyI9PXR5cGVvZiB0fHxuKHQpKXJldHVybiB0O3ZhciByPXQrIiI7cmV0dXJuIjAiPT1yJiYxL3Q9PS0xLzA/Ii0wIjpyfX0sNzgyOCh0LHIsZSl7dmFyIG49ZSg5MzI1KS5VaW50OEFycmF5O3QuZXhwb3J0cz1ufSw3OTc4KHQscixlKXt2YXIgbj1lKDI3MCksbz1lKDgxNTYpLGE9ZSg2MzEpLGk9ZSg4NTg2KSx1PWUoNzU2KSxzPWUoNzE5NyksYz1lKDc3OTcpO3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiBpKHQpJiZ1KHIpP3MoYyh0KSxyKTpmdW5jdGlvbihlKXt2YXIgaT1vKGUsdCk7cmV0dXJuIHZvaWQgMD09PWkmJmk9PT1yP2EoZSx0KTpuKHIsaSwzKX19fSw4MDc3KHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiBudWxsIT10JiZyIGluIE9iamVjdCh0KX19LDgwOTYodCl7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPS0xLG49QXJyYXkodCk7KytlPHQ7KW5bZV09cihlKTtyZXR1cm4gbn19LDgxNTYodCxyLGUpe3ZhciBuPWUoNzQyMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlKXt2YXIgbz1udWxsPT10P3ZvaWQgMDpuKHQscik7cmV0dXJuIHZvaWQgMD09PW8/ZTpvfX0sODIyMyh0LHIsZSl7dmFyIG49ZSg2MTEwKShlKDkzMjUpLCJNYXAiKTt0LmV4cG9ydHM9bn0sODMwMyh0LHIsZSl7dmFyIG49ZSg2MTEwKShlKDkzMjUpLCJXZWFrTWFwIik7dC5leHBvcnRzPW59LDgzMjkodCxyLGUpe3ZhciBuPWUoNDg5NCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7cmV0dXJuIGZ1bmN0aW9uKGUsbyl7aWYobnVsbD09ZSlyZXR1cm4gZTtpZighbihlKSlyZXR1cm4gdChlLG8pO2Zvcih2YXIgYT1lLmxlbmd0aCxpPXI/YTotMSx1PU9iamVjdChlKTsocj9pLS06KytpPGEpJiYhMSE9PW8odVtpXSxpLHUpOyk7cmV0dXJuIGV9fX0sODU4Nih0LHIsZSl7dmFyIG49ZSg2NDQ5KSxvPWUoNDM5NCksYT0vXC58XFsoPzpbXltcXV0qfChbIiddKSg/Oig/IVwxKVteXFxdfFxcLikqP1wxKVxdLyxpPS9eXHcqJC87dC5leHBvcnRzPWZ1bmN0aW9uKHQscil7aWYobih0KSlyZXR1cm4hMTt2YXIgZT10eXBlb2YgdDtyZXR1cm4hKCJudW1iZXIiIT1lJiYic3ltYm9sIiE9ZSYmImJvb2xlYW4iIT1lJiZudWxsIT10JiYhbyh0KSl8fGkudGVzdCh0KXx8IWEudGVzdCh0KXx8bnVsbCE9ciYmdCBpbiBPYmplY3Qocil9fSw4NjU1KHQscixlKXt2YXIgbj1lKDYwMjUpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbih0aGlzLl9fZGF0YV9fLHQpPi0xfX0sODg1OSh0LHIsZSl7dmFyIG49ZSgzNjYxKSxvPWUoMTM4MCksYT1lKDE0NTkpO2Z1bmN0aW9uIGkodCl7dmFyIHI9LTEsZT1udWxsPT10PzA6dC5sZW5ndGg7Zm9yKHRoaXMuX19kYXRhX189bmV3IG47KytyPGU7KXRoaXMuYWRkKHRbcl0pfWkucHJvdG90eXBlLmFkZD1pLnByb3RvdHlwZS5wdXNoPW8saS5wcm90b3R5cGUuaGFzPWEsdC5leHBvcnRzPWl9LDg5ODQodCxyLGUpe3ZhciBuPWUoNTUyNyksbz1lKDM2NTApLGE9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoIW4odCkpcmV0dXJuIG8odCk7dmFyIHI9W107Zm9yKHZhciBlIGluIE9iamVjdCh0KSlhLmNhbGwodCxlKSYmImNvbnN0cnVjdG9yIiE9ZSYmci5wdXNoKGUpO3JldHVybiByfX0sOTIxOSh0KXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdC5oYXMocil9fSw5MzI1KHQscixlKXt2YXIgbj1lKDQ4NDApLG89Im9iamVjdCI9PXR5cGVvZiBzZWxmJiZzZWxmJiZzZWxmLk9iamVjdD09PU9iamVjdCYmc2VsZixhPW58fG98fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7dC5leHBvcnRzPWF9LDkzMjYodCxyLGUpe3ZhciBuPWUoMTc2OSksbz1lKDI0MjgpLGE9ZSg2NDQ5KSxpPWUoMzYxKSx1PWUoMjk0KSxzPWUoNzc5Nyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQscixlKXtmb3IodmFyIGM9LTEscD0ocj1uKHIsdCkpLmxlbmd0aCxmPSExOysrYzxwOyl7dmFyIHY9cyhyW2NdKTtpZighKGY9bnVsbCE9dCYmZSh0LHYpKSlicmVhazt0PXRbdl19cmV0dXJuIGZ8fCsrYyE9cD9mOiEhKHA9bnVsbD09dD8wOnQubGVuZ3RoKSYmdShwKSYmaSh2LHApJiYoYSh0KXx8byh0KSl9fSw5MzUwKHQpe3ZhciByPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByLmNhbGwodCl9fSw5NzcwKHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0LHIpe2Zvcih2YXIgZT0tMSxuPW51bGw9PXQ/MDp0Lmxlbmd0aCxvPTAsYT1bXTsrK2U8bjspe3ZhciBpPXRbZV07cihpLGUsdCkmJihhW28rK109aSl9cmV0dXJuIGF9fSw5ODE3KHQpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModCl9fSw5OTM1KHQpe3QuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiExfX19LHI9e307ZnVuY3Rpb24gZShuKXt2YXIgbz1yW25dO2lmKHZvaWQgMCE9PW8pcmV0dXJuIG8uZXhwb3J0czt2YXIgYT1yW25dPXtpZDpuLGxvYWRlZDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtuXShhLGEuZXhwb3J0cyxlKSxhLmxvYWRlZD0hMCxhLmV4cG9ydHN9ZS5uPXQ9Pnt2YXIgcj10JiZ0Ll9fZXNNb2R1bGU/KCk9PnQuZGVmYXVsdDooKT0+dDtyZXR1cm4gZS5kKHIse2E6cn0pLHJ9LGUuZD0odCxyKT0+e2Zvcih2YXIgbiBpbiByKWUubyhyLG4pJiYhZS5vKHQsbikmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4se2VudW1lcmFibGU6ITAsZ2V0OnJbbl19KX0sZS5nPWZ1bmN0aW9uKCl7aWYoIm9iamVjdCI9PXR5cGVvZiBnbG9iYWxUaGlzKXJldHVybiBnbG9iYWxUaGlzO3RyeXtyZXR1cm4gdGhpc3x8bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCl9Y2F0Y2godCl7aWYoIm9iamVjdCI9PXR5cGVvZiB3aW5kb3cpcmV0dXJuIHdpbmRvd319KCksZS5vPSh0LHIpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSxlLm5tZD10PT4odC5wYXRocz1bXSx0LmNoaWxkcmVufHwodC5jaGlsZHJlbj1bXSksdCk7dmFyIG49e307ZS5kKG4se0g6KCk9PnB9KTt2YXIgbz1lKDgxNTYpLGE9ZS5uKG8pLGk9ZSgyODc3KSx1PWUubihpKSxzPWUoMjAxMyksYz1lLm4ocyk7Y29uc3QgcD0oe2RhdGE6dCxhcmd1bWVudHM6e3NvcnQ6cixkaXI6ZX19KT0+e2NvbnN0IG49YygpKHQudGhpc01vbnRoQ29uc3VtcHRpb24sIml0ZW1faWQiKSxvPWMoKSh0Lmxhc3RNb250aENvbnN1bXB0aW9uLCJpdGVtX2lkIiksaT1jKCkodC50d29Nb250aHNBZ29Db25zdW1wdGlvbiwiaXRlbV9pZCIpLHM9YygpKHQuZXhwaXJpbmdJblNpeE1vbnRocywiaXRlbV9pZCIpLHA9YygpKHQuZXhwaXJpbmdJblR3ZWx2ZU1vbnRocywiaXRlbV9pZCIpLGY9YygpKHQuc3RvY2tPbk9yZGVyLCJpdGVtX2lkIiksdj1jKCkodC5BTUNUd2VsdmUsIml0ZW1faWQiKSxsPWMoKSh0LkFNQ1R3ZW50eUZvdXIsIml0ZW1faWQiKTtsZXQgaD10Lml0ZW1zLm5vZGVzLm1hcCh0PT4oey4uLnQsbW9udGhDb25zdW1wdGlvbjpuW3QuaWRdPy5bMF0/LnF1YW50aXR5fHwwLGxhc3RNb250aENvbnN1bXB0aW9uOm9bdC5pZF0/LlswXT8ucXVhbnRpdHl8fDAsdHdvTW9udGhzQWdvQ29uc3VtcHRpb246aVt0LmlkXT8uWzBdPy5xdWFudGl0eXx8MCxleHBpcmluZ0luU2l4TW9udGhzOnNbdC5pZF0/LlswXT8ucXVhbnRpdHl8fDAsZXhwaXJpbmdJblR3ZWx2ZU1vbnRoczpwW3QuaWRdPy5bMF0/LnF1YW50aXR5fHwwLHN0b2NrT25PcmRlcjpNYXRoLm1heCgwLGZbdC5pZF0/LlswXT8ucXVhbnRpdHl8fDApLEFNQzEyOnZbdC5pZF0/LlswXT8ucXVhbnRpdHl8fDAsQU1DMjQ6bFt0LmlkXT8uWzBdPy5xdWFudGl0eXx8MCxTT0g6dC5zdGF0cz8uc3RvY2tPbkhhbmR8fDAsTU9TOnQuc3RhdHM/LmF2YWlsYWJsZU1vbnRoc09mU3RvY2tPbkhhbmR8fDAsQU1DOnQuc3RhdHM/LmF2ZXJhZ2VNb250aGx5Q29uc3VtcHRpb258fDB9KSk7cmV0dXJue2RhdGE6e2l0ZW1zOntub2Rlczp1KCkoaCx0PT57Y29uc3QgZT1hKCkodCxyfHwibmFtZSIpO3JldHVybiJzdHJpbmciPT10eXBlb2YgZT9lLnRvTG9jYWxlTG93ZXJDYXNlKCk6ZX0sZXx8ImFzYyIpfX19fSxmPW4uSDtleHBvcnR7ZiBhcyBjb252ZXJ0X2RhdGF9Ow==",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>\n  {% include \"style.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"report.stock-on-hand\", f=\"Stock on hand\")}}</td>\n        <td>{{t(k=\"report.stock-on-order\", f=\"Stock on order\")}}</td>\n        <td>{{t(k=\"report.amc-12-months\", f=\"AMC (12 months)\")}}</td>\n        <td>{{t(k=\"report.amc-24-months\", f=\"AMC (24 months)\")}}</td>\n        <td>{{t(k=\"report.amc-for-lookback\", f=\"AMC (lookback period)\")}}</td>\n        <td>{{t(k=\"report.months-cover\", f=\"Months cover\")}}</td>\n        <td>\n          {{t(k=\"report.usage-this-month\", f=\"Monthly usage (this month)\")}}\n        </td>\n        <td>\n          {{t(k=\"report.usage-last-month\", f=\"Monthly usage (last month)\")}}\n        </td>\n        <td>\n          {{t(k=\"report.usage-2-months-prior\", f=\"Monthly usage (2 months\n          ago)\")}}\n        </td>\n        <td>{{t(k=\"report.expiring-6-months\", f=\"Expiring in 6 months\")}}</td>\n        <td>{{t(k=\"report.expiring-12-months\", f=\"Expiring in 12 months\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for item in data.items.nodes %}\n      <tr>\n        <td>{{item.code}}</td>\n        <td>{{item.name}}</td>\n        <td>{{item.SOH | round( precision=1)}}</td>\n        <td>{{item.stockOnOrder}}</td>\n        <td>{{item.AMC12}}</td>\n        <td>{{item.AMC24}}</td>\n        <td>{{item.AMC | round( precision=1)}}</td>\n        <td>{{item.MOS | round( precision=1)}}</td>\n        <td>{{item.monthConsumption}}</td>\n        <td>{{item.lastMonthConsumption}}</td>\n        <td>{{item.twoMonthsAgoConsumption}}</td>\n        <td>{{item.expiringInSixMonths}}</td>\n        <td>{{item.expiringInTwelveMonths}}</td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          },
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query ItemUsage($storeId: String!, $itemCode: String, $itemName: String) {\n  items(\n    storeId: $storeId\n    filter: {\n      code: { like: $itemCode }\n      name: { like: $itemName }\n      isVisibleOrOnHand: true\n      isActive: true\n    }\n  ) {\n    ... on ItemConnector {\n      nodes {\n        id\n        code\n        name\n        stats(storeId: $storeId) {\n          totalConsumption\n          availableMonthsOfStockOnHand\n          stockOnHand\n          averageMonthlyConsumption\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "thisMonthConsumption": {
            "type": "SQLQuery",
            "data": {
              "name": "thisMonthConsumption",
              "query_sqlite": "WITH\n    this_month AS (\n        SELECT date('now', 'start of month') AS this_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month\nWHERE date >= this_month AND store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month\nWHERE date >= this_month AND store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "twoMonthsAgoConsumption": {
            "type": "SQLQuery",
            "data": {
              "name": "twoMonthsAgoConsumption",
              "query_sqlite": "WITH\n    last_month AS (\n        SELECT date('now', 'start of month', '-1 month') AS last_month\n    ),\n    two_months_ago AS (\n        SELECT date('now', 'start of month', '-2 month') AS two_months_ago\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, two_months_ago, last_month\nWHERE date >= two_months_ago AND date < last_month AND store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    last_month AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '1 month') AS last_month\n    ),\n    two_months_ago AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '2 month') AS two_months_ago\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, two_months_ago, last_month\nWHERE date >= two_months_ago AND date < last_month AND store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "expiringInTwelveMonths": {
            "type": "SQLQuery",
            "data": {
              "name": "expiringInTwelveMonths",
              "query_sqlite": "WITH \n    this_month AS (\n        SELECT date('now') AS this_month\n    ),\n    twelve_months AS (\n        SELECT date('now', '+12 months') AS twelve_months\n    )\nSELECT \n    stock_line.id,\n    i.item_id,\n    SUM(stock_line.available_number_of_packs) AS quantity\nFROM stock_line, twelve_months, this_month\nINNER JOIN item_link i ON i.id = stock_line.item_link_id\nWHERE stock_line.expiry_date < twelve_months AND stock_line.store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH \n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    ),\n    twelve_months AS (\n        SELECT date_trunc('month', CURRENT_DATE + interval '12 months') AS twelve_months\n    )\nSELECT \n    s.id,\n    i.item_id,\n    SUM(s.available_number_of_packs) AS quantity\nFROM stock_line s\nINNER JOIN item_link i ON i.id = s.item_link_id\nINNER JOIN this_month ON true\nINNER JOIN twelve_months ON true\nWHERE s.expiry_date < twelve_months AND s.store_id = $storeId\nGROUP BY s.id, i.item_id"
            }
          },
          "stockOnOrder": {
            "type": "SQLQuery",
            "data": {
              "name": "stockOnOrder",
              "query_sqlite": "SELECT \n    item.id as item_id,\n    SUM(rl.requested_quantity) - COALESCE(SUM(il.pack_size * il.number_of_packs), 0) AS quantity\nFROM item\nINNER JOIN item_link i ON item.id = i.item_id\nLEFT JOIN requisition_line rl ON rl.item_link_id = i.id\nLEFT JOIN requisition r ON r.id = rl.requisition_id\nLEFT JOIN invoice ON invoice.requisition_id = r.id\nLEFT JOIN invoice_line il on invoice.id = il.invoice_id AND il.item_link_id = i.id\nWHERE r.store_id = $storeId AND r.type = 'REQUEST' AND r.status = 'SENT'\nGROUP BY 1",
              "query_postgres": "SELECT \n    item.id as item_id,\n    SUM(rl.requested_quantity) - COALESCE(SUM(il.pack_size * il.number_of_packs), 0) AS quantity\nFROM item\nINNER JOIN item_link i ON item.id = i.item_id\nLEFT JOIN requisition_line rl ON rl.item_link_id = i.id\nLEFT JOIN requisition r ON r.id = rl.requisition_id\nLEFT JOIN invoice ON invoice.requisition_id = r.id\nLEFT JOIN invoice_line il on invoice.id = il.invoice_id AND il.item_link_id = i.id\nWHERE r.store_id = $storeId AND r.type = 'REQUEST' AND r.status = 'SENT'\nGROUP BY 1"
            }
          },
          "expiringInSixMonths": {
            "type": "SQLQuery",
            "data": {
              "name": "expiringInSixMonths",
              "query_sqlite": "WITH \n    this_month AS (\n        SELECT date('now') AS this_month\n    ),\n    six_months AS (\n        SELECT date('now', '+6 months') AS six_months\n    )\nSELECT \n    stock_line.id,\n    i.item_id,\n    SUM(stock_line.available_number_of_packs) AS quantity\nFROM stock_line, six_months, this_month\nINNER JOIN item_link i ON i.id = stock_line.item_link_id\nWHERE stock_line.expiry_date < six_months AND stock_line.store_id = $storeId\nGROUP BY i.item_id\n",
              "query_postgres": "WITH \n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    ),\n    six_months AS (\n        SELECT date_trunc('month', CURRENT_DATE + interval '6 months') AS six_months\n    )\nSELECT \n    s.id,\n    i.item_id,\n    SUM(s.available_number_of_packs) AS quantity\nFROM stock_line s\nINNER JOIN item_link i ON i.id = s.item_link_id\nINNER JOIN this_month ON true\nINNER JOIN six_months ON true\nWHERE s.expiry_date < six_months AND s.store_id = $storeId\nGROUP BY s.id, i.item_id\n"
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container table tr:last-child td {\n  border-bottom: none;\n}\n\n.container > table > thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container > table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.status span {\n  padding: 2px;\n  border-radius: 10px;\n}\n"
          },
          "AMCTwelve": {
            "type": "SQLQuery",
            "data": {
              "name": "AMCTwelve",
              "query_sqlite": "WITH\n    twelve_months_ago AS (\n        SELECT date('now', 'start of month', '-12 month') AS twelve_months_ago\n    )\nSELECT\n    ROUND(SUM(quantity / 12), 1) AS quantity,\n    item_id\nFROM consumption, twelve_months_ago\nWHERE date >= twelve_months_ago AND consumption.store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    twelve_months_ago AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '12 months') AS twelve_months_ago\n    )\nSELECT\n    ROUND(SUM(quantity / 12)::numeric, 1) AS quantity,\n    item_id\nFROM consumption, twelve_months_ago\nWHERE date >= twelve_months_ago AND consumption.store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "AMCTwentyFour": {
            "type": "SQLQuery",
            "data": {
              "name": "AMCTwentyFour",
              "query_sqlite": "WITH\n    twenty_four_months_ago AS (\n        SELECT date('now', 'start of month', '-24 month') AS twenty_four_months_ago\n    )\nSELECT\n    ROUND(SUM(quantity / 24), 1) AS quantity,    \n    item_id\nFROM consumption, twenty_four_months_ago\nWHERE date >= twenty_four_months_ago AND consumption.store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    twenty_four_months_ago AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '24 months') AS twenty_four_months_ago\n    )\nSELECT\n    ROUND(SUM(quantity / 24)::numeric, 1) AS quantity,\n    item_id\nFROM consumption, twenty_four_months_ago\nWHERE date >= twenty_four_months_ago AND consumption.store_id = $storeId\nGROUP BY item_id\n"
            }
          },
          "lastMonthConsumption": {
            "type": "SQLQuery",
            "data": {
              "name": "lastMonthConsumption",
              "query_sqlite": "WITH\n    this_month AS (\n        SELECT date('now', 'start of month') AS this_month\n    ),\n    last_month AS (\n        SELECT date('now', 'start of month', '-1 month') AS last_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month, last_month\nWHERE date >= last_month AND date < this_month AND store_id = $storeId\nGROUP BY item_id\n",
              "query_postgres": "WITH\n    this_month AS (\n        SELECT date_trunc('month', CURRENT_DATE) AS this_month\n    ),\n    last_month AS (\n        SELECT date_trunc('month', CURRENT_DATE - interval '1 month') AS last_month\n    )\nSELECT\n    SUM(quantity) AS quantity,\n    item_id\nFROM consumption, this_month, last_month\nWHERE date >= last_month AND date < this_month AND store_id = $storeId\nGROUP BY item_id\n"
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "StockAndItems",
      "argument_schema_id": "for_report_item-usage_2_6_3_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.3",
      "code": "item-usage",
      "form_schema": {
        "id": "for_report_item-usage_2_6_3_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "format": "SortToggle",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "itemCode": {
                  "description": "Item Code",
                  "type": "string"
                },
                "itemName": {
                  "description": "Item Name",
                  "type": "string"
                },
                "monthlyConsumptionLookBackPeriod": {
                  "description": "Average Monthly Consumption Look Back Period",
                  "type": "number"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "name",
                    "code",
                    "SOH",
                    "MOS",
                    "monthConsumption",
                    "lastMonthConsumption",
                    "twoMonthsAgoConsumption",
                    "expiringInSixMonths",
                    "expiringInTwelveMonths",
                    "stockOnOrder",
                    "AMC12",
                    "AMC24"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.item-code",
              "options": {
                "useDebounce": false
              },
              "scope": "#/properties/itemCode",
              "type": "Control"
            },
            {
              "label": "T#report.item-name",
              "scope": "#/properties/itemName",
              "type": "Control"
            },
            {
              "label": "T#report.amc-lookback",
              "options": {
                "inputAlignment": "end",
                "paddingRight": 25,
                "readonly": true
              },
              "scope": "#/properties/monthlyConsumptionLookBackPeriod",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "name",
                    "T#report.item-name"
                  ],
                  [
                    "code",
                    "T#label.code"
                  ],
                  [
                    "SOH",
                    "T#report.stock-on-hand"
                  ],
                  [
                    "MOS",
                    "T#report.months-cover"
                  ],
                  [
                    "monthConsumption",
                    "T#report.consumption-month"
                  ],
                  [
                    "lastMonthConsumption",
                    "T#report.consumption-last-month"
                  ],
                  [
                    "twoMonthsAgoConsumption",
                    "T#report.consumption-two-months-ago"
                  ],
                  [
                    "expiringInSixMonths",
                    "T#report.expiring-6-months"
                  ],
                  [
                    "expiringInTwelveMonths",
                    "T#report.expiring-12-months"
                  ],
                  [
                    "stockOnOrder",
                    "T#report.stock-on-order"
                  ],
                  [
                    "AMC12",
                    "T#report.amc-12-months"
                  ],
                  [
                    "AMC24",
                    "T#report.amc-24-months"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "scope": "#/properties/dir",
              "type": "SortToggle"
            }
          ],
          "type": "VerticalLayout"
        }
      },
      "excel_template_buffer": null
    },
    {
      "id": "stock-detail_2_6_4_false",
      "name": "Stock Detail",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql"
          ],
          "convert_data": "dmFyIGU9ezM3ODplPT57Y29uc3QgdD0oZSx0KT0+KHQrPSIiKS5zcGxpdCgiLiIpLnJlZHVjZSgoZSx0KT0+ZSYmZVt0XSxlKTtlLmV4cG9ydHM9e2dldE5lc3RlZFZhbHVlOnQsc29ydE5vZGVzOihlLHIsbyk9PihyJiZlLnNvcnQoKGUscyk9PntsZXQgbj10KGUscik7InN0cmluZyI9PXR5cGVvZiBuJiYobj1uLnRvTG9jYWxlTG93ZXJDYXNlKCkpO2xldCBhPXQocyxyKTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGEmJihhPWEudG9Mb2NhbGVMb3dlckNhc2UoKSksbnVsbD09biYmbnVsbD09YT8wOm51bGw9PW4/ImFzYyI9PT1vPy0xOjE6bnVsbD09YT8iYXNjIj09PW8/MTotMTpuPT09YT8wOiJhc2MiPT09bz9uPmE/MTotMTpuPGE/MTotMX0pLGUpfX19LHQ9e307ZnVuY3Rpb24gcihvKXt2YXIgcz10W29dO2lmKHZvaWQgMCE9PXMpcmV0dXJuIHMuZXhwb3J0czt2YXIgbj10W29dPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtvXShuLG4uZXhwb3J0cyxyKSxuLmV4cG9ydHN9ci5kPShlLHQpPT57Zm9yKHZhciBvIGluIHQpci5vKHQsbykmJiFyLm8oZSxvKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbyx7ZW51bWVyYWJsZTohMCxnZXQ6dFtvXX0pfSxyLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpO3ZhciBvPXIoMzc4KTtmdW5jdGlvbiBzKGUpe3ZhciB0LHIscztyZXR1cm4gZS5kYXRhLnN0b2NrTGluZXMubm9kZXM9KHQ9ZS5kYXRhLnN0b2NrTGluZXMubm9kZXMscj1lPy5hcmd1bWVudHM/LnNvcnQ/PyJpdGVtLm5hbWUiLHM9ZT8uYXJndW1lbnRzPy5kaXI/PyJhc2MiLCgwLG8uc29ydE5vZGVzKSh0LHIscykpLGV9ZXhwb3J0e3MgYXMgY29udmVydF9kYXRhfTs=",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>\n  {% include \"style.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"label.batch\", f=\"Batch\")}}</td>\n        <td>{{t(k=\"label.expiry\", f=\"Expiry\")}}</td>\n        <td>{{t(k=\"label.location\", f=\"Location\")}}</td>\n        <td>{{t(k=\"label.unit\", f=\"Unit\")}}</td>\n        <td>{{t(k=\"report.pack-size\", f=\"Pack size\")}}</td>\n        <td>{{t(k=\"report.pack-quantity\", f=\"Pack quantity\")}}</td>\n        <td>{{t(k=\"label.soh\", f=\"SOH\")}}</td>\n        <td>{{t(k=\"label.supplier\", f=\"Supplier\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for stockLine in data.stockLines.nodes %}\n\n      <tr>\n        <td>{{stockLine.item.code}}</td>\n        <td>{{stockLine.item.name}}</td>\n        <td>{{stockLine.batch | default(value='')}}</td>\n        <td>\n          {%if stockLine.expiryDate %}\n          {{stockLine.expiryDate | date(format=\"%d/%m/%Y\")}}\n          {% else %}\n          \n          {% endif %}\n        </td>\n        <td>{{stockLine.location.code | default(value='')}}</td>\n        <td>{{stockLine.item.unitName | default(value='')}}</td>\n        <td>{{stockLine.packSize }}</td>\n        <td>{{stockLine.totalNumberOfPacks}}</td>\n        <td>{{\n          stockLine.totalNumberOfPacks * stockLine.packSize | round( precision=1)  \n        }}</td>\n        <td>{{stockLine.supplierName | default(value='')}}</td>    \n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          },
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query StockDetail($storeId: String, $itemCodeOrName: String) {\n  stockLines(\n    storeId: $storeId\n    filter: {\n      itemCodeOrName: { like: $itemCodeOrName }\n      hasPacksInStore: true\n      isActive: true\n    }\n  ) {\n    ... on StockLineConnector {\n      nodes {\n        batch\n        expiryDate\n        id\n        packSize\n        storeId\n        totalNumberOfPacks\n        supplierName\n        location {\n          code\n        }\n        item {\n          code\n          name\n          unitName\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container table tr:last-child td {\n  border-bottom: none;\n}\n\n.container>table>thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container>table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.status span {\n  padding: 2px;\n  border-radius: 10px;\n}\n"
          }
        }
      },
      "context": "REPORT",
      "sub_context": "StockAndItems",
      "argument_schema_id": "for_report_stock-detail_2_6_4_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.4",
      "code": "stock-detail",
      "form_schema": {
        "id": "for_report_stock-detail_2_6_4_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "format": "SortToggle",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "itemCodeOrName": {
                  "description": "Item Code or Name",
                  "type": "string"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "batch",
                    "item.name",
                    "item.code",
                    "expiryDate",
                    "location.code",
                    "item.unitName",
                    "packSize",
                    "totalNumberOfPacks"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.item-code-or-name",
              "options": {
                "useDebounce": false
              },
              "scope": "#/properties/itemCodeOrName",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "item.name",
                    "T#report.item-name"
                  ],
                  [
                    "batch",
                    "T#label.batch"
                  ],
                  [
                    "item.code",
                    "T#label.code"
                  ],
                  [
                    "expiryDate",
                    "T#report.expiry-date"
                  ],
                  [
                    "location.code",
                    "T#label.location"
                  ],
                  [
                    "item.unitName",
                    "T#label.unit"
                  ],
                  [
                    "packSize",
                    "T#label.pack-size"
                  ],
                  [
                    "totalNumberOfPacks",
                    "T#label.num-packs-total"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "scope": "#/properties/dir",
              "type": "SortToggle"
            }
          ],
          "type": "VerticalLayout"
        }
      },
      "excel_template_buffer": null
    },
    {
      "id": "pending-encounters_2_9_0_false",
      "name": "Pending Encounters",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "encountersQuery.graphql"
          ],
          "convert_data": "dmFyIHQ9ezQxMzp0PT57ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdD43PyJMVEZVIjp0PjA/IkxBVEUiOiIifXQuZXhwb3J0cz17YXBwbHlEYXlzTGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXAodD0+e2NvbnN0IHI9bmV3IERhdGUodC5zdGFydERhdGV0aW1lKSxhPU1hdGguZmxvb3IoKG5ldyBEYXRlLXIpLzg2NGU1KSxuPWE+MD9hOjAsbz1lKG4pO3JldHVybnsuLi50LGRheXNMYXRlOm4sc3RhdHVzOm99fSl9LGdldFN0YXR1czplfX19LGU9e307ZnVuY3Rpb24gcihhKXt2YXIgbj1lW2FdO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG4uZXhwb3J0czt2YXIgbz1lW2FdPXtleHBvcnRzOnt9fTtyZXR1cm4gdFthXShvLG8uZXhwb3J0cyxyKSxvLmV4cG9ydHN9ci5uPXQ9Pnt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/KCk9PnQuZGVmYXVsdDooKT0+dDtyZXR1cm4gci5kKGUse2E6ZX0pLGV9LHIuZD0odCxlKT0+e2Zvcih2YXIgYSBpbiBlKXIubyhlLGEpJiYhci5vKHQsYSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGEse2VudW1lcmFibGU6ITAsZ2V0OmVbYV19KX0sci5vPSh0LGUpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKTt2YXIgYT17fTtyLmQoYSx7SDooKT0+b30pO3ZhciBuPXIoNDEzKTtmdW5jdGlvbiBvKHQpe3JldHVybiB0LmRhdGEuZW5jb3VudGVycy5ub2Rlcz0oMCxuLmFwcGx5RGF5c0xhdGUpKHQuZGF0YS5lbmNvdW50ZXJzLm5vZGVzKSx0fWNvbnN0IHM9YS5IO2V4cG9ydHtzIGFzIGNvbnZlcnRfZGF0YX07",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "{% macro formatDate(datetime) %} {% if datetime %}{{ datetime |\ndate(format=\"%d/%m/%Y\", timezone=arguments.timezone) }}{% endif %} {% endmacro input %}\n\n<style>\n  {% include \"encounters.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"report.program-id\", f=\"Program ID\")}}</td>\n        <td>{{t(k=\"label.first-name\", f=\"First Name\")}}</td>\n        <td>{{t(k=\"label.last-name\", f=\"Last Name\")}}</td>\n        <td>{{t(k=\"label.date-of-birth\", f=\"Date of birth\")}}</td>\n        <td>{{t(k=\"label.next-of-kin\", f=\"Next of kin\")}}</td>\n        <td>{{t(k=\"label.phone\", f=\"Phone\")}}</td>\n        <td>\n          {{t(k=\"report.last-encounter-date\", f=\"Last appointment date\")}}\n        </td>\n        <td>{{t(k=\"report.encounter-date\", f=\"Appointment date\")}}</td>\n        <td>{{t(k=\"report.days-overdue\", f=\"Days overdue\")}}</td>\n        <td>{{t(k=\"label.status\", f=\"Status\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for encounter in data.encounters.nodes %}\n      <tr>\n        <td>{{encounter.programEnrolment.programEnrolmentId}}</td>\n        <td>{{encounter.patient.firstName}}</td>\n        <td>{{encounter.patient.lastName}}</td>\n        <td>{{self::formatDate(datetime=encounter.patient.dateOfBirth)}}</td>\n        <td>{{encounter.patient.nextOfKinName}}</td>\n        <td>{{encounter.patient.phone}}</td>\n        {% if encounter.previousEncounter %}\n        <td>\n          {{self::formatDate(datetime=encounter.previousEncounter.startDatetime)}}\n        </td>\n        {% else %}\n        <td></td>\n        {% endif %}\n        <td>{{self::formatDate(datetime=encounter.startDatetime)}}</td>\n        <td>{{encounter.daysLate}}</td>\n\n        {% if encounter.status == \"LTFU\" %}\n        <td>{{t(k=\"report.lost-to-follow-up\", f=\"Lost to follow-up\")}}</td>\n        {% elif encounter.status == \"LATE\" %}\n        <td>{{t(k=\"report.late\", f=\"Late\")}}</td>\n        {% else %}\n        <td>{{t(k=\"report.planned\", f=\"Planned\")}}</td>\n        {% endif %}\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          },
          "encountersQuery.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query encountersQuery(\n  $storeId: String!\n  $programId: String!\n  $startDatetime: DatetimeFilterInput\n) {\n  encounters(\n    storeId: $storeId\n    filter: {\n      programId: { equalTo: $programId }\n      status: { equalTo: \"PENDING\" }\n      startDatetime: $startDatetime\n    }\n    sort: { key: \"startDatetime\", desc: false }\n  ) {\n    ... on EncounterConnector {\n      nodes {\n        ... on EncounterNode {\n          id\n          startDatetime\n          type\n          patient {\n            firstName\n            lastName\n            dateOfBirth\n            phone\n            nextOfKinName\n          }\n          programEnrolment {\n            programEnrolmentId\n          }\n          previousEncounter {\n            startDatetime\n          }\n        }\n      }\n    }\n  }\n  store(id: $storeId) {\n    ... on StoreNode {\n      code\n      storeName\n      logo\n      name(storeId: $storeId) {\n        ... on NameNode {\n          address1\n          address2\n          chargeCode\n          code\n          comment\n          country\n          email\n          name\n          phone\n          website\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "encounters.css": {
            "type": "Resource",
            "data": "@page {\n    margin: 0;\n    size: A4 landscape;\n  }\n  \n  .container {\n    margin: auto;\n    padding: 10px;\n    font-size: 14px;\n    font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n    color: #555;\n  }\n  \n  .container table {\n    width: 100%;\n    font-size: inherit;\n    font-family: inherit;\n    text-align: left;\n    margin-top: 10;\n    margin-bottom: 15;\n    border-collapse: separate;\n  }\n  \n  .container table td {\n    padding: 10px;\n    vertical-align: top;\n    border-top: 1px solid rgb(164, 163, 163);\n  }\n  \n  .container table tr:last-child td {\n    border-bottom: none;\n  }\n  \n  .container>table>thead {\n    position: -webkit-sticky;\n    position: sticky;\n    top: 0;\n    background-color: #f1f1f1;\n  }\n  \n  .container,\n  body,\n  .container>table {\n    margin-top: 0px;\n    padding-top: 0px;\n  }\n  \n  .container table tr.heading td {\n    font-weight: bold;\n    margin-bottom: 15px;\n  }\n  \n"
          }
        }
      },
      "context": "DISPENSARY",
      "sub_context": "Encounters",
      "argument_schema_id": "for_report_pending-encounters_2_9_0_false",
      "comment": null,
      "is_custom": false,
      "version": "2.9.0",
      "code": "pending-encounters",
      "form_schema": {
        "id": "for_report_pending-encounters_2_9_0_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/Filters"
            }
          ],
          "definitions": {
            "Filters": {
              "properties": {
                "programId": {
                  "description": "Program ID",
                  "type": "string"
                },
                "startDatetime": {
                  "description": "Encounter Date",
                  "format": "date-time",
                  "type": [
                    "object",
                    "null"
                  ]
                }
              },
              "required": [
                "programId"
              ]
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#label.program",
              "scope": "#/properties/programId",
              "type": "PatientProgramSearch"
            },
            {
              "label": "",
              "options": {
                "dateOnly": true
              },
              "scope": "#/properties/startDatetime",
              "type": "DateRange"
            }
          ],
          "type": "VerticalLayout"
        }
      },
      "excel_template_buffer": null
    },
    {
      "id": "pending-encounters_2_6_4_false",
      "name": "Pending Encounters",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "encountersQuery.graphql"
          ],
          "convert_data": "dmFyIHQ9ezQxMzp0PT57ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdD43PyJMVEZVIjp0PjA/IkxBVEUiOiIifXQuZXhwb3J0cz17YXBwbHlEYXlzTGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXAodD0+e2NvbnN0IHI9bmV3IERhdGUodC5zdGFydERhdGV0aW1lKSxhPU1hdGguZmxvb3IoKG5ldyBEYXRlLXIpLzg2NGU1KSxuPWE+MD9hOjAsbz1lKG4pO3JldHVybnsuLi50LGRheXNMYXRlOm4sc3RhdHVzOm99fSl9LGdldFN0YXR1czplfX19LGU9e307ZnVuY3Rpb24gcihhKXt2YXIgbj1lW2FdO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG4uZXhwb3J0czt2YXIgbz1lW2FdPXtleHBvcnRzOnt9fTtyZXR1cm4gdFthXShvLG8uZXhwb3J0cyxyKSxvLmV4cG9ydHN9ci5uPXQ9Pnt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/KCk9PnQuZGVmYXVsdDooKT0+dDtyZXR1cm4gci5kKGUse2E6ZX0pLGV9LHIuZD0odCxlKT0+e2Zvcih2YXIgYSBpbiBlKXIubyhlLGEpJiYhci5vKHQsYSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGEse2VudW1lcmFibGU6ITAsZ2V0OmVbYV19KX0sci5vPSh0LGUpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKTt2YXIgYT17fTtyLmQoYSx7SDooKT0+b30pO3ZhciBuPXIoNDEzKTtmdW5jdGlvbiBvKHQpe3JldHVybiB0LmRhdGEuZW5jb3VudGVycy5ub2Rlcz0oMCxuLmFwcGx5RGF5c0xhdGUpKHQuZGF0YS5lbmNvdW50ZXJzLm5vZGVzKSx0fWNvbnN0IHM9YS5IO2V4cG9ydHtzIGFzIGNvbnZlcnRfZGF0YX07",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "encountersQuery.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query encountersQuery(\n  $storeId: String!\n  $programId: String!\n  $after: DateTime\n  $before: DateTime\n) {\n  encounters(\n    storeId: $storeId\n    filter: {\n      programId: { equalTo: $programId }\n      status: { equalTo: \"PENDING\" }\n      startDatetime: { afterOrEqualTo: $after, beforeOrEqualTo: $before }\n    }\n    sort: { key: \"startDatetime\", desc: false }\n  ) {\n    ... on EncounterConnector {\n      nodes {\n        ... on EncounterNode {\n          id\n          startDatetime\n          type\n          patient {\n            firstName\n            lastName\n            dateOfBirth\n            phone\n            nextOfKinName\n          }\n          programEnrolment {\n            programEnrolmentId\n          }\n          previousEncounter {\n            startDatetime\n          }\n        }\n      }\n    }\n  }\n  store(id: $storeId) {\n    ... on StoreNode {\n      code\n      storeName\n      logo\n      name(storeId: $storeId) {\n        ... on NameNode {\n          address1\n          address2\n          chargeCode\n          code\n          comment\n          country\n          email\n          name\n          phone\n          website\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "encounters.css": {
            "type": "Resource",
            "data": "@page {\n    margin: 0;\n    size: A4 landscape;\n  }\n  \n  .container {\n    margin: auto;\n    padding: 10px;\n    font-size: 14px;\n    font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n    color: #555;\n  }\n  \n  .container table {\n    width: 100%;\n    font-size: inherit;\n    font-family: inherit;\n    text-align: left;\n    margin-top: 10;\n    margin-bottom: 15;\n    border-collapse: separate;\n  }\n  \n  .container table td {\n    padding: 10px;\n    vertical-align: top;\n    border-top: 1px solid rgb(164, 163, 163);\n  }\n  \n  .container table tr:last-child td {\n    border-bottom: none;\n  }\n  \n  .container>table>thead {\n    position: -webkit-sticky;\n    position: sticky;\n    top: 0;\n    background-color: #f1f1f1;\n  }\n  \n  .container,\n  body,\n  .container>table {\n    margin-top: 0px;\n    padding-top: 0px;\n  }\n  \n  .container table tr.heading td {\n    font-weight: bold;\n    margin-bottom: 15px;\n  }\n  \n"
          },
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "{% macro formatDate(datetime) %} {% if datetime %}{{ datetime |\ndate(format=\"%d/%m/%Y\", timezone=arguments.timezone) }}{% endif %} {% endmacro input %}\n\n<style>\n  {% include \"encounters.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"report.program-id\", f=\"Program ID\")}}</td>\n        <td>{{t(k=\"label.first-name\", f=\"First Name\")}}</td>\n        <td>{{t(k=\"label.last-name\", f=\"Last Name\")}}</td>\n        <td>{{t(k=\"label.date-of-birth\", f=\"Date of birth\")}}</td>\n        <td>{{t(k=\"label.next-of-kin\", f=\"Next of kin\")}}</td>\n        <td>{{t(k=\"label.phone\", f=\"Phone\")}}</td>\n        <td>\n          {{t(k=\"report.last-encounter-date\", f=\"Last appointment date\")}}\n        </td>\n        <td>{{t(k=\"report.encounter-date\", f=\"Appointment date\")}}</td>\n        <td>{{t(k=\"report.days-overdue\", f=\"Days overdue\")}}</td>\n        <td>{{t(k=\"label.status\", f=\"Status\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for encounter in data.encounters.nodes %}\n      <tr>\n        <td>{{encounter.programEnrolment.programEnrolmentId}}</td>\n        <td>{{encounter.patient.firstName}}</td>\n        <td>{{encounter.patient.lastName}}</td>\n        <td>{{self::formatDate(datetime=encounter.patient.dateOfBirth)}}</td>\n        <td>{{encounter.patient.nextOfKinName}}</td>\n        <td>{{encounter.patient.phone}}</td>\n        {% if encounter.previousEncounter %}\n        <td>\n          {{self::formatDate(datetime=encounter.previousEncounter.startDatetime)}}\n        </td>\n        {% else %}\n        <td></td>\n        {% endif %}\n        <td>{{self::formatDate(datetime=encounter.startDatetime)}}</td>\n        <td>{{encounter.daysLate}}</td>\n\n        {% if encounter.status == \"LTFU\" %}\n        <td>{{t(k=\"report.lost-to-follow-up\", f=\"Lost to follow-up\")}}</td>\n        {% elif encounter.status == \"LATE\" %}\n        <td>{{t(k=\"report.late\", f=\"Late\")}}</td>\n        {% else %}\n        <td>{{t(k=\"report.planned\", f=\"Planned\")}}</td>\n        {% endif %}\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          }
        }
      },
      "context": "DISPENSARY",
      "sub_context": "Encounters",
      "argument_schema_id": "for_report_pending-encounters_2_6_4_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.4",
      "code": "pending-encounters",
      "form_schema": {
        "id": "for_report_pending-encounters_2_6_4_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/Filters"
            }
          ],
          "definitions": {
            "Filters": {
              "properties": {
                "after": {
                  "description": "From date",
                  "format": "date-time",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "before": {
                  "description": "To date",
                  "format": "date-time",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "programId": {
                  "description": "Program ID",
                  "type": "string"
                }
              },
              "required": [
                "programId"
              ]
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#label.program",
              "scope": "#/properties/programId",
              "type": "PatientProgramSearch"
            },
            {
              "label": "T#label.from-date",
              "options": {
                "dateOnly": true
              },
              "scope": "#/properties/after",
              "type": "Control"
            },
            {
              "label": "T#label.to-date",
              "options": {
                "dateAsEndOfDay": true,
                "dateOnly": true
              },
              "scope": "#/properties/before",
              "type": "Control"
            }
          ],
          "type": "VerticalLayout"
        }
      },
      "excel_template_buffer": null
    }
  ]
}