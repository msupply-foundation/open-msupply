{
  "reports": [
    {
      "id": "stock-status_2_6_2_false",
      "name": "Stock Status",
      "template": {
        "index": {
          "template": "template.html",
          "header": null,
          "footer": null,
          "query": [
            "query.graphql"
          ],
          "convert_data": "dmFyIGU9ezM3ODplPT57Y29uc3QgdD1lPT57bGV0IHI9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG8peyIiIT09ZVtvXSYmdm9pZCAwIT09ZVtvXSYmbnVsbCE9PWVbb10mJigib2JqZWN0Ij09dHlwZW9mIGVbb10/cltvXT10KGVbb10pOnJbb109ZVtvXSl9KSkscn0scj0oZSx0KT0+KHQrPSIiKS5zcGxpdCgiLiIpLnJlZHVjZSgoKGUsdCk9PmUmJmVbdF0pLGUpO2UuZXhwb3J0cz17Y2xlYW5VcE9iamVjdDp0LGNsZWFuVXBOb2RlczplPT57bGV0IHI9W107cmV0dXJuIGUuZm9yRWFjaCgoZT0+ezAhPU9iamVjdC5rZXlzKGUpLmxlbmd0aCYmci5wdXNoKHQoZSkpfSkpLHJ9LGdldE5lc3RlZFZhbHVlOnIsc29ydE5vZGVzOihlLHQsbyk9Pih0JiZlLnNvcnQoKChlLHMpPT57bGV0IG49cihlLHQpOyJzdHJpbmciPT10eXBlb2YgbiYmKG49bi50b0xvY2FsZUxvd2VyQ2FzZSgpKTtsZXQgYT1yKHMsdCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBhJiYoYT1hLnRvTG9jYWxlTG93ZXJDYXNlKCkpLG51bGw9PW4mJm51bGw9PWE/MDpudWxsPT1uPyJhc2MiPT09bz8tMToxOm51bGw9PWE/ImFzYyI9PT1vPzE6LTE6bj09PWE/MDoiYXNjIj09PW8/bj5hPzE6LTE6bjxhPzE6LTF9KSksZSl9fX0sdD17fSxyPWZ1bmN0aW9uIHIobyl7dmFyIHM9dFtvXTtpZih2b2lkIDAhPT1zKXJldHVybiBzLmV4cG9ydHM7dmFyIG49dFtvXT17ZXhwb3J0czp7fX07cmV0dXJuIGVbb10obixuLmV4cG9ydHMsciksbi5leHBvcnRzfSgzNzgpO2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUuZGF0YS5pdGVtcy5ub2Rlcz0oKGUsdCxvKT0+e2xldCBzPSgwLHIuY2xlYW5VcE5vZGVzKShlKTtyZXR1cm4oMCxyLnNvcnROb2Rlcykocyx0LG8pfSkoZS5kYXRhLml0ZW1zLm5vZGVzLGU/LmFyZ3VtZW50cz8uc29ydD8/Im5hbWUiLGU/LmFyZ3VtZW50cz8uZGlyPz8iYXNjIiksZX1leHBvcnR7byBhcyBjb252ZXJ0X2RhdGF9Ow==",
          "convert_data_type": "BoaJs"
        },
        "entries": {
          "query.graphql": {
            "type": "GraphGLQuery",
            "data": {
              "query": "query StockStatus($storeId: String, $itemCode: String, $itemName: String) {\n  items(\n    storeId: $storeId\n    filter: {\n      name: { like: $itemName }\n      isVisibleOrOnHand: true\n      isActive: true\n    }\n    page: { first: 5000 }\n  ) {\n    ... on ItemConnector {\n      nodes {\n        code\n        name\n        stats(storeId: $storeId) {\n          totalConsumption\n          availableMonthsOfStockOnHand\n          stockOnHand\n          averageMonthlyConsumption\n        }\n      }\n    }\n  }\n}\n",
              "variables": null
            }
          },
          "style.css": {
            "type": "Resource",
            "data": "@page {\n  margin: 0;\n  size: A4 landscape;\n}\n\n.paging {\n  width: 100%;\n}\n\n.container {\n  margin: auto;\n  padding: 10px;\n  font-size: 14px;\n  font-family: \"Helvetica Neue\", \"Helvetica\", Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.container table {\n  width: 100%;\n  font-size: inherit;\n  font-family: inherit;\n  text-align: left;\n  margin-top: 10;\n  margin-bottom: 15;\n  border-collapse: separate;\n}\n\n.container table td {\n  padding: 10px;\n  vertical-align: top;\n  border-top: 1px solid rgb(164, 163, 163);\n}\n\n.container table tr:last-child td {\n  border-bottom: none;\n}\n\n.container>table>thead {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background-color: #f1f1f1;\n}\n\n.container,\nbody,\n.container>table {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n\n.container table tr.heading td {\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n\n.container table td.status span {\n  padding: 2px;\n  border-radius: 10px;\n}\n\n\n.container table td.status span::before {\n  content: '';\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  margin-right: 5px;\n}\n\n.container table td.status span.out-of-stock::before {\n  background-color: #f40502;\n}\n\n.container table td.status span.out-of-stock {\n   padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #fbcdcc;\n}\n\n.container table td.status span.overstocked::before {\n  background-color: #0260f7;\n}\n\n.container table td.status span.overstocked {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #d9d9ff;\n}\n\n.container table td.status span.understocked::before {\n  background-color: #f79a02;\n}\n\n.container table td.status span.understocked {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #fdebcc;\n}\n\n.container table td.status span.well-stocked::before {\n  background-color: #33a902;\n}\n\n.container table td.status span.well-stocked {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #d6eecc;\n}\n\n.container table td.status span.no-consumption::before {\n  background-color: #8f90a6;\n}\n\n.container table td.status span.no-consumption {\n  padding: 3px 10px;\n  white-space: nowrap;\n  background-color: #e9e9ed;\n}\n"
          },
          "template.html": {
            "type": "TeraTemplate",
            "data": {
              "output": "Html",
              "template": "<style>\n  {% include \"style.css\" %}\n</style>\n\n<div class=\"container\">\n  <table>\n    <thead>\n      <tr class=\"heading\">\n        <td>{{t(k=\"label.code\", f=\"Code\")}}</td>\n        <td>{{t(k=\"label.name\", f=\"Name\")}}</td>\n        <td>{{t(k=\"label.status\", f=\"Status\")}}</td>\n        <td>\n          {{t(k=\"report.consumption\", f=\"Consumption\")}}\n          ({{arguments.monthlyConsumptionLookBackPeriod | default(value=3)}})\n          {{t(k=\"label.months\", f=\"months\")}}\n        </td>\n        <td>{{t(k=\"label.soh\", f=\"SOH\")}}</td>\n        <td>\n          {{t(k=\"label.amc\", f=\"AMC\")}}\n          ({{arguments.monthlyConsumptionLookBackPeriod | default(value=3)}})\n          {{t(k=\"label.months\", f=\"months\")}}\n        </td>\n        <td>{{t(k=\"report.mos\", f=\"MOS\")}}</td>\n      </tr>\n    </thead>\n    <tbody>\n      {% for item in data.items.nodes %} \n      {% set SOH = item.stats.stockOnHand | default(value=0) | round( precision=1) %} \n      {% set AMC =  item.stats.averageMonthlyConsumption | default(value=0) |\n      round(precision=1) %} \n      {% set MOS = item.stats.availableMonthsOfStockOnHand | default(value=0) | round( precision=1) %}\n\n      <tr>\n        <td>{{item.code}}</td>\n        <td>{{item.name}}</td>\n        <td class=\"status\">\n          {% if SOH == 0 and AMC > 0 %}\n          <span class=\"out-of-stock\"\n            >{{t(k=\"report.out-of-stock\", f=\"Out of Stock\")}}</span\n          >\n          {% elif AMC == 0 %}\n          <span class=\"no-consumption\"\n            >{{t(k=\"report.no-consumption\", f=\"No consumption\")}}</span\n          >\n          {% elif MOS >= arguments.monthsUnderstock | default(value=0) and MOS\n          <= arguments.monthsOverstock | default(value=0) %}\n          <span class=\"well-stocked\"\n            >{{t(k=\"report.well-stocked\", f=\"Well stocked\")}}</span\n          >\n          {% elif MOS < arguments.monthsUnderstock | default(value=0) %}\n          <span class=\"understocked\">\n            {{t(k=\"report.understocked\", f=\"Understocked\")}}</span\n          >\n          {% elif MOS > arguments.monthsOverstock | default(value=0) %}\n          <span class=\"overstocked\"\n            >{{t(k=\"report.overstocked\", f=\"Overstocked\")}}</span\n          >\n          {% else %} {% endif %}\n        </td>\n        <td>\n          {{item.stats.totalConsumption | default(value=0) | round(\n          precision=1)}}\n        </td>\n        <td>{{SOH}}</td>\n        <td>{{AMC}}</td>\n        <td>\n          {{item.stats.availableMonthsOfStockOnHand | default(value=0) | round(\n          precision=1)}}\n        </td>\n      </tr>\n      {% endfor %}\n    </tbody>\n  </table>\n</div>\n"
            }
          }
        }
      },
      "context": "REPORT",
      "sub_context": "StockAndItems",
      "argument_schema_id": "for_report_stock-status_2_6_2_false",
      "comment": null,
      "is_custom": false,
      "version": "2.6.2",
      "code": "stock-status",
      "form_schema": {
        "id": "for_report_stock-status_2_6_2_false",
        "type": "reportArgument",
        "json_schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "allOf": [
            {
              "$ref": "#/definitions/StockFilters"
            }
          ],
          "definitions": {
            "StockFilters": {
              "properties": {
                "dir": {
                  "description": "sort by dir",
                  "enum": [
                    "asc",
                    "desc"
                  ],
                  "type": "string"
                },
                "itemName": {
                  "description": "Item Name",
                  "type": "string"
                },
                "monthlyConsumptionLookBackPeriod": {
                  "description": "Average Monthly Consumption Look Back Period",
                  "type": "number"
                },
                "monthsOverstock": {
                  "description": "Months Overstock",
                  "type": "number"
                },
                "monthsUnderstock": {
                  "description": "Months Understock",
                  "type": "number"
                },
                "sort": {
                  "description": "sort by",
                  "enum": [
                    "name"
                  ],
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "ui_schema": {
          "elements": [
            {
              "label": "T#report.item-name",
              "options": {
                "useDebounce": false
              },
              "scope": "#/properties/itemName",
              "type": "Control"
            },
            {
              "label": "T#report.amc-lookback",
              "options": {
                "readonly": true
              },
              "scope": "#/properties/monthlyConsumptionLookBackPeriod",
              "type": "Control"
            },
            {
              "label": "T#label.max-months-of-stock",
              "options": {
                "readonly": true
              },
              "scope": "#/properties/monthsOverstock",
              "type": "Control"
            },
            {
              "label": "T#label.min-months-of-stock",
              "options": {
                "readonly": true
              },
              "scope": "#/properties/monthsUnderstock",
              "type": "Control"
            },
            {
              "label": "T#report.sort-by",
              "options": {
                "show": [
                  [
                    "name",
                    "T#report.item-name"
                  ]
                ]
              },
              "scope": "#/properties/sort",
              "type": "Control"
            },
            {
              "label": "T#report.sort-direction",
              "options": {
                "show": [
                  [
                    "asc",
                    "T#report.ascending"
                  ],
                  [
                    "desc",
                    "T#report.descending"
                  ]
                ]
              },
              "scope": "#/properties/dir",
              "type": "Control"
            }
          ],
          "type": "VerticalLayout"
        }
      }
    }
  ]
}