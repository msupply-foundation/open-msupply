{
  "type": "VerticalLayout",
  "elements": [
    {
      "type": "HorizontalLayout",
      "elements": [
        {
          "type": "VerticalLayout",
          "elements": [
            {
              "type": "Group",
              "label": "Patient Information",
              "elements": [
                {
                  "type": "Control",
                  "scope": "#/properties/code",
                  "label": "National Health Id",
                  "options": {
                    "pattern": "^[0-9]{10}$",
                    "examples": ["1234567890"]
                  }
                },
                {
                  "type": "IdGenerator",
                  "label": "NUIC",
                  "scope": "#/",
                  "options": {
                    "targetField": "code2",
                    "parts": [
                      {
                        "type": "Field",
                        "field": "lastName",
                        "mutations": [{ "firstNChars": 2 }, { "toUpperCase": true }]
                      },
                      {
                        "type": "Field",
                        "field": ["birthPlace", "district"],
                        "mutations": [{ "firstNChars": 2 }, { "toUpperCase": true }]
                      },
                      {
                        "type": "Field",
                        "field": "hand",
                        "mutations": [
                          {
                            "mapping": {
                              "LEFT": "L",
                              "RIGHT": "R"
                            }
                          }
                        ]
                      },
                      {
                        "type": "Field",
                        "field": "birthOrder",
                        "mutations": [{ "firstNChars": 2 }, { "toUpperCase": true }]
                      },
                      {
                        "type": "Field",
                        "field": "gender",
                        "mutations": [
                          {
                            "mapping": {
                              "MALE": "1",
                              "FEMALE": "2",
                              "TRANSGENDER": "3",
                              "TRANSGENDER_MALE": "3",
                              "TRANSGENDER_FEMALE": "3",
                              "UNKNOWN": "3",
                              "NON_BINARY": "3"
                            }
                          }
                        ]
                      },
                      {
                        "type": "Field",
                        "field": "firstName",
                        "mutations": [{ "lastNChars": 2 }, { "toUpperCase": true }]
                      }
                    ]
                  }
                },
                {
                  "type": "Control",
                  "scope": "#/properties/firstName",
                  "label": "First Name"
                },
                {
                  "type": "Control",
                  "scope": "#/properties/lastName",
                  "label": "Last Name"
                },
                {
                  "type": "Control",
                  "scope": "#/properties/gender",
                  "label": "Sex",
                  "options": {
                    "show": [
                      ["MALE", "Male"],
                      ["FEMALE", "Female"],
                      ["TRANSGENDER", "Transgender"]
                    ]
                  }
                },
                {
                  "type": "DateOfBirth",
                  "label": "Date of Birth",
                  "scope": "#"
                },
                {
                  "type": "Control",
                  "label": "DOB Estimated",
                  "scope": "#/properties/dateOfBirthIsEstimated"
                },
                {
                  "type": "Autocomplete",
                  "label": "Birth Province",
                  "scope": "#/properties/birthPlace/properties/region",
                  "options": {
                    "freeText": false,
                    "values": [
                      "Western",
                      "Gulf",
                      "Central",
                      "National Capital District",
                      "Milne Bay",
                      "Oro",
                      "Southern Highlands",
                      "Enga",
                      "Western Highlands",
                      "Simbu",
                      "Eastern Highlands",
                      "Morobe",
                      "Madang",
                      "East Sepik",
                      "Saundaun",
                      "Manus",
                      "New Ireland",
                      "East New Britain",
                      "West New Britain",
                      "North Solomon",
                      "Expatriate",
                      "Hela",
                      "Jiwaka"
                    ]
                  }
                },
                {
                  "type": "ConditionalSelect",
                  "label": "Birth District",
                  "scope": "#/properties/birthPlace/properties/district",
                  "options": {
                    "conditionField": "birthPlace.region",
                    "conditionalValues": {
                      "Western": [
                        "Middle Fly",
                        "North Fly District",
                        "South Fly"
                      ],
                      "Gulf": ["Kerema District", "Kikori District"],
                      "Central": [
                        "Abau District",
                        "Goilala District",
                        "Kairuku-Hiri District",
                        "Rigo District"
                      ],
                      "National Capital District": [
                        "Moresby North-East",
                        "Moresby North_West",
                        "Moresby South"
                      ],
                      "Milne Bay": [
                        "Alotau District",
                        "Esa'ala District",
                        "Kiriwini-Goodenough District",
                        "Samarai-Murua District"
                      ],
                      "Oro": ["Ijivitari District", "Sohe District"],
                      "Southern Highlands": [
                        "Ialibu-Pangia District",
                        "Imbonggu District",
                        "Kagua-Erave District",
                        "Komo-Magarima District",
                        "Koroba-Kopiago District",
                        "Mendi-Munihu District",
                        "Nipa-Kutubu District",
                        "Tari-Pori District"
                      ],
                      "Enga": [
                        "Kandep District",
                        "Kompiam District",
                        "Lagaip-Porgera District",
                        "Wabag District",
                        "Kandep"
                      ],
                      "Western Highlands": [
                        "Anglimp-South Waghi District",
                        "Dei District",
                        "Jimi District",
                        "Mount Hagen District",
                        "Mul-Baiyer District",
                        "North Waghi District",
                        "Tambul-Nebilyer District"
                      ],
                      "Simbu": [
                        "Chauve District",
                        "Gumine District",
                        "Karimui-Nomane District",
                        "Kerowagi District",
                        "Kundiawa-Gembogl District",
                        "Sina Sina-Yonggomugl District"
                      ],
                      "Eastern Highlands": [
                        "Daulo District",
                        "Goroka District",
                        "Henganofi District",
                        "Kainantu District",
                        "Lufa District",
                        "Obura-Wonenara District",
                        "Okapa District District",
                        "Unggai-Benna District"
                      ],
                      "Morobe": [
                        "Bulolo District",
                        "Finschhafen District",
                        "Huon District",
                        "Kabwum District",
                        "Lae District",
                        "Markham District",
                        "Menyamya District",
                        "Nawae District",
                        "Tewae-Siassi District"
                      ],
                      "Madang": [
                        "Bogia District",
                        "Madang District",
                        "Middle Ramu District",
                        "Rai Coast District",
                        "Sumkar District",
                        "Usino Bundi District"
                      ],
                      "East Sepik": [
                        "Ambunti-Dreikikir District",
                        "Angoram District",
                        "Maprik District",
                        "Wewak District",
                        "Wosera-Gawi District",
                        "Yangoru-Saussia District"
                      ],
                      "Saundaun": [
                        "Aitape-Lumi District",
                        "Nuku District",
                        "Telefomin District",
                        "Vanimo-Green River District"
                      ],
                      "Manus": ["Manus District"],
                      "New Ireland": ["Kavieng District", "Namatanai District"],
                      "East New Britain": [
                        "Gazelle District",
                        "Kokopo District",
                        "Pomio District",
                        "Rabaul District"
                      ],
                      "West New Britain": [
                        "Kandrian-Gloucester District",
                        "Talasea District"
                      ],
                      "North Solomon": [
                        "Central Bougainville District",
                        "North Bougainville District",
                        "South Bougainville District"
                      ],
                      "Expatriate": ["Other"],
                      "Hela": [],
                      "Jiwaka": []
                    }
                  }
                },
                {
                  "type": "Control",
                  "scope": "#/properties/birthOrder"
                },
                {
                  "type": "Control",
                  "scope": "#/properties/hand",
                  "label": "Handedness",
                  "options": {
                    "show": [
                      ["LEFT", "Left"],
                      ["RIGHT", "Right"]
                    ]
                  }
                },
                {
                  "type": "FirstItemArray",
                  "scope": "#/properties/contactDetails",
                  "options": {
                    "detail": {
                      "type": "VerticalLayout",
                      "elements": [
                        {
                          "type": "Control",
                          "scope": "/properties/address1"
                        },
                        {
                          "type": "Control",
                          "scope": "/properties/address2"
                        },
                        {
                          "type": "Control",
                          "scope": "/properties/district"
                        },
                        {
                          "type": "Control",
                          "scope": "/properties/phone"
                        },
                        {
                          "type": "Control",
                          "scope": "/properties/mobile"
                        },
                        {
                          "type": "Control",
                          "scope": "/properties/email"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "type": "VerticalLayout",
          "elements": [
            {
              "type": "Group",
              "label": "Demographics",
              "elements": [
                {
                  "type": "Control",
                  "scope": "#/properties/family/properties/maritalStatus",
                  "options": {
                    "show": [
                      ["SINGLE", "Single"],
                      ["MARRIED", "Married"],
                      ["DIVORCED", "Divorced"],
                      ["WIDOWED", "Widowed"],
                      ["SEPARATED", "Separated"],
                      ["REGISTERED_PARTNERSHIP", "Registered Partnership"]
                    ]
                  }
                },
                {
                  "type": "Control",
                  "scope": "#/properties/socioEconomics/properties/education"
                },
                {
                  "type": "Control",
                  "scope": "#/properties/socioEconomics/properties/occupation"
                }
              ]
            },
            {
              "type": "Control",
              "scope": "#/properties/allergies/properties/drugAllergies",
              "itemLabel": "${index}: ${drug}",
              "options": {
                "detail": {
                  "type": "VerticalLayout",
                  "elements": [
                    {
                      "type": "Control",
                      "scope": "/properties/drug"
                    },
                    {
                      "type": "Control",
                      "scope": "/properties/description"
                    }
                  ]
                }
              }
            },
            {
              "type": "Group",
              "label": "Family Information",
              "elements": [
                {
                  "type": "AccordionGroup",
                  "label": "Next of Kin",
                  "elements": [
                    {
                      "type": "Control",
                      "scope": "#/properties/family/properties/nextOfKin/properties/firstName"
                    },
                    {
                      "type": "Control",
                      "scope": "#/properties/family/properties/nextOfKin/properties/lastName"
                    },
                    {
                      "type": "FirstItemArray",
                      "scope": "#/properties/family/properties/nextOfKin/properties/contactDetails",
                      "options": {
                        "detail": {
                          "type": "VerticalLayout",
                          "elements": [
                            {
                              "type": "Control",
                              "scope": "/properties/phone"
                            },
                            {
                              "type": "Control",
                              "scope": "/properties/mobile"
                            },
                            {
                              "type": "Control",
                              "scope": "/properties/email"
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "Group",
              "label": "Death",
              "elements": [
                {
                  "type": "Control",
                  "scope": "#/properties/isDeceased"
                },
                {
                  "type": "Control",
                  "scope": "#/properties/dateOfDeath",
                  "rule": {
                    "effect": "HIDE",
                    "condition": {
                      "scope": "#/properties/isDeceased",
                      "schema": {
                        "const": false
                      }
                    }
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
